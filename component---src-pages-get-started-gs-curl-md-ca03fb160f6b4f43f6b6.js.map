{"version":3,"file":"component---src-pages-get-started-gs-curl-md-ca03fb160f6b4f43f6b6.js","mappings":"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","sources":["webpack://dev-site-documentation-template/./src/pages/get-started/gs-curl.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-webapi/commerce-webapi/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"using-curl-to-run-requests\"\n    }}>{`Using cURL to run requests`}</h1>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://curl.haxx.se/\"\n      }}>{`'cURL'`}</a>{` is a command-line tool that lets you transmit HTTP requests and receive responses from the command line or a shell script. It is available for Linux distributions, Mac OS X, and Windows.`}</p>\n    <p>{`To use cURL to run your REST web `}<a parentName=\"p\" {...{\n        \"href\": \"https://glossary.magento.com/api\"\n      }}>{`API`}</a>{` call, use the cURL command syntax to construct the command.`}</p>\n    <p>{`To create the endpoint in the call, append the REST URI that you constructed in `}<a parentName=\"p\" {...{\n        \"href\": \"./gs-web-api-request.md\"\n      }}>{`Construct a request`}</a>{` to this URL:`}</p>\n    <p><inlineCode parentName=\"p\">{`https://<HOST_OR_IP>/<BASE_INSTALL_DIR>/rest/`}</inlineCode></p>\n    <p>{`To pass the customer data object in the POST call payload, specify a JSON or `}<a parentName=\"p\" {...{\n        \"href\": \"https://glossary.magento.com/xml\"\n      }}>{`XML`}</a>{` request body on the call.`}</p>\n    <p>{`For a complete list of cURL command options, see `}<a parentName=\"p\" {...{\n        \"href\": \"http://curl.haxx.se/docs/manpage.html\"\n      }}>{`curl.1 the man page`}</a>{`.`}</p>\n    <p>{`The cURL examples in this guide use the following command-line options:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Option`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`-d`}</inlineCode>{` `}<inlineCode parentName=\"td\">{`-data`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Sends the specified data in a POST request to the HTTP server. Use this option to send a JSON or XML request body to the server.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`-H`}</inlineCode>{` `}<inlineCode parentName=\"td\">{`-header`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Specifies an extra HTTP header in the request. Precede each header with the `}<inlineCode parentName=\"td\">{`-H`}</inlineCode>{` option. You can specify any number of extra headers. For a list of common headers used in web API requests, see `}<a parentName=\"td\" {...{\n              \"href\": \"./gs-web-api-request.md#http-headers\"\n            }}>{`HTTP headers`}</a></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`-i`}</inlineCode>{` `}<inlineCode parentName=\"td\">{`-input`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Includes the HTTP header in the output.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`-s`}</inlineCode>{` `}<inlineCode parentName=\"td\">{`-silent`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Specifies silent or quiet mode, which makes cURL mute. Progress and error messages are suppressed.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`-T`}</inlineCode>{` `}<inlineCode parentName=\"td\">{`-upload-file`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Transfers the specified local file to the remote URL.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`-X`}</inlineCode>{` `}<inlineCode parentName=\"td\">{`-request`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Specifies the request method to use when communicating with the HTTP server. The specified request method is used instead of the default GET method.`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <h2 {...{\n      \"id\": \"using-curl\"\n    }}>{`Using cUrl`}</h2>\n    <p>{`Adobe Commerce and Magento Open Source provide a service-wrapper for using cURL instead of using the default PHP cURL. The class `}<inlineCode parentName=\"p\">{`Magento\\\\Framework\\\\HTTP\\\\Client\\\\Curl`}</inlineCode>{` may be used to work with HTTP protocol using cURL library.\nFirst, create an instance of `}<inlineCode parentName=\"p\">{`Magento\\\\Framework\\\\HTTP\\\\Client\\\\Curl`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`/**\n* Constructor.\n*\n* @param Magento\\\\Framework\\\\HTTP\\\\Client\\\\Curl $curl\n*/\npublic function __construct(\n   Magento\\\\Framework\\\\HTTP\\\\Client\\\\Curl $curl\n) {\n   $this->curl = $curl;\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"make-get-request-using-curl\"\n    }}>{`Make GET request using cURL`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`// get method\n$this->curl->get($url);\n\n// output of curl request\n$result = $this->curl->getBody();\n`}</code></pre>\n    <p>{`where `}<inlineCode parentName=\"p\">{`$url`}</inlineCode>{` is the endpoint URL.`}</p>\n    <h3 {...{\n      \"id\": \"make-post-request-using-curl\"\n    }}>{`Make POST request using cURL`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`// post method\n$this->curl->post($url, $params);\n\n// output of curl requestt\n$result = $this->curl->getBody();\n`}</code></pre>\n    <p>{`where  `}<inlineCode parentName=\"p\">{`$url`}</inlineCode>{` is the endpoint URL, `}<inlineCode parentName=\"p\">{`$params`}</inlineCode>{` is an array of data that is being sent via the POST request. Other parameters may be added in the URL directly.\nA `}<inlineCode parentName=\"p\">{`$params`}</inlineCode>{` example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$params = [\n  'user[email]' => $user->getEmail(),\n  'user[cellphone]' => $providerInfo['phone_number'],\n  'user[country_code]' => $providerInfo['country_code'],\n]\n`}</code></pre>\n    <p>{`The cURL client can also add headers, basic authorization, additional cURL options, and cookies in the cURL request. The cURL client provides these methods before using `}<inlineCode parentName=\"p\">{`get`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`post`}</inlineCode>{` method.`}</p>\n    <h3 {...{\n      \"id\": \"set-curl-header-using-addheader-method\"\n    }}>{`Set cURL header using addHeader method`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`addHeader`}</inlineCode>{` method accepts two parameters. The cURL header name and a cURL header value.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$this->curl->addHeader(\"Content-Type\", \"application/json\");\n$this->curl->addHeader(\"Content-Length\", 200);\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"set-curl-header-using-setheaders-method\"\n    }}>{`Set cURL header using setHeaders method`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`setHeaders`}</inlineCode>{` method accepts an array as a parameter.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$headers = [\"Content-Type\" => \"application/json\", \"Content-Length\" => \"200\"];\n$this->curl->setHeaders($headers);\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"set-basic-authorization-in-curl\"\n    }}>{`Set basic authorization in cURL`}</h3>\n    <p>{`Set the basic authorization using the `}<inlineCode parentName=\"p\">{`setCredentials`}</inlineCode>{` method.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$userName = \"User_Name\";\n$password = \"User_Password\";\n\n$this->curl->setCredentials($userName, $password);\n`}</code></pre>\n    <p>{`It is equivalent to setting CURLOPT_HTTPHEADER value:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`\"Authorization : \" . \"Basic \" . base64_encode($userName . \":\" . $password)\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"set-curl-option-using-setoption-method\"\n    }}>{`Set cURL option using setOption method`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`setOption`}</inlineCode>{` method accepts two parameters. The cURL option name and the cURL option value.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$this->curl->setOption(CURLOPT_RETURNTRANSFER, true);\n$this->curl->setOption(CURLOPT_PORT, 8080);\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"set-curl-option-using-setoptions-method\"\n    }}>{`Set cURL option using setOptions method`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`setOptions`}</inlineCode>{` method accepts an array as a parameter.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$options = [CURLOPT_RETURNTRANSFER => true, CURLOPT_PORT => 8080];\n\n$this->curl->setOptions($options);\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"set-curl-cookies-using-addcookie-method\"\n    }}>{`Set cURL cookies using addCookie method`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`addCookie`}</inlineCode>{` method accepts an array as a parameter. The cookie name and the cookie value.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$this->curl->addCookie(\"cookie-name\", \"cookie-value\");\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"set-curl-cookies-using-setcookies-method\"\n    }}>{`Set cURL cookies using setCookies method`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`setCookies`}</inlineCode>{` method accepts an array as a parameter.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$cookies = [\"cookie-name-1\" => \"cookie-value-1\", \"cookie-name-2\" => \"cookie-value-2\"];\n$this->curl->setCookies($cookies);\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"example-usage\"\n    }}>{`Example usage`}</h3>\n    <p>{`For example, the `}<inlineCode parentName=\"p\">{`Magento\\\\Marketplace\\\\Model\\\\Partners`}</inlineCode>{` class gets partners info using cURL from the api of Magento connect.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`namespace Magento\\\\Marketplace\\\\Model;\n\nuse Magento\\\\Framework\\\\HTTP\\\\Client\\\\Curl;\nuse Magento\\\\Marketplace\\\\Helper\\\\Cache;\nuse Magento\\\\Backend\\\\Model\\\\UrlInterface;\n\n/**\n * @api\n * @since 100.0.2\n */\nclass Partners\n{\n    /**\n     * @var Curl\n     */\n    protected $curlClient;\n\n    /**\n     * @var string\n     */\n    protected $urlPrefix = 'https://';\n\n    /**\n     * @var string\n     */\n    protected $apiUrl = 'magento.com/magento-connect/platinumpartners/list';\n\n    /**\n     * @var \\\\Magento\\\\Marketplace\\\\Helper\\\\Cache\n     */\n    protected $cache;\n\n    /**\n     * @var UrlInterface\n     */\n    private $backendUrl;\n\n    /**\n     * @param Curl $curl\n     * @param Cache $cache\n     * @param UrlInterface $backendUrl\n     */\n    public function __construct(Curl $curl, Cache $cache, UrlInterface $backendUrl)\n    {\n        $this->curlClient = $curl;\n        $this->cache = $cache;\n        $this->backendUrl = $backendUrl;\n    }\n\n    /**\n     * @return string\n     */\n    public function getApiUrl()\n    {\n        return $this->urlPrefix . $this->apiUrl;\n    }\n\n    /**\n     * Gets partners json\n     *\n     * @return array\n     */\n    public function getPartners()\n    {\n        $apiUrl = $this->getApiUrl();\n        try {\n            $this->getCurlClient()->post($apiUrl, []);\n            $this->getCurlClient()->setOptions(\n                [\n                    CURLOPT_REFERER => $this->getReferer()\n                ]\n            );\n            $response = json_decode($this->getCurlClient()->getBody(), true);\n            if ($response['partners']) {\n                $this->getCache()->savePartnersToCache($response['partners']);\n                return $response['partners'];\n            } else {\n                return $this->getCache()->loadPartnersFromCache();\n            }\n        } catch (\\\\Exception $e) {\n            return $this->getCache()->loadPartnersFromCache();\n        }\n    }\n\n    /**\n     * @return Curl\n     */\n    public function getCurlClient()\n    {\n        return $this->curlClient;\n    }\n\n    /**\n     * @return cache\n     */\n    public function getCache()\n    {\n        return $this->cache;\n    }\n\n    /**\n     * @return string\n     */\n    public function getReferer()\n    {\n        return \\\\Magento\\\\Framework\\\\App\\\\Request\\\\Http::getUrlNoScript($this->backendUrl->getBaseUrl())\n        . 'admin/marketplace/index/index';\n    }\n}\n`}</code></pre>\n    <p>{`First off all the cURL client instance is created in `}<inlineCode parentName=\"p\">{`__construct`}</inlineCode>{`.\nMethod `}<inlineCode parentName=\"p\">{`getPartners`}</inlineCode>{` uses the cURL client makes POST request using cURL, the `}<inlineCode parentName=\"p\">{`post`}</inlineCode>{` method takes the first parameter the URL to the api of `}<inlineCode parentName=\"p\">{`magento-connect`}</inlineCode>{`, second parameter is empty array, then the option `}<inlineCode parentName=\"p\">{`CURLOPT_REFERER`}</inlineCode>{` added by `}<inlineCode parentName=\"p\">{`setOptions`}</inlineCode>{` method of the cURL client.\nAs result the script call `}<inlineCode parentName=\"p\">{`getBody`}</inlineCode>{` method of the cURL client.`}</p>\n    <h4 {...{\n      \"id\": \"related-topics\"\n    }}>{`Related topics`}</h4>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"./gs-web-api-response.md\"\n      }}>{`Status codes and responses`}</a></p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}