{"version":3,"file":"987e9e88-9780ea6ecabae5db34ef.js","mappings":"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","sources":["webpack://commerce-webapi/./node_modules/@adobe/gatsby-theme-aio/src/components/GetCredential/CredentialForm.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { css } from '@emotion/react';\r\nimport classNames from 'classnames';\r\nimport '@spectrum-css/contextualhelp/dist/index-vars.css';\r\nimport { Toast } from '../Toast';\r\nimport { handleAllowedDomainsValidation, MAX_TABLET_SCREEN_WIDTH, MIN_MOBILE_WIDTH } from './FormFields';\r\nimport { SideComponent } from './SideComponent';\r\nimport { CredentialName } from './Form/CredentialName';\r\nimport { AllowedOrigins } from './Form/AllowedOrigins';\r\nimport { Downloads } from './Form/Downloads';\r\nimport { Download } from './Form/Download';\r\nimport { SideContent } from './Form/SideContent';\r\nimport { AdobeDeveloperConsole } from './Form/AdobeDeveloperConsole';\r\nimport { CreateCredential } from './Form/CreateCredential';\r\nimport { MyCredential } from './MyCredential';\r\nimport { Loading } from './Loading';\r\nimport { IllustratedMessage } from './IllustratedMessage';\r\nimport { Product, Products } from './Products';\r\nimport { Organization } from './Organization';\r\nimport GetCredentialContext from './GetCredentialContext';\r\n\r\nconst credentialNameRegex = /^(?=[A-Za-z0-9\\s]{6,}$)[A-Za-z0-9\\s]*$/;\r\n\r\nconst CredentialForm = ({\r\n  showCreateForm,\r\n  setShowCreateForm,\r\n  isCreateNewCredential,\r\n  setIsCreateNewCredential,\r\n  setIsPrevious,\r\n  formData,\r\n  setFormData\r\n}) => {\r\n  const { getCredentialData } = useContext(GetCredentialContext);\r\n  const formProps = getCredentialData;\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [isError, setIsError] = useState(false);\r\n  const [response, setResponse] = useState({});\r\n  const [errResp, setErrorResp] = useState('');\r\n  const [showCredential, setShowCredential] = useState(false);\r\n  const [formField, setFormField] = useState([]);\r\n  const [isValid, setIsValid] = useState(false);\r\n  const [isMyCredential, setIsMyCredential] = useState(false);\r\n  const [isShow, setIsShow] = useState(false);\r\n  const [alertShow, setAlertShow] = useState(false);\r\n\r\n  const [isAllowedOriginsValid, setIsAllowedOriginsValid] = useState();\r\n\r\n  const { selectedOrganization, template, previousProjectDetail } = useContext(GetCredentialContext);\r\n\r\n  const credentialForm = formProps?.[CredentialForm];\r\n  const isFormValue = credentialForm?.children?.filter(data =>\r\n    Object.keys(data.props).some(key => key.startsWith('contextHelp'))\r\n  );\r\n\r\n  const initialLoad = () => {\r\n    const fields = {};\r\n    const downloadObj = { label: 'Language', selectOptions: [] };\r\n    const productsObj = { label: 'products', productList: [] };\r\n\r\n    credentialForm?.children.forEach(({ type, props }) => {\r\n      if (type === Downloads && props?.children) {\r\n        downloadObj.required = props.required || false;\r\n        downloadObj.selectOptions.push(\r\n          ...[].concat(props.children).map(({ props: { title, href } }) => ({ title, href }))\r\n        );\r\n        setFormData(prevData => ({\r\n          ...prevData,\r\n          ...(Array.isArray(props.children) ? null : { Download: props.children?.props?.title }),\r\n        }));\r\n      }\r\n      if (type === Products && props?.children) {\r\n        productsObj.productList.push(\r\n          ...[].concat(props.children).map(({ props: { label, icon } }) => ({ label, icon }))\r\n        );\r\n      }\r\n      fields[type] = { ...props, required: type === CredentialName || props?.required };\r\n    });\r\n\r\n    if (downloadObj.selectOptions.length) {\r\n      fields[Download] = downloadObj;\r\n      if (downloadObj.selectOptions.length === 1) {\r\n        setFormData(prevData => ({\r\n          ...prevData,\r\n          Download: downloadObj.selectOptions[0]?.title,\r\n          zipUrl: downloadObj.selectOptions[0]?.href,\r\n        }));\r\n      }\r\n    }\r\n    if (productsObj?.productList.length) {\r\n      fields[Product] = productsObj;\r\n    }\r\n\r\n    const isCredential = previousProjectDetail?.count ? true : false;\r\n    if (isCredential) {\r\n      setIsMyCredential(true);\r\n    } else {\r\n      setIsMyCredential(false);\r\n    }\r\n\r\n    setFormField(fields);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (window.adobeIMS?.isSignedInUser()) {\r\n      setTimeout(() => {\r\n        setLoading(false);\r\n      }, 1000);\r\n    } else {\r\n      setLoading(true);\r\n    }\r\n  }, [window.adobeIMS?.isSignedInUser()]);\r\n\r\n  useEffect(() => {\r\n    if (showCreateForm) setIsError(false);\r\n  }, [showCreateForm]);\r\n\r\n\r\n  useEffect(() => {\r\n    initialLoad();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const isValidCredentialName = credentialNameRegex.test(formData.CredentialName);\r\n\r\n    const isCheckAllowedOrgins = credentialForm.children.some((child) => {\r\n      return child.type === AllowedOrigins;\r\n    })\r\n    let isAllowedOriginsValid;\r\n    if (isCheckAllowedOrgins) {\r\n      if (formData['AllowedOrigins']) {\r\n        isAllowedOriginsValid = handleAllowedDomainsValidation(formData['AllowedOrigins'])\r\n      }\r\n    }\r\n    else {\r\n      isAllowedOriginsValid = true;\r\n    }\r\n    setIsAllowedOriginsValid(isAllowedOriginsValid)\r\n\r\n    const isValid = isValidCredentialName && (!isCheckAllowedOrgins || isAllowedOriginsValid) && formData.Agree === true;\r\n    setIsValid(isValid);\r\n  }, [formData]);\r\n\r\n  const handleChange = (e, type) => {\r\n    let value;\r\n    if (type === 'Download') {\r\n      value = e.title;\r\n    }\r\n    else {\r\n      value = type === 'Downloads' || type === 'Agree' ? e.target.checked : e.target.value;\r\n    }\r\n\r\n    setFormData(prevData => ({ ...prevData, [type]: value }));\r\n    if (type === 'Downloads') {\r\n      handleChange(download?.selectOptions[0], 'Download')\r\n    }\r\n\r\n    if (type === 'Download') {\r\n      const selectedData = formField?.[Download]?.selectOptions.find(\r\n        data => data.title === value\r\n      );\r\n      selectedData && setFormData(prevData => ({ ...prevData, zipUrl: selectedData.href }));\r\n    }\r\n  };\r\n\r\n  const handleErrors = (detailedMessage) => {\r\n    setLoading(false);\r\n    setAlertShow(true);\r\n    setIsValid(false);\r\n    setErrorResp(detailedMessage);\r\n    setShowCreateForm(true);\r\n    setIsError(true);\r\n  }\r\n\r\n  const createCredential = async () => {\r\n    const token = window.adobeIMS?.getTokenFromStorage()?.token;\r\n\r\n    if (!token) {\r\n      console.log('User not logged in');\r\n    }\r\n\r\n    setLoading(true);\r\n    setShowCreateForm(false);\r\n\r\n    const apis = template.apis.map(api => ({\r\n      code: api.code,\r\n      credentialType: api.credentialType,\r\n      flowType: api.flowType,\r\n      licenseConfigs:\r\n        Array.isArray(api.licenseConfigs) && api.licenseConfigs.length > 0\r\n          ? [{ ...api.licenseConfigs[0], op: 'add' }]\r\n          : [],\r\n    }));\r\n\r\n    const data = {\r\n      projectName: formData['CredentialName'],\r\n      description: 'created for get credential',\r\n      metadata: {\r\n        domain: formData['AllowedOrigins'],\r\n      },\r\n      orgId: selectedOrganization.code,\r\n      apis,\r\n    };\r\n\r\n    try {\r\n      const url = `/templates/install/${template.id}`;\r\n      const response = await fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`,\r\n          'x-api-key': window?.adobeIMS?.adobeIdData?.client_id,\r\n          Accept: 'application/json',\r\n        },\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      const resResp = await response?.json();\r\n\r\n      if (response.ok) {\r\n        setResponse(resResp);\r\n        setShowCredential(true);\r\n        setAlertShow(true);\r\n        setLoading(false);\r\n      } else {\r\n        const jsonString = resResp.errors[0].message.match(/\\((\\{.*\\})\\)/)[1];\r\n        const errorDetails = JSON.parse(jsonString);\r\n        handleErrors(errorDetails.messages[0].message)\r\n      }\r\n    } catch (error) {\r\n      setShowCreateForm(true);\r\n      setLoading(false);\r\n      setAlertShow(true);\r\n      setErrorResp(error.message);\r\n      setIsError(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isMyCredential) {\r\n      setIsPrevious(true);\r\n      setShowCreateForm(true);\r\n    }\r\n  }, [isMyCredential]);\r\n\r\n  const sideObject = formField?.[SideComponent];\r\n  const credentialName = formField?.[CredentialName];\r\n  const allowedOrigins = formField?.[AllowedOrigins];\r\n  const downloads = formField?.[Downloads];\r\n  const download = formField?.[Download];\r\n  const products = formField?.[Products];\r\n  const product = formField?.[Product];\r\n  const adobeDeveloperConsole = formField?.[AdobeDeveloperConsole];\r\n\r\n  const handleRestart = () => {\r\n    setShowCreateForm(true);\r\n    setShowCredential(false);\r\n    setIsCreateNewCredential(true);\r\n    setIsMyCredential(true);\r\n    setFormData({});\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {showCreateForm && !loading && (\r\n        <div\r\n          className={classNames(credentialForm?.className)}\r\n          css={css`\r\n            display: flex;\r\n            flex-direction: column;\r\n            gap: 48px;\r\n          `}\r\n          data-cy=\"credential-form\"\r\n          >\r\n          <div\r\n            css={css`\r\n              display: flex;\r\n              flex-direction: column;\r\n              gap: 48px;\r\n              color: var(--spectrum-global-color-gray-800);\r\n              width: 100%;\r\n              height: 100%;\r\n              text-align: left;\r\n              @media screen and (min-width: ${MIN_MOBILE_WIDTH}) and (max-width: ${MAX_TABLET_SCREEN_WIDTH}) {\r\n                padding: 0;\r\n                width: 100%;\r\n              }\r\n            `}>\r\n            <div\r\n              css={css`\r\n                display: flex;\r\n                flex-direction: column;\r\n                gap: 16px;\r\n              `}>\r\n              {credentialForm?.title && (\r\n                <h3 className=\"spectrum-Heading spectrum-Heading--sizeL\">\r\n                  {credentialForm?.title}\r\n                </h3>\r\n              )}\r\n              {credentialForm?.paragraph && (\r\n                <p className=\"spectrum-Body spectrum-Body--sizeL\">{credentialForm?.paragraph}</p>\r\n              )}\r\n              <p\r\n                className=\"spectrum-Body spectrum-Body--sizeS\"\r\n                css={css`\r\n                  color: var(--spectrum-global-color-gray-800);\r\n                  display: inline-flex;\r\n                `}\r\n                onClick={() => setIsShow(true)}>\r\n                {selectedOrganization.type === \"developer\" ?\r\n                  \"You're creating this credential in your personal developer organization\" :\r\n                  <>You're creating this credential in [<b>{selectedOrganization?.name}</b>].</>}\r\n                <Organization isShow={isShow} setIsShow={setIsShow} />\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div\r\n            css={css`\r\n              display: flex;\r\n              gap: 35px;\r\n\r\n              @media screen and (min-width: ${MIN_MOBILE_WIDTH}) and (max-width: ${MAX_TABLET_SCREEN_WIDTH}) {\r\n                flex-direction: column;\r\n                padding-left: 0;\r\n              }\r\n            `}>\r\n            <div\r\n              css={css`\r\n                display: flex;\r\n                flex-direction: column;\r\n                gap: 35px;\r\n                width: 50%;\r\n\r\n                @media screen and (min-width: ${MIN_MOBILE_WIDTH}) and (max-width: ${MAX_TABLET_SCREEN_WIDTH}) {\r\n                  width: 100%;\r\n                }\r\n              `}>\r\n              <div\r\n                css={css`\r\n                  display: flex;\r\n                  gap: 32px;\r\n                  width: 100%;\r\n                  flex-direction: column;\r\n                `}>\r\n                {credentialName && (\r\n                  <CredentialName\r\n                    nameProps={credentialName}\r\n                    isFormValue={isFormValue}\r\n                    formData={formData}\r\n                    handleChange={handleChange}\r\n                  />\r\n                )}\r\n                {allowedOrigins && (\r\n                  <AllowedOrigins\r\n                    originsProps={allowedOrigins}\r\n                    isFormValue={isFormValue}\r\n                    formData={formData}\r\n                    handleChange={handleChange}\r\n                    isAllowedOriginsValid={isAllowedOriginsValid}\r\n                  />\r\n                )}\r\n                {downloads && download && (\r\n                  <Downloads\r\n                    downloadsProp={downloads}\r\n                    type=\"Downloads\"\r\n                    formData={formData}\r\n                    handleChange={handleChange}\r\n                  />\r\n                )}\r\n                {formData['Downloads'] && download && (\r\n                  <Download\r\n                    downloadProp={download}\r\n                    isFormValue={isFormValue}\r\n                    handleChange={handleChange}\r\n                  />\r\n                )}\r\n                <Products products={products} product={product} />\r\n                {adobeDeveloperConsole && (\r\n                  <AdobeDeveloperConsole\r\n                    formData={formData}\r\n                    adobeDeveloperConsole={adobeDeveloperConsole}\r\n                    handleChange={handleChange}\r\n                  />\r\n                )}\r\n                <CreateCredential\r\n                  createCredential={createCredential}\r\n                  isValid={isValid}\r\n                  setIsCreateNewCredential={setIsCreateNewCredential}\r\n                  isCreateNewCredential={isCreateNewCredential}\r\n                />\r\n              </div>\r\n            </div>\r\n            {sideObject ? (\r\n              <SideContent sideContent={sideObject?.children} SideComp={SideComponent} />\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      )}\r\n      {alertShow && (\r\n        <>\r\n          {\r\n            <Toast\r\n              customDisableFunction={setAlertShow}\r\n              message={\r\n                showCreateForm && !showCredential\r\n                  ? errResp\r\n                  : !isError && showCredential && `Your credentials were created successfully.`\r\n              }\r\n              variant={isError || (showCreateForm && !showCredential) ? 'error' : 'success'}\r\n              disable={5000}\r\n            />\r\n          }\r\n        </>\r\n      )}\r\n      {loading && !showCredential && !isError && !showCreateForm && (\r\n        <Loading\r\n          credentials={credentialForm}\r\n          isCreateCredential\r\n          downloadStatus={formData['Downloads']}\r\n        />\r\n      )}\r\n      {isError && !showCreateForm && !showCredential && (\r\n        <IllustratedMessage errorMessage={formProps?.[IllustratedMessage]} />\r\n      )}\r\n      {showCredential && !showCreateForm && (\r\n        <MyCredential\r\n          response={response}\r\n          formData={formData}\r\n          handleRestart={handleRestart}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport { CredentialForm };\r\n"],"names":["credentialNameRegex","CredentialForm","showCreateForm","setShowCreateForm","isCreateNewCredential","setIsCreateNewCredential","setIsPrevious","formData","setFormData","getCredentialData","useContext","GetCredentialContext","formProps","loading","setLoading","useState","isError","setIsError","response","setResponse","errResp","setErrorResp","showCredential","setShowCredential","formField","setFormField","isValid","setIsValid","isMyCredential","setIsMyCredential","isShow","setIsShow","alertShow","setAlertShow","isAllowedOriginsValid","setIsAllowedOriginsValid","selectedOrganization","template","previousProjectDetail","credentialForm","isFormValue","children","filter","data","Object","keys","props","some","key","startsWith","useEffect","window","adobeIMS","isSignedInUser","setTimeout","fields","downloadObj","label","selectOptions","productsObj","productList","forEach","type","Downloads","required","push","concat","map","title","href","prevData","Array","isArray","Download","Products","icon","CredentialName","length","zipUrl","Product","isCredential","count","initialLoad","isValidCredentialName","test","isCheckAllowedOrgins","child","AllowedOrigins","handleAllowedDomainsValidation","Agree","handleChange","e","value","target","checked","download","selectedData","find","sideObject","SideComponent","credentialName","allowedOrigins","downloads","products","product","adobeDeveloperConsole","AdobeDeveloperConsole","className","classNames","css","MIN_MOBILE_WIDTH","MAX_TABLET_SCREEN_WIDTH","paragraph","onClick","name","nameProps","originsProps","downloadsProp","downloadProp","createCredential","async","token","getTokenFromStorage","console","log","apis","api","code","credentialType","flowType","licenseConfigs","op","projectName","description","metadata","domain","orgId","url","id","fetch","method","headers","Authorization","adobeIdData","client_id","Accept","body","JSON","stringify","resResp","json","ok","jsonString","errors","message","match","errorDetails","parse","detailedMessage","messages","error","sideContent","SideComp","customDisableFunction","variant","disable","credentials","isCreateCredential","downloadStatus","errorMessage","IllustratedMessage","handleRestart"],"sourceRoot":""}