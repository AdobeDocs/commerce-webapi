{"version":3,"file":"component---src-pages-get-started-api-security-md-38be3e0bdcfa882cb5b5.js","mappings":"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","sources":["webpack://commerce-webapi/./src/pages/get-started/api-security.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/commerce-webapi/commerce-webapi/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"input-limiting\"\n    }}>{`Input limiting`}</h1>\n    <p>{`This topic describes best practices for `}<a parentName=\"p\" {...{\n        \"href\": \"https://owasp.org/www-project-api-security/\"\n      }}>{`API security`}</a>{`.`}</p>\n    <p>{`Imposing restrictions on the size and number of resources that a user can request through an API can help mitigate denial-of-service (DoS) vulnerabilities. By default, the following built-in API rate limiting is available:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`REST requests containing inputs that represent a list of entities. When enabled, the default maximum is 20 for synchronous requests and 5,000 for asynchronous requests.`}</li>\n      <li parentName=\"ul\">{`REST and GraphQL queries that allow paginated results can be limited to a maximum number of items per page. When enabled, the default maximum is 300.`}</li>\n      <li parentName=\"ul\">{`REST queries that allow paginated results can have a default number of items per page imposed. When enabled, the default maximum is 20.`}</li>\n    </ul>\n    <p>{`By default, these input limits are disabled, but you can use the following methods to enable them:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Set the values in the `}<a parentName=\"li\" {...{\n          \"href\": \"https://docs.magento.com/user-guide/configuration/services/magento-web-api.html\"\n        }}>{`Admin`}</a>{`.`}</li>\n      <li parentName=\"ul\">{`Run the `}<a parentName=\"li\" {...{\n          \"href\": \"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cli/configuration-management/set-configuration-values.html\"\n        }}><inlineCode parentName=\"a\">{`bin/magento config:set`}</inlineCode>{` command`}</a>{`.`}</li>\n      <li parentName=\"ul\">{`Add entries to the `}<a parentName=\"li\" {...{\n          \"href\": \"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/files/config-reference-configphp.html#system\"\n        }}><inlineCode parentName=\"a\">{`env.php`}</inlineCode>{` file`}</a>{`.`}</li>\n      <li parentName=\"ul\">{`Set `}<a parentName=\"li\" {...{\n          \"href\": \"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/deployment/examples/example-environment-variables.html\"\n        }}>{`environment variables`}</a>{`.`}</li>\n    </ul>\n    <p>{`When input limiting has been enabled, the system uses the default value for each limitation listed above. You can also configure custom values.`}</p>\n    <p>{`Although some simple examples for configuring these values from the CLI are provided below, all of the values can be `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cli/configuration-management/set-configuration-values.html\"\n      }}>{`configured per website and per store view`}</a>{` in addition to being configurable globally. In addition, these values can also be configured `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/files/config-reference-configphp.html#system\"\n      }}>{`via `}<inlineCode parentName=\"a\">{`env.php`}</inlineCode></a>{`\nas well as via `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/deployment/examples/example-environment-variables.html\"\n      }}>{`environment variables`}</a>{`.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`In addition, the Admin provides a configuration setting for limiting session sizes for Admin users and storefront visitors.`}</p>\n    <h2 {...{\n      \"id\": \"enable-the-input-limiting-system\"\n    }}>{`Enable the input limiting system`}</h2>\n    <p>{`To enable these input limiting features from the Admin, go to `}<strong parentName=\"p\">{`Stores`}</strong>{` > Settings > `}<strong parentName=\"p\">{`Configuration`}</strong>{` > `}<strong parentName=\"p\">{`Services`}</strong>{` > `}<strong parentName=\"p\">{`Web Api Limits`}</strong>{` or `}<strong parentName=\"p\">{`GraphQL Input Limits`}</strong>{` and set `}<strong parentName=\"p\">{`Enable Input Limits`}</strong>{` to `}<strong parentName=\"p\">{`Yes`}</strong>{`.`}</p>\n    <p>{`To enable with the CLI, run one or both of the following commands:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento config:set webapi/validation/input_limit_enabled 1\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento config:set graphql/validation/input_limit_enabled 1\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"maximum-parameter-inputs\"\n    }}>{`Maximum parameter inputs`}</h2>\n    <p>{`The `}<inlineCode parentName=\"p\">{`EntityArrayValidator`}</inlineCode>{` class constructor limits the number of objects that can be given to inputs that represent arrays of objects. For example, the `}<inlineCode parentName=\"p\">{`PUT /V1/guest-carts/{cartId}/collect-totals`}</inlineCode>{` endpoint contains the input parameter `}<inlineCode parentName=\"p\">{`additionalData->extension_attributes->gift_messages`}</inlineCode>{`, which represents a list of gift message information objects.`}</p>\n    <p>{`There are four possible input arrays:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`additional_data`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`agreement_ids`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`gift_messages`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`custom_attributes`}</inlineCode></li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"paymentMethod\": {\n    \"po_number\": \"string\",\n    \"method\": \"string\",\n    \"additional_data\": [\n      \"string\"\n    ],\n    \"extension_attributes\": {\n      \"agreement_ids\": [\n        \"string\"\n      ]\n    }\n  },\n  \"shippingCarrierCode\": \"string\",\n  \"shippingMethodCode\": \"string\",\n  \"additionalData\": {\n    \"extension_attributes\": {\n      \"gift_messages\": [\n        {\n          \"gift_message_id\": 0,\n          \"customer_id\": 0,\n          \"sender\": \"string\",\n          \"recipient\": \"string\",\n          \"message\": \"string\",\n          \"extension_attributes\": {\n            \"entity_id\": \"string\",\n            \"entity_type\": \"string\",\n            \"wrapping_id\": 0,\n            \"wrapping_allow_gift_receipt\": true,\n            \"wrapping_add_printed_card\": true\n          }\n        }\n      ]\n    },\n    \"custom_attributes\": [\n      {\n        \"attribute_code\": \"string\",\n        \"value\": \"string\"\n      }\n    ]\n  }\n}\n`}</code></pre>\n    <p>{`By default, any one of these arrays can include up to 20 items, but you can change this value in the configuration UI via `}<strong parentName=\"p\">{`Stores`}</strong>{` > Settings > `}<strong parentName=\"p\">{`Configuration`}</strong>{` > `}<strong parentName=\"p\">{`Services`}</strong>{` > `}<strong parentName=\"p\">{`Web API Input Limits`}</strong>{` > `}<strong parentName=\"p\">{`Input List Limit`}</strong>{` or via CLI using the `}<inlineCode parentName=\"p\">{`webapi/validation/complex_array_limit`}</inlineCode>{` configuration path.`}</p>\n    <h2 {...{\n      \"id\": \"input-limit-for-rest-endpoints\"\n    }}>{`Input limit for REST endpoints`}</h2>\n    <p>{`Some REST endpoints can contain a high number of elements, and developers need a way to set the limit for each endpoint. The limit for a specific REST endpoint can be set in the `}<inlineCode parentName=\"p\">{`webapi.xml`}</inlineCode>{` configuration file for synchronous requests and `}<inlineCode parentName=\"p\">{`webapi_async.xml`}</inlineCode>{` for asynchronous requests.\nTo do this, assign a value for the `}<inlineCode parentName=\"p\">{`<data input-array-size-limit/>`}</inlineCode>{` attribute within a `}<inlineCode parentName=\"p\">{`<route>`}</inlineCode>{` definition. The value for `}<inlineCode parentName=\"p\">{`input-array-size-limit`}</inlineCode>{` must be a non-negative integer.`}</p>\n    <p>{`The following example sets the input limit for the `}<inlineCode parentName=\"p\">{`/V1/some-custom-route`}</inlineCode>{` route.\nIf the route works synchronously, open the `}<inlineCode parentName=\"p\">{`<module_dir>/etc/webapi.xml`}</inlineCode>{` configuration file. Otherwise, open `}<inlineCode parentName=\"p\">{`<module_dir>/etc/webapi_async.xml`}</inlineCode>{`.\nAdd the `}<inlineCode parentName=\"p\">{`data`}</inlineCode>{` tag with the `}<inlineCode parentName=\"p\">{`input-array-size-limit`}</inlineCode>{` attribute to the route configuration.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<?xml version=\"1.0\"?>\n<!--\nSome custom module\n-->    \n<routes xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n        xsi:noNamespaceSchemaLocation=\"urn:magento:module:Magento_Webapi:etc/webapi.xsd\">\n    <route url=\"/V1/some-custom-route\" method=\"POST\">\n        <service class=\"Vendor\\\\Module\\\\Api\\\\EntityRepositoryInterface\" method=\"save\"/>\n        <resources>\n            <resource ref=\"Vendor_Entity::entities\" />\n        </resources>\n        <data input-array-size-limit=\"5\" /> <!--  limit only for route \\`/V1/some-custom-route\\`  -->\n    </route>\n</routes>\n`}</code></pre>\n    <p>{`Clear the configuration cache for the changes to take effect.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento cache:clean config\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"values-by-default-for-rest-endpoints\"\n    }}>{`Values by default for REST endpoints`}</h2>\n    <p>{`If you need to change the default limits for REST endpoints, then edit the `}<inlineCode parentName=\"p\">{`webapi`}</inlineCode>{` section of the `}<inlineCode parentName=\"p\">{`<magento_root>/app/etc/env.php`}</inlineCode>{` file as follows:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`[\n//...\n    'webapi' => [\n        'sync' => [\n            'default_input_array_size_limit' => <non-negative value>, //overrides values for synchronous REST endpoints\n        ],\n        'async' => [\n            'default_input_array_size_limit' => <non-negative value>, //overrides values for asynchronous REST endpoints\n        ],\n    ]\n//...\n];\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"maximum-page-size\"\n    }}>{`Maximum page size`}</h2>\n    <p>{`The maximum page size setting controls the pagination of various web API responses. By default, the maximum value is `}<inlineCode parentName=\"p\">{`300`}</inlineCode>{`. You can change the default in the Admin by selecting `}<strong parentName=\"p\">{`Stores`}</strong>{` > Settings > `}<strong parentName=\"p\">{`Configuration`}</strong>{` > `}<strong parentName=\"p\">{`Services`}</strong>{` > `}<strong parentName=\"p\">{`Web API Input Limits`}</strong>{` or `}<strong parentName=\"p\">{`GraphQl Input Limits`}</strong>{` >  `}<strong parentName=\"p\">{`Maximum Page Size`}</strong>{` field.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"../graphql/usage/security-configuration.md\"\n      }}>{`GraphQL security configuration`}</a>{` describes how to set the maximum page size in GraphQL.`}</p>\n    <h2 {...{\n      \"id\": \"default-page-size\"\n    }}>{`Default page size`}</h2>\n    <p>{`The Default Page Size setting controls the pagination of various web API responses. You can change the default value of `}<inlineCode parentName=\"p\">{`20`}</inlineCode>{` in the Admin by selecting `}<strong parentName=\"p\">{`Stores`}</strong>{` > Settings > `}<strong parentName=\"p\">{`Configuration`}</strong>{` > `}<strong parentName=\"p\">{`Services`}</strong>{` > `}<strong parentName=\"p\">{`Web API Input Limits`}</strong>{` > `}<strong parentName=\"p\">{`Default Page Size`}</strong>{`. To change the value from the CLI, run the following command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento config:set webapi/validation/default_page_size 30\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","InlineAlert","name","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","variant","slots","isMDXComponent"],"sourceRoot":""}