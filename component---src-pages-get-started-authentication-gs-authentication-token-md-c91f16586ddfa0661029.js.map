{"version":3,"file":"component---src-pages-get-started-authentication-gs-authentication-token-md-c91f16586ddfa0661029.js","mappings":"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","sources":["webpack://dev-site-documentation-template/./src/pages/get-started/authentication/gs-authentication-token.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-webapi/commerce-webapi/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"token-based-authentication\"\n    }}>{`Token-based authentication`}</h1>\n    <p>{`To make a web `}<a parentName=\"p\" {...{\n        \"href\": \"https://glossary.magento.com/api\"\n      }}>{`API`}</a>{` call from a client such as a mobile application, you must supply an `}<em parentName=\"p\">{`access token`}</em>{` on the call. The token acts like an electronic key that lets you access the API.`}</p>\n    <p>{`Adobe Commerce and Magento Open Source issue the following types of access tokens:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Token type`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Default lifetime`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Integration`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The merchant determines which Commerce resources the integration can access.`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Indefinite. It lasts until it is manually revoked.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Admin`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The merchant determines which Commerce resources an admin user has access to.`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`4 hours`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Customer`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Commerce grants access to resources with the `}<inlineCode parentName=\"td\">{`anonymous`}</inlineCode>{` or `}<inlineCode parentName=\"td\">{`self`}</inlineCode>{` permission. Merchants cannot edit these settings.`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`1 hour`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <h2 {...{\n      \"id\": \"integration-tokens\"\n    }}>{`Integration tokens`}</h2>\n    <p>{`When a merchant creates and activates an integration, Commerce generates a consumer key, consumer secret, access token, and access token secret. All of these entities are used for `}<a parentName=\"p\" {...{\n        \"href\": \"./gs-authentication-oauth.md\"\n      }}>{`OAuth-based authentication`}</a>{`.`}</p>\n    <p>{`In previous versions of Commerce, the access token could be used on its own for token-based authentication. This behavior has been disabled by default due to the security implications of a never-expiring access token. Namely, if the access token is compromised it provides undetected persistent access to a store.`}</p>\n    <p>{`However, while it is not recommended, this behavior can be restored in the Admin by setting the `}<strong parentName=\"p\">{`Stores`}</strong>{` > `}<strong parentName=\"p\">{`Configuration`}</strong>{` > `}<strong parentName=\"p\">{`Services`}</strong>{` > `}<strong parentName=\"p\">{`OAuth`}</strong>{` > `}<strong parentName=\"p\">{`Consumer Settings`}</strong>{` > `}<strong parentName=\"p\">{`Allow OAuth Access Tokens to be used as standalone Bearer tokens`}</strong>{` option to `}<strong parentName=\"p\">{`Yes`}</strong>{`. You can also enable this setting from the CLI by running the following command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento config:set oauth/consumer/enable_integration_as_bearer 1\n`}</code></pre>\n    <p>{`If you are trying to upgrade from a previous version and need to update your integration implementation to properly utilize the OAuth workflow, review `}<a parentName=\"p\" {...{\n        \"href\": \"./gs-authentication-oauth.md\"\n      }}>{`OAuth-based Authentication`}</a>{`. Otherwise, you can partially update your integration to simply store and utilize all four credentials to sign your requests.`}</p>\n    <p>{`There is a comprehensive guide for this on the OAuth-based authentication page, but can also be done in isolation without supporting the entire OAuth workflow. For example, in the following script the four credentials are used to create a new CMS page without using external libraries or implementing the full OAuth handshake.`}</p>\n    <p></p>\n    <details>\n      <summary><b>standalone-oauth.php </b></summary>\n      <pre><code parentName=\"pre\" {...{\n          \"className\": \"language-php\"\n        }}>{`<?php\nconst CONSUMER_KEY = '<placeholder>';\nconst CONSUMER_SECRET = '<placeholder>';\nconst ACCESS_TOKEN = '<placeholder>';\nconst ACCESS_TOKEN_SECRET = '<placeholder>';\n\nclass RequestDTO {\n    public function __construct(\n        public string $url,\n        public string $method = 'GET',\n        public ?string $body = null,\n        public array $headers = [],\n    ) {}\n}\nclass OAuthCredentialsDTO {\n    public function __construct(\n        public string $consumerKey,\n        public string $consumerSecret,\n        public string $accessToken,\n        public string $accessTokenSecret\n    ) {}\n}\n\nclass OAuthRequestSigner\n{\n    public function sign(\n        RequestDTO $request,\n        OAuthCredentialsDTO $credentials\n    ): string {\n        $urlParts = parse_url($request->url);\n        // Normalize the OAuth params for the base string\n        $normalizedHeaders = $request->headers;\n        sort($normalizedHeaders);\n        $oauthParams = [\n            'oauth_consumer_key' => $credentials->consumerKey,\n            'oauth_nonce' => base64_encode(random_bytes(32)),\n            'oauth_signature_method' => 'HMAC-SHA256',\n            'oauth_timestamp' => time(),\n            'oauth_token' => $credentials->accessToken\n        ];\n        // Create the base string\n        $signingUrl = $urlParts['scheme'] . '://' . $urlParts['host'] . $urlParts['path'];\n        $paramString = $this->createParamString($urlParts['query'] ?? null, $oauthParams);\n        $baseString = strtoupper($request->method) . '&' . rawurlencode($signingUrl) . '&' . rawurlencode($paramString);\n        // Create the signature\n        $signatureKey = $credentials->consumerSecret . '&' . $credentials->accessTokenSecret;\n        $signature = base64_encode(hash_hmac('sha256', $baseString, $signatureKey, true));\n        return $this->createOAuthHeader($oauthParams, $signature);\n    }\n    private function createParamString(?string $query, array $oauthParams): string\n    {\n        // Create the params string\n        $params = array_merge([], $oauthParams);\n        if (!empty($query)) {\n            foreach (explode('&', $query) as $paramToValue) {\n                $paramData = explode('=', $paramToValue);\n                if (count($paramData) === 2) {\n                    $params[rawurldecode($paramData[0])] = rawurldecode($paramData[1]);\n                }\n            }\n        }\n        ksort($params);\n        $paramString = '';\n        foreach ($params as $param => $value) {\n            $paramString .= rawurlencode($param) . '=' . rawurlencode($value) . '&';\n        }\n        return rtrim($paramString, '&');\n    }\n    private function createOAuthHeader(array $oauthParams, string $signature): string\n    {\n        // Create the OAuth header\n        $oauthHeader = \"Authorization: Oauth \";\n        foreach ($oauthParams as $param => $value) {\n            $oauthHeader .= \"$param=\\\\\"$value\\\\\",\";\n        }\n        return $oauthHeader . \"oauth_signature=\\\\\"$signature\\\\\"\";\n    }\n}\n\nfunction send(RequestDTO $request): string\n{\n    $ch = curl_init();\n    curl_setopt($ch, CURLOPT_URL, $request->url);\n    curl_setopt($ch, CURLOPT_HEADER, false);\n    curl_setopt($ch, CURLOPT_HTTPHEADER, $request->headers);\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, $request->method);\n    curl_setopt($ch, CURLOPT_POSTFIELDS, $request->body ?? '');\n    return (string)curl_exec($ch);\n}\n\n$oauthSigner = new OAuthRequestSigner();\n$request = new RequestDTO(\n    'https://example.com/rest/V1/cmsPage',\n    'POST',\n    '{\n          \"page\": {\n            \"identifier\": \"test-page\",\n            \"title\": \"my-page\",\n            \"content\": \"<h1>hello</h1>\",\n            \"active\": true\n          }\n        }',\n    ['Content-Type: application/json']\n);\n$request->headers[] = $oauthSigner->sign(\n    $request,\n    new OAuthCredentialsDTO(\n        CONSUMER_KEY,\n        CONSUMER_SECRET,\n        ACCESS_TOKEN,\n        ACCESS_TOKEN_SECRET\n    )\n);\necho send($request);\n`}</code></pre>\n    </details>\n    <h2 {...{\n      \"id\": \"admin-and-customer-access-tokens\"\n    }}>{`Admin and customer access tokens`}</h2>\n    <p>{`Commerce provides a separate token service for administrators and customers. When you request a token from one of these services, the service returns a unique access token in exchange for an account's username and password.`}</p>\n    <p>{`The web API framework allows `}<em parentName=\"p\">{`guest users`}</em>{` to access resources that are configured with the permission level of anonymous. Guest users are users who the framework cannot authenticate through existing authentication mechanisms. As a guest user, you do not need to, but you can, specify a token in a web API call for a resource with anonymous permission. `}<a parentName=\"p\" {...{\n        \"href\": \"https://devdocs.magento.com/guides/v2.4/rest/anonymous-api-security.html\"\n      }}>{`Restricting access to anonymous web APIs`}</a>{` contains a list of APIs that do not require a token.`}</p>\n    <p>{`The following table lists endpoints and services that can be used to get an authentication token. Admin accounts must be authenticated with a `}<a parentName=\"p\" {...{\n        \"href\": \"https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html\"\n      }}>{`two factor authentication`}</a>{` provider. Some providers may require multiple calls.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Token type`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`REST`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`SOAP`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Admin with Google Authenticator`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`POST /V1/tfa/provider/google/authenticate`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`twoFactorAuthGoogleAuthenticateV1`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Admin with Duo Security`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`POST /V1/tfa/provider/duo-security/authenticate`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`twoFactorAuthDuoAuthenticateV1`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Admin with Authy`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`POST /V1/tfa/provider/authy/authenticate`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`twoFactorAuthAuthyAuthenticateV1`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Admin with U2F`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`POST /V1/tfa/provider/u2fkey/verify`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`twoFactorAuthU2fKeyAuthenticateV1`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Customer`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`POST /V1/integration/customer/token`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`integrationCustomerTokenServiceV1`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`For most `}<a parentName=\"p\" {...{\n        \"href\": \"https://glossary.magento.com/web-api\"\n      }}>{`web API`}</a>{` calls, you supply this token in the `}<inlineCode parentName=\"p\">{`Authorization`}</inlineCode>{` request header with the `}<inlineCode parentName=\"p\">{`Bearer`}</inlineCode>{` HTTP `}<a parentName=\"p\" {...{\n        \"href\": \"https://glossary.magento.com/authorization\"\n      }}>{`authorization`}</a>{` scheme to prove your identity. By default, an admin token is valid for 4 hours, while a customer token is valid for 1 hour. You can change these values from Admin by selecting `}<strong parentName=\"p\">{`Stores`}</strong>{` > `}<strong parentName=\"p\">{`Settings`}</strong>{` > `}<strong parentName=\"p\">{`Configuration`}</strong>{` > `}<strong parentName=\"p\">{`Services`}</strong>{` > `}<strong parentName=\"p\">{`OAuth`}</strong>{` > `}<strong parentName=\"p\">{`Access Token Expiration`}</strong>{`.`}</p>\n    <p>{`A cron job that runs hourly removes all expired tokens.`}</p>\n    <h2 {...{\n      \"id\": \"request-a-token\"\n    }}>{`Request a token`}</h2>\n    <p>{`A access token request contains three basic elements:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Component`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Specifies`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Endpoint`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`A combination of the `}<em parentName=\"td\">{`server`}</em>{` that fulfills the request, the web service, and the `}<inlineCode parentName=\"td\">{`resource`}</inlineCode>{` against which the request is being made.`}<br /><br />{`For example, in the `}<inlineCode parentName=\"td\">{`POST <host>/rest/<store_code>/V1/integration/customer/token`}</inlineCode>{` endpoint:`}<br />{`The server is `}<inlineCode parentName=\"td\">{`magento.host/index.php/`}</inlineCode>{`,`}<br />{` the web service is `}<inlineCode parentName=\"td\">{`rest`}</inlineCode>{`.`}<br />{` and the resource is `}<inlineCode parentName=\"td\">{`/V1/integration/customer/token`}</inlineCode>{`.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Content type`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The content type of the request body. Set this value to either `}<inlineCode parentName=\"td\">{`\"Content-Type:application/json\"`}</inlineCode>{` or `}<inlineCode parentName=\"td\">{`\"Content-Type:application/xml\"`}</inlineCode>{`.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Credentials`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The username and password for a Commerce account.`}<br /><br />{`To specify these credentials in a JSON request body, include code similar to the following in the call: `}<br /><br /><inlineCode parentName=\"td\">{`{\"username\":\"<USER-NAME>;\", \"password\":\"<PASSWORD>\"}`}</inlineCode><br /><br />{`To specify these credentials in XML, include code similar to the following in the call:`}<br /><br /><inlineCode parentName=\"td\">{`<login><username>customer1</username><password>customer1pw</password></login>`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <h3 {...{\n      \"id\": \"examples\"\n    }}>{`Examples`}</h3>\n    <p>{`The following image shows a token request for the `}<a parentName=\"p\" {...{\n        \"href\": \"https://glossary.magento.com/admin\"\n      }}>{`admin`}</a>{` account using a REST client:`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1280px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"53.125%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/commerce-webapi/static/ae799da73e18e3727f6db2cf6d2d95d9/cb523/gs_auth_token1.webp 320w\", \"/commerce-webapi/static/ae799da73e18e3727f6db2cf6d2d95d9/797b9/gs_auth_token1.webp 640w\", \"/commerce-webapi/static/ae799da73e18e3727f6db2cf6d2d95d9/4b075/gs_auth_token1.webp 1280w\", \"/commerce-webapi/static/ae799da73e18e3727f6db2cf6d2d95d9/f3ff0/gs_auth_token1.webp 1920w\", \"/commerce-webapi/static/ae799da73e18e3727f6db2cf6d2d95d9/26244/gs_auth_token1.webp 1948w\"],\n            \"sizes\": \"(max-width: 1280px) 100vw, 1280px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/commerce-webapi/static/ae799da73e18e3727f6db2cf6d2d95d9/72799/gs_auth_token1.png 320w\", \"/commerce-webapi/static/ae799da73e18e3727f6db2cf6d2d95d9/6af66/gs_auth_token1.png 640w\", \"/commerce-webapi/static/ae799da73e18e3727f6db2cf6d2d95d9/21b4d/gs_auth_token1.png 1280w\", \"/commerce-webapi/static/ae799da73e18e3727f6db2cf6d2d95d9/29114/gs_auth_token1.png 1920w\", \"/commerce-webapi/static/ae799da73e18e3727f6db2cf6d2d95d9/6e52c/gs_auth_token1.png 1948w\"],\n            \"sizes\": \"(max-width: 1280px) 100vw, 1280px\",\n            \"type\": \"image/png\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/commerce-webapi/static/ae799da73e18e3727f6db2cf6d2d95d9/21b4d/gs_auth_token1.png\",\n            \"alt\": \"REST client\",\n            \"title\": \"REST client\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <p>{`The following example uses the `}<inlineCode parentName=\"p\">{`curl`}</inlineCode>{` command to request a token for a customer account:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X POST \"https://<host>/rest/default/V1/integration/customer/token\" \\\\\n     -H \"Content-Type:application/json\" \\\\\n     -d '{\"username\":\"customer@example.com\", \"password\":\"customer_password\"}'\n`}</code></pre>\n    <p>{`The following example makes the same request with `}<a parentName=\"p\" {...{\n        \"href\": \"https://glossary.magento.com/xml\"\n      }}>{`XML`}</a>{` for a customer account token:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X POST \"http://<host>/rest/default/V1/integration/customer/token\" \\\\\n     -H \"Content-Type:application/xml\"  \\\\\n     -d \"<login><username>customer1</username><password>customer1pw</password></login>\"\n`}</code></pre>\n    <p>{`For more information about the `}<inlineCode parentName=\"p\">{`curl`}</inlineCode>{` command, see `}<a parentName=\"p\" {...{\n        \"href\": \"../gs-curl.md\"\n      }}>{`Use cURL to run the request`}</a></p>\n    <h2 {...{\n      \"id\": \"authentication-token-response\"\n    }}>{`Authentication token response`}</h2>\n    <p>{`A successful request returns a response body with the token, as follows:`}</p>\n    <p><inlineCode parentName=\"p\">{`asdf3hjklp5iuytre`}</inlineCode></p>\n    <h2 {...{\n      \"id\": \"use-the-token-in-a-web-api-request\"\n    }}>{`Use the token in a Web API request`}</h2>\n    <p>{`Any web API call that accesses a resource that requires a permission level higher than anonymous must contain the authentication token in the header To do this, specify a HTTP header in the following format:`}</p>\n    <p><inlineCode parentName=\"p\">{`Authorization: Bearer <authentication token>`}</inlineCode></p>\n    <h3 {...{\n      \"id\": \"admin-access\"\n    }}>{`Admin access`}</h3>\n    <p>{`Admins can access any resources for which they are authorized.`}</p>\n    <p>{`For example, to make a web API call with an admin token:`}</p>\n    <p><inlineCode parentName=\"p\">{`curl -X GET \"http://<host>/rest/default/V1/customers/2\" -H \"Authorization: Bearer vbnf3hjklp5iuytre\"`}</inlineCode></p>\n    <h3 {...{\n      \"id\": \"customer-access\"\n    }}>{`Customer access`}</h3>\n    <p>{`Customers can access only resources with `}<inlineCode parentName=\"p\">{`self`}</inlineCode>{` permissions.`}</p>\n    <p>{`For example, to make a web API call with a customer token:\n`}<inlineCode parentName=\"p\">{`curl -X GET \"http://<host>/rest/default/V1/customers/me\" -H \"Authorization: Bearer asdf3hjklp5iuytre\"`}</inlineCode></p>\n    <h4 {...{\n      \"id\": \"related-topics\"\n    }}>{`Related topics`}</h4>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"../gs-web-api-request.md\"\n      }}>{`Construct a request`}</a></p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://developer.adobe.com/commerce/php/development/components/web-api/services/\"\n      }}>{`Configure services as web APIs`}</a></p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://devdocs.magento.com/guides/v2.4/rest/anonymous-api-security.html\"\n      }}>{`Restricting access to anonymous web APIs`}</a></p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}