{"version":3,"file":"component---src-pages-get-started-api-security-md-6f31ed41c49bbc8294ce.js","mappings":"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","sources":["webpack://dev-site-documentation-template/./src/pages/get-started/api-security.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-webapi/commerce-webapi/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`This topic describes best practices for `}<a parentName=\"p\" {...{\n        \"href\": \"https://owasp.org/www-project-api-security/\"\n      }}>{`API security`}</a>{`.`}</p>\n    <h1 {...{\n      \"id\": \"api-security\"\n    }}>{`API security`}</h1>\n    <h2 {...{\n      \"id\": \"input-limiting\"\n    }}>{`Input limiting`}</h2>\n    <p>{`Imposing restrictions on the size and number of resources that a user can request through an API can help mitigate denial-of-service (DoS) vulnerabilities. By default, the following built-in API rate limiting is available:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`REST requests containing inputs that represent a list of entities. When enabled, the default maximum is 20 for synchronous requests and 5,000 for asynchronous requests.`}</li>\n      <li parentName=\"ul\">{`REST and GraphQL queries that allow paginated results can be limited to a maximum number of items per page. When enabled, the default maximum is 300.`}</li>\n      <li parentName=\"ul\">{`REST queries that allow paginated results can have a default number of items per page imposed. When enabled, the default maximum is 20.`}</li>\n    </ul>\n    <p>{`By default, these input limits are disabled, but you can use the following methods to enable them:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Set the values in the `}<a parentName=\"li\" {...{\n          \"href\": \"https://docs.magento.com/user-guide/configuration/services/magento-web-api.html\"\n        }}>{`Admin`}</a>{`.`}</li>\n      <li parentName=\"ul\">{`Run the `}<a parentName=\"li\" {...{\n          \"href\": \"https://devdocs.magento.com/guides/v2.4/config-guide/cli/config-cli-subcommands-config-mgmt-set.html#config-cli-config-set\"\n        }}><inlineCode parentName=\"a\">{`bin/magento config:set`}</inlineCode>{` command`}</a>{`.`}</li>\n      <li parentName=\"ul\">{`Add entries to the `}<a parentName=\"li\" {...{\n          \"href\": \"https://devdocs.magento.com/guides/v2.4/config-guide/prod/config-reference-configphp.html#system\"\n        }}><inlineCode parentName=\"a\">{`env.php`}</inlineCode>{` file`}</a>{`.`}</li>\n      <li parentName=\"ul\">{`Set `}<a parentName=\"li\" {...{\n          \"href\": \"https://devdocs.magento.com/guides/v2.4/config-guide/deployment/pipeline/example/environment-variables.html\"\n        }}>{`environment variables`}</a>{`.`}</li>\n    </ul>\n    <p>{`When input limiting has been enabled, the system uses the default value for each limitation listed above. You can also configure custom values.`}</p>\n    <p>{`Although some simple examples for configuring these values from the CLI are provided below, all of the values can be `}<a parentName=\"p\" {...{\n        \"href\": \"https://devdocs.magento.com/guides/v2.4/config-guide/cli/config-cli-subcommands-config-mgmt-set.html#config-cli-config-set\"\n      }}>{`configured per website and per store view`}</a>{` in addition to being configurable globally. In addition, these values can also be configured `}<a parentName=\"p\" {...{\n        \"href\": \"https://devdocs.magento.com/guides/v2.4/config-guide/prod/config-reference-configphp.html#system\"\n      }}>{`via `}<inlineCode parentName=\"a\">{`env.php`}</inlineCode></a>{`\nas well as via `}<a parentName=\"p\" {...{\n        \"href\": \"https://devdocs.magento.com/guides/v2.4/config-guide/deployment/pipeline/example/environment-variables.html\"\n      }}>{`environment variables`}</a>{`.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`In addition, the Admin provides a configuration setting for limiting session sizes for Admin users and storefront visitors.`}</p>\n    <h3 {...{\n      \"id\": \"enable-the-input-limiting-system\"\n    }}>{`Enable the input limiting system`}</h3>\n    <p>{`To enable these input limiting features from the Admin, go to `}<strong parentName=\"p\">{`Stores`}</strong>{` > Settings > `}<strong parentName=\"p\">{`Configuration`}</strong>{` > `}<strong parentName=\"p\">{`Services`}</strong>{` > `}<strong parentName=\"p\">{`Web Api Limits`}</strong>{` or `}<strong parentName=\"p\">{`GraphQL Input Limits`}</strong>{` and set `}<strong parentName=\"p\">{`Enable Input Limits`}</strong>{` to `}<strong parentName=\"p\">{`Yes`}</strong>{`.`}</p>\n    <p>{`To enable with the CLI, run one or both of the following commands:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento config:set webapi/validation/input_limit_enabled 1\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento config:set graphql/validation/input_limit_enabled 1\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"maximum-parameter-inputs\"\n    }}>{`Maximum parameter inputs`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`EntityArrayValidator`}</inlineCode>{` class constructor limits the number of objects that can be given to inputs that represent arrays of objects. For example, the `}<inlineCode parentName=\"p\">{`PUT /V1/guest-carts/{cartId}/collect-totals`}</inlineCode>{` endpoint contains the input parameter `}<inlineCode parentName=\"p\">{`additionalData->extension_attributes->gift_messages`}</inlineCode>{`, which represents a list of gift message information objects.`}</p>\n    <p>{`There are four possible input arrays:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`additional_data`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`agreement_ids`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`gift_messages`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`custom_attributes`}</inlineCode></li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"paymentMethod\": {\n    \"po_number\": \"string\",\n    \"method\": \"string\",\n    \"additional_data\": [\n      \"string\"\n    ],\n    \"extension_attributes\": {\n      \"agreement_ids\": [\n        \"string\"\n      ]\n    }\n  },\n  \"shippingCarrierCode\": \"string\",\n  \"shippingMethodCode\": \"string\",\n  \"additionalData\": {\n    \"extension_attributes\": {\n      \"gift_messages\": [\n        {\n          \"gift_message_id\": 0,\n          \"customer_id\": 0,\n          \"sender\": \"string\",\n          \"recipient\": \"string\",\n          \"message\": \"string\",\n          \"extension_attributes\": {\n            \"entity_id\": \"string\",\n            \"entity_type\": \"string\",\n            \"wrapping_id\": 0,\n            \"wrapping_allow_gift_receipt\": true,\n            \"wrapping_add_printed_card\": true\n          }\n        }\n      ]\n    },\n    \"custom_attributes\": [\n      {\n        \"attribute_code\": \"string\",\n        \"value\": \"string\"\n      }\n    ]\n  }\n}\n`}</code></pre>\n    <p>{`By default, any one of these arrays can include up to 20 items, but you can change this value in the configuration UI via `}<strong parentName=\"p\">{`Stores`}</strong>{` > Settings > `}<strong parentName=\"p\">{`Configuration`}</strong>{` > `}<strong parentName=\"p\">{`Services`}</strong>{` > `}<strong parentName=\"p\">{`Web API Input Limits`}</strong>{` > `}<strong parentName=\"p\">{`Input List Limit`}</strong>{` or via CLI using the `}<inlineCode parentName=\"p\">{`webapi/validation/complex_array_limit`}</inlineCode>{` configuration path.`}</p>\n    <h3 {...{\n      \"id\": \"input-limit-for-rest-endpoints\"\n    }}>{`Input limit for REST endpoints`}</h3>\n    <p>{`Some REST endpoints can contain a high number of elements, and developers need a way to set the limit for each endpoint. The limit for a specific REST endpoint can be set in the `}<inlineCode parentName=\"p\">{`webapi.xml`}</inlineCode>{` configuration file for synchronous requests and `}<inlineCode parentName=\"p\">{`webapi_async.xml`}</inlineCode>{` for asynchronous requests.\nTo do this, assign a value for the `}<inlineCode parentName=\"p\">{`<data input-array-size-limit/>`}</inlineCode>{` attribute within a `}<inlineCode parentName=\"p\">{`<route>`}</inlineCode>{` definition. The value for `}<inlineCode parentName=\"p\">{`input-array-size-limit`}</inlineCode>{` must be a non-negative integer.`}</p>\n    <p>{`The following example sets the input limit for the `}<inlineCode parentName=\"p\">{`/V1/some-custom-route`}</inlineCode>{` route.\nIf the route works synchronously, open the `}<inlineCode parentName=\"p\">{`<module_dir>/etc/webapi.xml`}</inlineCode>{` configuration file. Otherwise, open `}<inlineCode parentName=\"p\">{`<module_dir>/etc/webapi_async.xml`}</inlineCode>{`.\nAdd the `}<inlineCode parentName=\"p\">{`data`}</inlineCode>{` tag with the `}<inlineCode parentName=\"p\">{`input-array-size-limit`}</inlineCode>{` attribute to the route configuration.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<?xml version=\"1.0\"?>\n<!--\nSome custom module\n--> \n<routes xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n        xsi:noNamespaceSchemaLocation=\"urn:magento:module:Magento_Webapi:etc/webapi.xsd\">\n    <route url=\"/V1/some-custom-route\" method=\"POST\">\n        <service class=\"Vendor\\\\Module\\\\Api\\\\EntityRepositoryInterface\" method=\"save\"/>\n        <resources>\n            <resource ref=\"Vendor_Entity::entities\" />\n        </resources>\n        <data input-array-size-limit=\"5\" /> <!--  limit only for route \\`/V1/some-custom-route\\`  -->\n    </route>\n</routes>\n`}</code></pre>\n    <p>{`Clear the configuration cache for the changes to take effect.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento cache:clear config\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"values-by-default-for-rest-endpoints\"\n    }}>{`Values by default for REST endpoints`}</h3>\n    <p>{`If you need to change the default limits for REST endpoints, then edit the `}<inlineCode parentName=\"p\">{`webapi`}</inlineCode>{` section of the `}<inlineCode parentName=\"p\">{`<magento_root>/app/etc/env.php`}</inlineCode>{` file as follows:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-conf\"\n      }}>{`[\n//...\n    'webapi' => [\n        'sync' => [\n            'default_input_array_size_limit' => <non-negative value>, //overrides values for synchronous REST endpoints\n        ],\n        'async' => [\n            'default_input_array_size_limit' => <non-negative value>, //overrides values for asynchronous REST endpoints\n        ],\n    ]\n//...\n];\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"maximum-page-size\"\n    }}>{`Maximum page size`}</h3>\n    <p>{`The maximum page size setting controls the pagination of various web API responses. By default, the maximum value is `}<inlineCode parentName=\"p\">{`300`}</inlineCode>{`. You can change the default in the Admin by selecting `}<strong parentName=\"p\">{`Stores`}</strong>{` > Settings > `}<strong parentName=\"p\">{`Configuration`}</strong>{` > `}<strong parentName=\"p\">{`Services`}</strong>{` > `}<strong parentName=\"p\">{`Web API Input Limits`}</strong>{` or `}<strong parentName=\"p\">{`GraphQl Input Limits`}</strong>{` >  `}<strong parentName=\"p\">{`Maximum Page Size`}</strong>{` field.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://devdocs.magento.com/guides/v2.4/graphql/security-configuration.html\"\n      }}>{`GraphQL security configuration`}</a>{` describes how to set the maximum page size in GraphQL.`}</p>\n    <h3 {...{\n      \"id\": \"default-page-size\"\n    }}>{`Default page size`}</h3>\n    <p>{`The Default Page Size setting controls the pagination of various web API responses. You can change the default value of `}<inlineCode parentName=\"p\">{`20`}</inlineCode>{` in the Admin by selecting `}<strong parentName=\"p\">{`Stores`}</strong>{` > Settings > `}<strong parentName=\"p\">{`Configuration`}</strong>{` > `}<strong parentName=\"p\">{`Services`}</strong>{` > `}<strong parentName=\"p\">{`Web API Input Limits`}</strong>{` > `}<strong parentName=\"p\">{`Default Page Size`}</strong>{`. To change the value from the CLI, run the following command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`bin/magento config:set webapi/validation/default_page_size 30\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["name","_frontmatter","InlineAlert","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","variant","slots","isMDXComponent"],"sourceRoot":""}