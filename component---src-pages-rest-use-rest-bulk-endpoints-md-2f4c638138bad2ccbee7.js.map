{"version":3,"file":"component---src-pages-rest-use-rest-bulk-endpoints-md-2f4c638138bad2ccbee7.js","mappings":"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","sources":["webpack://commerce-webapi/./src/pages/rest/use-rest/bulk-endpoints.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/commerce-webapi/commerce-webapi/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"bulk-endpoints\"\n    }}>{`Bulk endpoints`}</h1>\n    <p>{`Bulk API endpoints differ from other REST endpoints in that they combine multiple calls of the same type into an array and execute them as a single request. The endpoint handler splits the array into individual entities and writes them as separate messages to the message queue.`}</p>\n    <p>{`Cron jobs are the default mechanism for `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.adobe.com/en/docs/commerce-operations/configuration-guide/message-queues/manage-message-queues\"\n      }}>{`managing message queues`}</a>{` and starting message queue `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.adobe.com/en/docs/commerce-operations/configuration-guide/message-queues/consumers\"\n      }}>{`consumers`}</a>{`, but you can also use external process control systems (like `}<a parentName=\"p\" {...{\n        \"href\": \"https://supervisord.readthedocs.io/en/latest/\"\n      }}>{`Supervisor`}</a>{`) to monitor process management. You can use the `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cli/start-message-queues.html\"\n      }}><inlineCode parentName=\"a\">{`bin/magento queue:consumers:start async.operations.all`}</inlineCode></a>{` command to manually start the `}<inlineCode parentName=\"p\">{`async.operations.all`}</inlineCode>{` consumer that handles asynchronous and bulk API messages. However, manually starting consumers is not recommended because it requires you to keep your terminal session connected.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`Before using the Bulk API to process messages, you must install and configure RabbitMQ, which is the default message broker. See `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.adobe.com/en/docs/commerce-cloud-service/user-guide/configure/service/rabbitmq\"\n      }}>{`Setup RabbitMQ service`}</a>{` for cloud infrastructure projects and `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/prerequisites/rabbitmq.html\"\n      }}>{`Message broker`}</a>{` for on-premises projects.`}</p>\n    <h2 {...{\n      \"id\": \"routes\"\n    }}>{`Routes`}</h2>\n    <p>{`To call a bulk endpoint, add the prefix `}<inlineCode parentName=\"p\">{`/async/bulk`}</inlineCode>{` before the `}<inlineCode parentName=\"p\">{`/V1`}</inlineCode>{` of a synchronous endpoint route. For example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-http\"\n      }}>{`POST /async/bulk/V1/products\nPOST /async/bulk/V1/customers\n`}</code></pre>\n    <p>{`Endpoint routes that contain input parameters require additional changes. For example, `}<inlineCode parentName=\"p\">{`PUT /V1/products/:sku/media/:entryId`}</inlineCode>{` contains the `}<inlineCode parentName=\"p\">{`:sku`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`:entryId`}</inlineCode>{` input parameters. The route of a bulk request cannot contain input parameters, so you must change the route so that it does not contain any. To do this, replace the colon (`}<inlineCode parentName=\"p\">{`:`}</inlineCode>{`) with `}<inlineCode parentName=\"p\">{`by`}</inlineCode>{` and change the first letter of the parameter to uppercase.`}</p>\n    <p>{`The following table provides several examples:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Synchronous route`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Bulk route`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`PUT /V1/products/:sku/media/:entryId`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`PUT async/bulk/V1/products/bySku/media/byEntryId`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`POST /V1/carts/:quoteId/items`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`POST async/bulk/V1/carts/byQuoteId/items`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`GET requests are not supported.`}</p>\n    <h2 {...{\n      \"id\": \"payloads\"\n    }}>{`Payloads`}</h2>\n    <p>{`The payload of a bulk request contains an array of request bodies. For example, the minimal payload for creating four customers with `}<inlineCode parentName=\"p\">{`POST /async/bulk/V1/customers`}</inlineCode>{` would be structured as follows:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`[{\n    \"customer\": {\n        \"email\": \"mshaw@example.com\",\n        \"firstname\": \"Melanie Shaw\",\n        \"lastname\": \"Doe\"\n    },\n    \"password\": \"Strong-Password\"\n},\n{\n    \"customer\": {\n        \"email\": \"bmartin@example.com\",\n        \"firstname\": \"Bryce\",\n        \"lastname\": \"Martin\"\n    },\n    \"password\": \"Strong-Password\"\n},\n{\n    \"customer\": {\n        \"email\": \"bmartin@example.com\",\n        \"firstname\": \"Bryce\",\n        \"lastname\": \"Martin\"\n    },\n    \"password\": \"Strong-Password\"\n},\n{\n    \"customer\": {\n        \"email\": \"tgomez@example.com\",\n        \"firstname\": \"Teresa\",\n        \"lastname\": \"Gomez\"\n    },\n    \"password\": \"Strong-Password\"\n}\n]\n`}</code></pre>\n    <InlineAlert variant=\"success\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`The second and third requests are duplicates.`}</p>\n    <h2 {...{\n      \"id\": \"responses\"\n    }}>{`Responses`}</h2>\n    <p>{`The response contains an array that indicates whether the call successfully added each request to the message queue. Although the duplicated request to create a customer will fail, Commerce added it to the message queue successfully.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"bulk_uuid\": \"799a59c0-09ca-4d60-b432-2953986c1c38\",\n    \"request_items\": [\n        {\n            \"id\": 0,\n            \"data_hash\": \"3d3d853839dd442d0b99a1badea756a03f19ffb0fb7aab672c05f83d5a914181\",\n            \"status\": \"accepted\"\n        },\n        {\n            \"id\": 1,\n            \"data_hash\": \"bf8859d03545f0fa80084a47348a629cdf571fc064b952e7396c338d5cf3bf6e\",\n            \"status\": \"accepted\"\n        },\n        {\n            \"id\": 2,\n            \"data_hash\": \"876f3f2e4b226d54dcbf3f5ce752a9f748a45310261d2dd5cc7a7c9ef74b4369\",\n            \"status\": \"accepted\"\n        },\n        {\n            \"id\": 3,\n            \"data_hash\": \"9c1bd4bfd8defcc856ddf129cc01d172625d139d5f7dcf53b6cb09a0e9a843a3\",\n            \"status\": \"accepted\"\n        }\n    ],\n    \"errors\": false\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"delete-requests\"\n    }}>{`DELETE requests`}</h2>\n    <p>{`The following call asynchronously deletes CMS blocks with IDs `}<inlineCode parentName=\"p\">{`1`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`2`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-http\"\n      }}>{`DELETE <host>/rest/async/bulk/V1/cmsPage/byPageId\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"delete-request-payload\"\n    }}>{`DELETE request payload`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`[\n    {\n        \"pageId\": \"1\"\n    },\n    {\n        \"pageId\": \"2\"\n    }\n]\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"store-scopes\"\n    }}>{`Store scopes`}</h2>\n    <p>{`You can specify a store code (which is labeled in the Admin as store view code) in the route of an asynchronous endpoint so that it operates on a specific store, as shown below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-http\"\n      }}>{`POST /<store_code>/async/bulk/V1/products\nPUT /<store_code>/async/bulk/V1/products/bySku\n`}</code></pre>\n    <p>{`As a result, the asynchronous calls update the products on the specific store, instead of the default store.`}</p>\n    <p>{`You can specify the `}<inlineCode parentName=\"p\">{`all`}</inlineCode>{` store code to perform operations on all existing stores:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-http\"\n      }}>{`POST /all/async/bulk/V1/products\nPUT /all/async/bulk/V1/products/bySku\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"fallback-and-creatingupdating-objects-when-setting-store-scopes\"\n    }}>{`Fallback and creating/updating objects when setting store scopes`}</h2>\n    <p>{`The following rules apply when you create or update an object, such as a product.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`If you do not set the store code while creating a new product, Commerce creates a new object with all values set globally for each scope.`}</li>\n      <li parentName=\"ul\">{`If you do not set the store code while updating a product, then by fallback, Commerce updates values for the default store only.`}</li>\n      <li parentName=\"ul\">{`If you include the `}<inlineCode parentName=\"li\">{`all`}</inlineCode>{` parameter, then Commerce updates values for all store scopes (in case a particular store doesn't yet have its own value set).`}</li>\n      <li parentName=\"ul\">{`If `}<inlineCode parentName=\"li\">{`<store_code>`}</inlineCode>{` parameter is set, then values for only defined store will be updated.`}</li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","InlineAlert","name","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","variant","slots","isMDXComponent"],"sourceRoot":""}