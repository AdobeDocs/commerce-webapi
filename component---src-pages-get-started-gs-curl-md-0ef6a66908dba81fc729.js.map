{"version":3,"file":"component---src-pages-get-started-gs-curl-md-0ef6a66908dba81fc729.js","mappings":"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","sources":["webpack://commerce-webapi/./src/pages/get-started/gs-curl.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/commerce-webapi/commerce-webapi/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"using-curl-to-run-requests\"\n    }}>{`Using cURL to run requests`}</h1>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://curl.haxx.se/\"\n      }}>{`'cURL'`}</a>{` is a command-line tool that lets you transmit HTTP requests and receive responses from the command line or a shell script. It is available for Linux distributions, Mac OS X, and Windows.`}</p>\n    <p>{`To use cURL to run your REST web API call, use the cURL command syntax to construct the command.`}</p>\n    <p>{`To create the endpoint in the call, append the REST URI that you constructed in `}<a parentName=\"p\" {...{\n        \"href\": \"./gs-web-api-request.md\"\n      }}>{`Construct a request`}</a>{` to this URL:`}</p>\n    <p><inlineCode parentName=\"p\">{`https://<HOST_OR_IP>/<BASE_INSTALL_DIR>/rest/`}</inlineCode></p>\n    <p>{`To pass the customer data object in the POST call payload, specify a JSON or XML request body on the call.`}</p>\n    <p>{`For a complete list of cURL command options, see `}<a parentName=\"p\" {...{\n        \"href\": \"http://curl.haxx.se/docs/manpage.html\"\n      }}>{`curl.1 the man page`}</a>{`.`}</p>\n    <p>{`The cURL examples in this guide use the following command-line options:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Option`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`-d`}</inlineCode>{` `}<inlineCode parentName=\"td\">{`-data`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Sends the specified data in a POST request to the HTTP server. Use this option to send a JSON or XML request body to the server.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`-H`}</inlineCode>{` `}<inlineCode parentName=\"td\">{`-header`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Specifies an extra HTTP header in the request. Precede each header with the `}<inlineCode parentName=\"td\">{`-H`}</inlineCode>{` option. You can specify any number of extra headers. For a list of common headers used in web API requests, see `}<a parentName=\"td\" {...{\n              \"href\": \"./gs-web-api-request.md#http-headers\"\n            }}>{`HTTP headers`}</a></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`-i`}</inlineCode>{` `}<inlineCode parentName=\"td\">{`-input`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Includes the HTTP header in the output.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`-s`}</inlineCode>{` `}<inlineCode parentName=\"td\">{`-silent`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Specifies silent or quiet mode, which makes cURL mute. Progress and error messages are suppressed.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`-T`}</inlineCode>{` `}<inlineCode parentName=\"td\">{`-upload-file`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Transfers the specified local file to the remote URL.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`-X`}</inlineCode>{` `}<inlineCode parentName=\"td\">{`-request`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Specifies the request method to use when communicating with the HTTP server. The specified request method is used instead of the default GET method.`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <h2 {...{\n      \"id\": \"using-curl\"\n    }}>{`Using cUrl`}</h2>\n    <p>{`Adobe Commerce and Magento Open Source provide a service-wrapper for using cURL instead of using the default PHP cURL. The class `}<inlineCode parentName=\"p\">{`Magento\\\\Framework\\\\HTTP\\\\Client\\\\Curl`}</inlineCode>{` may be used to work with HTTP protocol using cURL library.\nFirst, create an instance of `}<inlineCode parentName=\"p\">{`Magento\\\\Framework\\\\HTTP\\\\Client\\\\Curl`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`/**\n* Constructor.\n*\n* @param Magento\\\\Framework\\\\HTTP\\\\Client\\\\Curl $curl\n*/\npublic function __construct(\n   Magento\\\\Framework\\\\HTTP\\\\Client\\\\Curl $curl\n) {\n   $this->curl = $curl;\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"make-get-request-using-curl\"\n    }}>{`Make GET request using cURL`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`// get method\n$this->curl->get($url);\n\n// output of curl request\n$result = $this->curl->getBody();\n`}</code></pre>\n    <p>{`where `}<inlineCode parentName=\"p\">{`$url`}</inlineCode>{` is the endpoint URL.`}</p>\n    <h3 {...{\n      \"id\": \"make-post-request-using-curl\"\n    }}>{`Make POST request using cURL`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`// post method\n$this->curl->post($url, $params);\n\n// output of curl requestt\n$result = $this->curl->getBody();\n`}</code></pre>\n    <p>{`where  `}<inlineCode parentName=\"p\">{`$url`}</inlineCode>{` is the endpoint URL, `}<inlineCode parentName=\"p\">{`$params`}</inlineCode>{` is an array of data that is being sent via the POST request. Other parameters may be added in the URL directly.\nA `}<inlineCode parentName=\"p\">{`$params`}</inlineCode>{` example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$params = [\n  'user[email]' => $user->getEmail(),\n  'user[cellphone]' => $providerInfo['phone_number'],\n  'user[country_code]' => $providerInfo['country_code'],\n]\n`}</code></pre>\n    <p>{`The cURL client can also add headers, basic authorization, additional cURL options, and cookies in the cURL request. The cURL client provides these methods before using `}<inlineCode parentName=\"p\">{`get`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`post`}</inlineCode>{` method.`}</p>\n    <h3 {...{\n      \"id\": \"set-curl-header-using-addheader-method\"\n    }}>{`Set cURL header using addHeader method`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`addHeader`}</inlineCode>{` method accepts two parameters. The cURL header name and a cURL header value.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$this->curl->addHeader(\"Content-Type\", \"application/json\");\n$this->curl->addHeader(\"Content-Length\", 200);\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"set-curl-header-using-setheaders-method\"\n    }}>{`Set cURL header using setHeaders method`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`setHeaders`}</inlineCode>{` method accepts an array as a parameter.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$headers = [\"Content-Type\" => \"application/json\", \"Content-Length\" => \"200\"];\n$this->curl->setHeaders($headers);\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"set-basic-authorization-in-curl\"\n    }}>{`Set basic authorization in cURL`}</h3>\n    <p>{`Set the basic authorization using the `}<inlineCode parentName=\"p\">{`setCredentials`}</inlineCode>{` method.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$userName = \"User_Name\";\n$password = \"User_Password\";\n\n$this->curl->setCredentials($userName, $password);\n`}</code></pre>\n    <p>{`It is equivalent to setting CURLOPT_HTTPHEADER value:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`\"Authorization : \" . \"Basic \" . base64_encode($userName . \":\" . $password)\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"set-curl-option-using-setoption-method\"\n    }}>{`Set cURL option using setOption method`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`setOption`}</inlineCode>{` method accepts two parameters. The cURL option name and the cURL option value.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$this->curl->setOption(CURLOPT_RETURNTRANSFER, true);\n$this->curl->setOption(CURLOPT_PORT, 8080);\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"set-curl-option-using-setoptions-method\"\n    }}>{`Set cURL option using setOptions method`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`setOptions`}</inlineCode>{` method accepts an array as a parameter.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$options = [CURLOPT_RETURNTRANSFER => true, CURLOPT_PORT => 8080];\n\n$this->curl->setOptions($options);\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"set-curl-cookies-using-addcookie-method\"\n    }}>{`Set cURL cookies using addCookie method`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`addCookie`}</inlineCode>{` method accepts an array as a parameter. The cookie name and the cookie value.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$this->curl->addCookie(\"cookie-name\", \"cookie-value\");\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"set-curl-cookies-using-setcookies-method\"\n    }}>{`Set cURL cookies using setCookies method`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`setCookies`}</inlineCode>{` method accepts an array as a parameter.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$cookies = [\"cookie-name-1\" => \"cookie-value-1\", \"cookie-name-2\" => \"cookie-value-2\"];\n$this->curl->setCookies($cookies);\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"example-usage\"\n    }}>{`Example usage`}</h3>\n    <p>{`For example, the `}<inlineCode parentName=\"p\">{`Magento\\\\Marketplace\\\\Model\\\\Partners`}</inlineCode>{` class gets partners info using cURL from the API of Magento connect.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`namespace Magento\\\\Marketplace\\\\Model;\n\nuse Magento\\\\Framework\\\\HTTP\\\\Client\\\\Curl;\nuse Magento\\\\Marketplace\\\\Helper\\\\Cache;\nuse Magento\\\\Backend\\\\Model\\\\UrlInterface;\n\n/**\n * @api\n * @since 100.0.2\n */\nclass Partners\n{\n    /**\n     * @var Curl\n     */\n    protected $curlClient;\n\n    /**\n     * @var string\n     */\n    protected $urlPrefix = 'https://';\n\n    /**\n     * @var string\n     */\n    protected $apiUrl = 'magento.com/magento-connect/platinumpartners/list';\n\n    /**\n     * @var \\\\Magento\\\\Marketplace\\\\Helper\\\\Cache\n     */\n    protected $cache;\n\n    /**\n     * @var UrlInterface\n     */\n    private $backendUrl;\n\n    /**\n     * @param Curl $curl\n     * @param Cache $cache\n     * @param UrlInterface $backendUrl\n     */\n    public function __construct(Curl $curl, Cache $cache, UrlInterface $backendUrl)\n    {\n        $this->curlClient = $curl;\n        $this->cache = $cache;\n        $this->backendUrl = $backendUrl;\n    }\n\n    /**\n     * @return string\n     */\n    public function getApiUrl()\n    {\n        return $this->urlPrefix . $this->apiUrl;\n    }\n\n    /**\n     * Gets partners json\n     *\n     * @return array\n     */\n    public function getPartners()\n    {\n        $apiUrl = $this->getApiUrl();\n        try {\n            $this->getCurlClient()->post($apiUrl, []);\n            $this->getCurlClient()->setOptions(\n                [\n                    CURLOPT_REFERER => $this->getReferer()\n                ]\n            );\n            $response = json_decode($this->getCurlClient()->getBody(), true);\n            if ($response['partners']) {\n                $this->getCache()->savePartnersToCache($response['partners']);\n                return $response['partners'];\n            } else {\n                return $this->getCache()->loadPartnersFromCache();\n            }\n        } catch (\\\\Exception $e) {\n            return $this->getCache()->loadPartnersFromCache();\n        }\n    }\n\n    /**\n     * @return Curl\n     */\n    public function getCurlClient()\n    {\n        return $this->curlClient;\n    }\n\n    /**\n     * @return cache\n     */\n    public function getCache()\n    {\n        return $this->cache;\n    }\n\n    /**\n     * @return string\n     */\n    public function getReferer()\n    {\n        return \\\\Magento\\\\Framework\\\\App\\\\Request\\\\Http::getUrlNoScript($this->backendUrl->getBaseUrl())\n        . 'admin/marketplace/index/index';\n    }\n}\n`}</code></pre>\n    <p>{`First off all the cURL client instance is created in `}<inlineCode parentName=\"p\">{`__construct`}</inlineCode>{`.\nMethod `}<inlineCode parentName=\"p\">{`getPartners`}</inlineCode>{` uses the cURL client makes POST request using cURL, the `}<inlineCode parentName=\"p\">{`post`}</inlineCode>{` method takes the first parameter the URL to the API of `}<inlineCode parentName=\"p\">{`magento-connect`}</inlineCode>{`, second parameter is empty array, then the option `}<inlineCode parentName=\"p\">{`CURLOPT_REFERER`}</inlineCode>{` added by `}<inlineCode parentName=\"p\">{`setOptions`}</inlineCode>{` method of the cURL client.\nAs result the script call `}<inlineCode parentName=\"p\">{`getBody`}</inlineCode>{` method of the cURL client.`}</p>\n    <h4 {...{\n      \"id\": \"related-topics\"\n    }}>{`Related topics`}</h4>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"./gs-web-api-response.md\"\n      }}>{`Status codes and responses`}</a></p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}