"use strict";(self.webpackChunkcommerce_webapi=self.webpackChunkcommerce_webapi||[]).push([[7327],{9043:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return s},default:function(){return g}});var a=t(87462),o=t(63366),i=(t(15007),t(64983)),r=t(91515),d=t(8673),l=["components"],s={},m=function(e){return function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.mdx)("div",n)}},p=m("CodeBlock"),u=m("InlineAlert"),c={_frontmatter:s},_=r.Z;function g(e){var n=e.components,t=(0,o.Z)(e,l);return(0,i.mdx)(_,(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"place-a-negotiable-quote-order"},"Place a negotiable quote order"),(0,i.mdx)("p",null,"This topic describes how REST calls can be used to place items in a shopping cart, initiate and complete the process of negotiating a quote, and reimbursing the buyer's credit upon receipt of payment."),(0,i.mdx)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"You have ",(0,i.mdx)("a",{parentName:"li",href:"https://experienceleague.adobe.com/docs/commerce-admin/b2b/install.html"},"installed and enabled")," ",(0,i.mdx)(d.sitedatavarb2b,null),"."),(0,i.mdx)("li",{parentName:"ul"},"You have ",(0,i.mdx)("a",{parentName:"li",href:"company-object.md"},"created a company"),"."),(0,i.mdx)("li",{parentName:"ul"},"You have an integration or ",(0,i.mdx)("a",{parentName:"li",href:"https://developer.adobe.com/commerce/webapi/rest/tutorials/orders/order-admin-token.html"},"admin authorization token")," to make calls on behalf of seller, and a ",(0,i.mdx)("a",{parentName:"li",href:"https://developer.adobe.com/commerce/webapi/rest/tutorials/orders/order-create-customer.html#get-token"},"customer token")," to make calls on behalf of the company user.")),(0,i.mdx)("h2",{id:"prepare-the-order"},"Prepare the order"),(0,i.mdx)("p",null,"The steps in this section are similar to those in the ",(0,i.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/commerce/webapi/rest/tutorials/orders/"},"Order processing tutorial"),", except that different products are added to the cart."),(0,i.mdx)("h3",{id:"create-a-shopping-cart"},"Create a shopping cart"),(0,i.mdx)("p",null,"In this example, the customer is a company user (buyer)."),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Endpoint:")),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"POST /V1/carts/mine")),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Headers:")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-terminal"},"Content-Type application/json\nAuthorization Bearer <customer token>\n")),(0,i.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,i.mdx)("h4",{id:"payload"},"payload"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},"// none\n")),(0,i.mdx)("h4",{id:"response"},"Response"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},"// The response is the `quoteId`: `5`\n")),(0,i.mdx)("h3",{id:"add-items"},"Add items"),(0,i.mdx)("p",null,"This example adds 15 Pursuit Lumaflex Tone Bands and 10 Harmony Lumaflex Strength Band Kits to the cart. You must make two calls to add these products."),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Endpoint:")),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"POST <host>/rest/default/V1/carts/mine")),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Headers:")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-terminal"},"Content-Type application/json\nAuthorization Bearer <customer token>\n")),(0,i.mdx)(p,{slots:"heading, code",repeat:"4",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,i.mdx)("h4",{id:"payload-1"},"Payload 1"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "cartItem": {\n    "sku": "24-UG02",\n    "qty": 15,\n    "quote_id": "5"\n  }\n}\n')),(0,i.mdx)("h4",{id:"response-1"},"Response 1"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "item_id": 12,\n    "sku": "24-UG02",\n    "qty": 15,\n    "name": "Pursuit Lumaflex&trade; Tone Band",\n    "price": 16,\n    "product_type": "simple",\n    "quote_id": "5"\n}\n')),(0,i.mdx)("h4",{id:"payload-2"},"Payload 2"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "cartItem": {\n    "sku": "24-UG03",\n    "qty": 10,\n    "quote_id": "5"\n  }\n}\n')),(0,i.mdx)("h4",{id:"response-2"},"Response 2"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "item_id": 13,\n    "sku": "24-UG03",\n    "qty": 10,\n    "name": "Harmony Lumaflex&trade; Strength Band Kit ",\n    "price": 22,\n    "product_type": "simple",\n    "quote_id": "5"\n}\n')),(0,i.mdx)("h3",{id:"set-the-shipping-address"},"Set the shipping address"),(0,i.mdx)("p",null,"You can determine shipping costs after initiating a negotiable quote, but doing it now provides a more detailed picture of the final costs to the buyer. If you want to defer setting the shipping address until after the negotiable quote has been created, use the ",(0,i.mdx)("inlineCode",{parentName:"p"},"/V1/negotiable-carts/:cartId/estimate-shipping-methods")," call."),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Endpoint:")),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"POST <host>/rest/default/V1/carts/mine/estimate-shipping-methods")),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Headers:")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-terminal"},"Content-Type application/json\nAuthorization Bearer <customer token>\n")),(0,i.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,i.mdx)("h4",{id:"payload-3"},"Payload"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{  "address": {\n      "region": "California",\n      "region_id": 12,\n      "region_code": "CA",\n      "country_id": "US",\n      "street": [\n        "100 Big Tree Avenue"\n        ],\n      "postcode": "99999",\n      "city": "San Francisco",\n      "firstname": "Melanie",\n      "lastname": "Shaw",\n      "customer_id": 2,\n      "email": "mshaw@example.com",\n      "telephone": "(415) 555-1212",\n      "same_as_billing": 1\n  }\n}\n')),(0,i.mdx)("h4",{id:"response-3"},"Response"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'[\n    {\n        "carrier_code": "flatrate",\n        "method_code": "flatrate",\n        "carrier_title": "Flat Rate",\n        "method_title": "Fixed",\n        "amount": 125,\n        "base_amount": 125,\n        "available": true,\n        "error_message": "",\n        "price_excl_tax": 125,\n        "price_incl_tax": 125\n    },\n    {\n        "carrier_code": "tablerate",\n        "method_code": "bestway",\n        "carrier_title": "Best Way",\n        "method_title": "Table Rate",\n        "amount": 5,\n        "base_amount": 5,\n        "available": true,\n        "error_message": "",\n        "price_excl_tax": 5,\n        "price_incl_tax": 5\n    }\n]\n')),(0,i.mdx)("h3",{id:"set-shipping-and-billing-information"},"Set shipping and billing information"),(0,i.mdx)("p",null,"You can also set shipping and billing information after initiating a negotiable quote by calling  ",(0,i.mdx)("inlineCode",{parentName:"p"},"POST /V1/negotiable-carts/:cartId/shipping-information"),"."),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Endpoint:")),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"POST /V1/carts/mine/shipping-information")),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Headers:")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-terminal"},"Content-Type application/json\nAuthorization Bearer <customer token>\n")),(0,i.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,i.mdx)("h4",{id:"payload-4"},"Payload"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n"addressInformation": {\n  "shipping_address": {\n    "region": "California",\n    "region_id": 12,\n    "region_code": "CA",\n    "country_id": "US",\n    "street": [\n      "100 Big Tree Avenue"\n    ],\n    "postcode": "99999",\n    "city": "San Francisco",\n    "firstname": "Melanie",\n    "lastname": "Shaw",\n    "email": "mshaw@example.com",\n    "telephone": "415-555-1212"\n  },\n  "billing_address": {\n   "region": "California",\n    "region_id": 12,\n    "region_code": "CA",\n    "country_id": "US",\n    "street": [\n      "100 Big Tree Avenue"\n    ],\n    "postcode": "99999",\n    "city": "San Francisco",\n    "firstname": "Melanie",\n    "lastname": "Shaw",\n    "email": "mshaw@example.com",\n    "telephone": "415-555-1212"\n  },\n  "shipping_carrier_code": "tablerate",\n  "shipping_method_code": "bestway"\n  }\n}\n')),(0,i.mdx)("h4",{id:"response-4"},"Response"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "payment_methods": [\n        {\n            "code": "checkmo",\n            "title": "Check / Money order"\n        },\n        {\n            "code": "companycredit",\n            "title": "Payment on Account"\n        }\n    ],\n    "totals": {\n        "grand_total": 373,\n        "base_grand_total": 373,\n        "subtotal": 460,\n        "base_subtotal": 460,\n        "discount_amount": -92,\n        "base_discount_amount": -92,\n        "subtotal_with_discount": 368,\n        "base_subtotal_with_discount": 368,\n        "shipping_amount": 5,\n        "base_shipping_amount": 5,\n        "shipping_discount_amount": 0,\n        "base_shipping_discount_amount": 0,\n        "tax_amount": 0,\n        "base_tax_amount": 0,\n        "weee_tax_applied_amount": null,\n        "shipping_tax_amount": 0,\n        "base_shipping_tax_amount": 0,\n        "subtotal_incl_tax": 460,\n        "shipping_incl_tax": 5,\n        "base_shipping_incl_tax": 5,\n        "base_currency_code": "USD",\n        "quote_currency_code": "USD",\n        "items_qty": 25,\n        "items": [\n            {\n                "item_id": 12,\n                "price": 16,\n                "base_price": 16,\n                "qty": 15,\n                "row_total": 240,\n                "base_row_total": 240,\n                "row_total_with_discount": 0,\n                "tax_amount": 0,\n                "base_tax_amount": 0,\n                "tax_percent": 0,\n                "discount_amount": 48,\n                "base_discount_amount": 48,\n                "discount_percent": 20,\n                "price_incl_tax": 16,\n                "base_price_incl_tax": 16,\n                "row_total_incl_tax": 240,\n                "base_row_total_incl_tax": 240,\n                "options": "[]",\n                "weee_tax_applied_amount": null,\n                "weee_tax_applied": null,\n                "name": "Pursuit Lumaflex&trade; Tone Band"\n            },\n            {\n                "item_id": 13,\n                "price": 22,\n                "base_price": 22,\n                "qty": 10,\n                "row_total": 220,\n                "base_row_total": 220,\n                "row_total_with_discount": 0,\n                "tax_amount": 0,\n                "base_tax_amount": 0,\n                "tax_percent": 0,\n                "discount_amount": 44,\n                "base_discount_amount": 44,\n                "discount_percent": 20,\n                "price_incl_tax": 22,\n                "base_price_incl_tax": 22,\n                "row_total_incl_tax": 220,\n                "base_row_total_incl_tax": 220,\n                "options": "[]",\n                "weee_tax_applied_amount": null,\n                "weee_tax_applied": null,\n                "name": "Harmony Lumaflex&trade; Strength Band Kit "\n            }\n        ],\n        "total_segments": [\n            {\n                "code": "subtotal",\n                "title": "Subtotal",\n                "value": 460\n            },\n            {\n                "code": "giftwrapping",\n                "title": "Gift Wrapping",\n                "value": null,\n                "extension_attributes": {\n                    "gw_item_ids": [],\n                    "gw_price": "0.0000",\n                    "gw_base_price": "0.0000",\n                    "gw_items_price": "0.0000",\n                    "gw_items_base_price": "0.0000",\n                    "gw_card_price": "0.0000",\n                    "gw_card_base_price": "0.0000"\n                }\n            },\n            {\n                "code": "shipping",\n                "title": "Shipping & Handling (Best Way - Table Rate)",\n                "value": 5\n            },\n            {\n                "code": "discount",\n                "title": "Discount",\n                "value": -92\n            },\n            {\n                "code": "tax",\n                "title": "Tax",\n                "value": 0,\n                "extension_attributes": {\n                    "tax_grandtotal_details": []\n                }\n            },\n            {\n                "code": "grand_total",\n                "title": "Grand Total",\n                "value": 373,\n                "area": "footer"\n            },\n            {\n                "code": "customerbalance",\n                "title": "Store Credit",\n                "value": 0\n            },\n            {\n                "code": "reward",\n                "title": "0 Reward points",\n                "value": 0\n            }\n        ],\n        "extension_attributes": {\n            "reward_points_balance": 0,\n            "reward_currency_amount": 0,\n            "base_reward_currency_amount": 0\n        }\n    }\n}\n')),(0,i.mdx)("h3",{id:"view-the-cart"},"View the cart"),(0,i.mdx)("p",null,"This is an optional step to show the status of the cart before you begin the negotiable quote process."),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Endpoint:")),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"GET /V1/carts/mine")),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Headers:")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-terminal"},"Content-Type application/json\nAuthorization Bearer <customer token>\n")),(0,i.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,i.mdx)("h4",{id:"payload-5"},"payload"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},"// none\n")),(0,i.mdx)("h4",{id:"response-5"},"Response"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "id": 5,\n    "created_at": "2017-09-14 21:14:15",\n    "updated_at": "2017-09-15 16:15:54",\n    "is_active": true,\n    "is_virtual": false,\n    "items": [\n        {\n            "item_id": 12,\n            "sku": "24-UG02",\n            "qty": 15,\n            "name": "Pursuit Lumaflex&trade; Tone Band",\n            "price": 16,\n            "product_type": "simple",\n            "quote_id": "5"\n        },\n        {\n            "item_id": 13,\n            "sku": "24-UG03",\n            "qty": 10,\n            "name": "Harmony Lumaflex&trade; Strength Band Kit ",\n            "price": 22,\n            "product_type": "simple",\n            "quote_id": "5"\n        }\n    ],\n    "items_count": 2,\n    "items_qty": 25,\n    "customer": {\n        "id": 2,\n        "group_id": 1,\n        "default_billing": "2",\n        "default_shipping": "2",\n        "created_at": "2017-09-11 17:55:52",\n        "updated_at": "2017-09-14 19:05:40",\n        "created_in": "Default Store View",\n        "email": "mshaw@example.com",\n        "firstname": "Melanie",\n        "lastname": "Shaw",\n        "gender": 3,\n        "store_id": 1,\n        "website_id": 1,\n        "addresses": [\n            {\n                "id": 2,\n                "customer_id": 2,\n                "region": {\n                    "region_code": "CA",\n                    "region": "California",\n                    "region_id": 12\n                },\n                "region_id": 12,\n                "country_id": "US",\n                "street": [\n                    "100 Big Tree Avenue"\n                ],\n                "telephone": "(415) 555-1212",\n                "postcode": "99999",\n                "city": "San Francisco",\n                "firstname": "Melanie",\n                "lastname": "Shaw",\n                "default_shipping": true,\n                "default_billing": true\n            }\n        ],\n        "disable_auto_group_change": 0,\n        "extension_attributes": {\n            "company_attributes": {\n                "customer_id": 2,\n                "company_id": 1,\n                "status": 1\n            }\n        }\n    },\n    "billing_address": {\n        "id": 12,\n        "region": "California",\n        "region_id": 12,\n        "region_code": "CA",\n        "country_id": "US",\n        "street": [\n            "100 Big Tree Avenue"\n        ],\n        "telephone": "415-555-1212",\n        "postcode": "99999",\n        "city": "San Francisco",\n        "firstname": "Melanie",\n        "lastname": "Shaw",\n        "customer_id": 2,\n        "email": "mshaw@example.com",\n        "same_as_billing": 0,\n        "save_in_address_book": 0\n    },\n    "orig_order_id": 0,\n    "currency": {\n        "global_currency_code": "USD",\n        "base_currency_code": "USD",\n        "store_currency_code": "USD",\n        "quote_currency_code": "USD",\n        "store_to_base_rate": 0,\n        "store_to_quote_rate": 0,\n        "base_to_global_rate": 1,\n        "base_to_quote_rate": 1\n    },\n    "customer_is_guest": false,\n    "customer_note_notify": true,\n    "customer_tax_class_id": 3,\n    "store_id": 1,\n    "extension_attributes": {\n        "shipping_assignments": [\n            {\n                "shipping": {\n                    "address": {\n                        "id": 13,\n                        "region": "California",\n                        "region_id": 12,\n                        "region_code": "CA",\n                        "country_id": "US",\n                        "street": [\n                            "100 Big Tree Avenue"\n                        ],\n                        "telephone": "415-555-1212",\n                        "postcode": "99999",\n                        "city": "San Francisco",\n                        "firstname": "Melanie",\n                        "lastname": "Shaw",\n                        "customer_id": 2,\n                        "email": "mshaw@example.com",\n                        "same_as_billing": 0,\n                        "save_in_address_book": 0\n                    },\n                    "method": "tablerate_bestway"\n                },\n                "items": [\n                    {\n                        "item_id": 12,\n                        "sku": "24-UG02",\n                        "qty": 15,\n                        "name": "Pursuit Lumaflex&trade; Tone Band",\n                        "price": 16,\n                        "product_type": "simple",\n                        "quote_id": "5"\n                    },\n                    {\n                        "item_id": 13,\n                        "sku": "24-UG03",\n                        "qty": 10,\n                        "name": "Harmony Lumaflex&trade; Strength Band Kit ",\n                        "price": 22,\n                        "product_type": "simple",\n                        "quote_id": "5"\n                    }\n                ]\n            }\n        ],\n        "negotiable_quote": {\n            "quote_id": null,\n            "is_regular_quote": null,\n            "status": null,\n            "negotiated_price_type": null,\n            "negotiated_price_value": null,\n            "shipping_price": null,\n            "quote_name": null,\n            "expiration_period": null,\n            "email_notification_status": null,\n            "has_unconfirmed_changes": null,\n            "is_shipping_tax_changed": null,\n            "is_customer_price_changed": null,\n            "notifications": null,\n            "applied_rule_ids": null,\n            "is_address_draft": null,\n            "deleted_sku": null,\n            "creator_id": null,\n            "creator_type": null\n        }\n    }\n}\n')),(0,i.mdx)("h2",{id:"complete-a-negotiable-quote"},"Complete a negotiable quote"),(0,i.mdx)("p",null,"In this example, the buyer requests a negotiable quote. The seller applies a discount to the quote and returns the quote to the buyer. The buyer accepts the discount and completes the order."),(0,i.mdx)(u,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,i.mdx)("p",null,"All negotiable quote calls require an admin authorization token."),(0,i.mdx)("h3",{id:"initiate-a-negotiable-quote"},"Initiate a negotiable quote"),(0,i.mdx)("p",null,"In this example, the buyer initiates a negotiable quote, asking for a 2.5% discount."),(0,i.mdx)("p",null,"Initiating a negotiable quote places it in the ",(0,i.mdx)("inlineCode",{parentName:"p"},"processing_by_admin")," state."),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Endpoint:")),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"POST <host>/rest/default/V1/negotiableQuote/request")),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Headers:")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-terminal"},"Content-Type application/json\nAuthorization Bearer <admin token>\n")),(0,i.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,i.mdx)("h4",{id:"payload-6"},"Payload"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "quoteId": 5,\n  "quoteName": "Discount request",\n  "comment": "Requesting a 2.5% discount"\n}\n')),(0,i.mdx)("h4",{id:"response-6"},"Response"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},"// `true`, indicating the request was successful\n")),(0,i.mdx)("h3",{id:"adjust-the-negotiable-quote"},"Adjust the negotiable quote"),(0,i.mdx)("p",null,"The seller accepts the buyer's request for a 2.5% discount. The ",(0,i.mdx)("inlineCode",{parentName:"p"},"negotiated_price_type")," value of ",(0,i.mdx)("inlineCode",{parentName:"p"},"1")," indicates a percentage discount."),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Headers:")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-terminal"},"Content-Type application/json\nAuthorization Bearer <admin token>\n")),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Endpoint:")),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"PUT /V1/negotiableQuote/5")),(0,i.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,i.mdx)("h4",{id:"payload-7"},"Payload"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "quote": {\n      "id": 5,\n      "extension_attributes": {\n        "negotiable_quote": {\n         "negotiated_price_type": 1,\n          "negotiated_price_value": 2.5\n        }\n      }\n    }\n}\n')),(0,i.mdx)("h4",{id:"response-7"},"Response"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},"// an empty array\n")),(0,i.mdx)("h3",{id:"return-the-negotiable-quote-to-the-buyer"},"Return the negotiable quote to the buyer"),(0,i.mdx)("p",null,"Now that the seller has updated the quote, it must be returned to the buyer. The buyer will then be able to either accept the offer and begin the checkout process, or request further negotiations."),(0,i.mdx)("p",null,"This call places the quote in the ",(0,i.mdx)("inlineCode",{parentName:"p"},"submitted_by_admin")," state."),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Headers:")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-terminal"},"Content-Type application/json\nAuthorization Bearer <admin token>\n")),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Endpoint:")),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"POST /V1/negotiableQuote/submitToCustomer")),(0,i.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,i.mdx)("h4",{id:"payload-8"},"Payload"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "quoteId": 5,\n  "comment": "We have applied a 2.5% discount to your order."\n}\n')),(0,i.mdx)("h4",{id:"response-8"},"Response"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},"// `true`, indicating the request was successful\n")),(0,i.mdx)("h3",{id:"get-the-quote-with-the-new-amounts"},"Get the quote with the new amounts"),(0,i.mdx)("p",null,"The price of each item has been reduced by 2.5 percent. In addition, the ",(0,i.mdx)("inlineCode",{parentName:"p"},"negotiable_quote")," section of the response has been updated."),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Headers:")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-terminal"},"Content-Type application/json\nAuthorization Bearer <admin token>\n")),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Endpoint:")),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"GET")," /V1/carts/5"),(0,i.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,i.mdx)("h4",{id:"payload-9"},"payload"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},"// none\n")),(0,i.mdx)("h4",{id:"response-9"},"Response"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "id": 4,\n    "created_at": "2017-09-14 20:30:38",\n    "updated_at": "2017-09-14 20:46:20",\n    "is_active": true,\n    "is_virtual": false,\n    "items": [\n        {\n            "item_id": 10,\n            "sku": "24-UG02",\n            "qty": 15,\n            "name": "Pursuit Lumaflex&trade; Tone Band",\n            "price": 12.48,\n            "product_type": "simple",\n            "quote_id": "4",\n            "extension_attributes": {\n                "negotiable_quote_item": {\n                    "item_id": 10,\n                    "original_price": 16,\n                    "original_tax_amount": 0,\n                    "original_discount_amount": 3.2\n                }\n            }\n        },\n        {\n            "item_id": 11,\n            "sku": "24-UG03",\n            "qty": 10,\n            "name": "Harmony Lumaflex&trade; Strength Band Kit ",\n            "price": 17.16,\n            "product_type": "simple",\n            "quote_id": "4",\n            "extension_attributes": {\n                "negotiable_quote_item": {\n                    "item_id": 11,\n                    "original_price": 22,\n                    "original_tax_amount": 0,\n                    "original_discount_amount": 4.4\n                }\n            }\n        }\n    ],\n    "items_count": 2,\n    "items_qty": 25,\n    "customer": {\n        "id": 2,\n        "group_id": 1,\n        "default_billing": "2",\n        "default_shipping": "2",\n        "created_at": "2017-09-11 17:55:52",\n        "updated_at": "2017-09-14 19:05:40",\n        "created_in": "Default Store View",\n        "email": "mshaw@example.com",\n        "firstname": "Melanie",\n        "lastname": "Shaw",\n        "gender": 3,\n        "store_id": 1,\n        "website_id": 1,\n        "addresses": [\n            {\n                "id": 2,\n                "customer_id": 2,\n                "region": {\n                    "region_code": "CA",\n                    "region": "California",\n                    "region_id": 12\n                },\n                "region_id": 12,\n                "country_id": "US",\n                "street": [\n                    "100 Big Tree Avenue"\n                ],\n                "telephone": "(415) 555-1212",\n                "postcode": "99999",\n                "city": "San Francisco",\n                "firstname": "Melanie",\n                "lastname": "Shaw",\n                "default_shipping": true,\n                "default_billing": true\n            }\n        ],\n        "disable_auto_group_change": 0,\n        "extension_attributes": {\n            "company_attributes": {\n                "customer_id": 2,\n                "company_id": 1,\n                "status": 1\n            }\n        }\n    },\n    "billing_address": {\n        "id": 7,\n        "region": null,\n        "region_id": null,\n        "region_code": null,\n        "country_id": null,\n        "street": [\n            ""\n        ],\n        "telephone": null,\n        "postcode": null,\n        "city": null,\n        "firstname": null,\n        "lastname": null,\n        "customer_id": 2,\n        "email": "mshaw@example.com",\n        "same_as_billing": 0,\n        "save_in_address_book": 0\n    },\n    "orig_order_id": 0,\n    "currency": {\n        "global_currency_code": "USD",\n        "base_currency_code": "USD",\n        "store_currency_code": "USD",\n        "quote_currency_code": "USD",\n        "store_to_base_rate": 0,\n        "store_to_quote_rate": 0,\n        "base_to_global_rate": 1,\n        "base_to_quote_rate": 1\n    },\n    "customer_is_guest": false,\n    "customer_note_notify": true,\n    "customer_tax_class_id": 3,\n    "store_id": 1,\n    "extension_attributes": {\n        "shipping_assignments": [\n            {\n                "shipping": {\n                    "address": {\n                        "id": 8,\n                        "region": null,\n                        "region_id": null,\n                        "region_code": null,\n                        "country_id": null,\n                        "street": [\n                            ""\n                        ],\n                        "telephone": null,\n                        "postcode": null,\n                        "city": null,\n                        "firstname": null,\n                        "lastname": null,\n                        "customer_id": 2,\n                        "email": "mshaw@example.com",\n                        "same_as_billing": 1,\n                        "save_in_address_book": 0\n                    },\n                    "method": null\n                },\n                "items": [\n                    {\n                        "item_id": 10,\n                        "sku": "24-UG02",\n                        "qty": 15,\n                        "name": "Pursuit Lumaflex&trade; Tone Band",\n                        "price": 12.48,\n                        "product_type": "simple",\n                        "quote_id": "4",\n                        "extension_attributes": {\n                            "negotiable_quote_item": {\n                                "item_id": 10,\n                                "original_price": 16,\n                                "original_tax_amount": 0,\n                                "original_discount_amount": 3.2\n                            }\n                        }\n                    },\n                    {\n                        "item_id": 11,\n                        "sku": "24-UG03",\n                        "qty": 10,\n                        "name": "Harmony Lumaflex&trade; Strength Band Kit ",\n                        "price": 17.16,\n                        "product_type": "simple",\n                        "quote_id": "4",\n                        "extension_attributes": {\n                            "negotiable_quote_item": {\n                                "item_id": 11,\n                                "original_price": 22,\n                                "original_tax_amount": 0,\n                                "original_discount_amount": 4.4\n                            }\n                        }\n                    }\n                ]\n            }\n        ],\n        "negotiable_quote": {\n            "quote_id": 4,\n            "is_regular_quote": true,\n            "status": "processing_by_admin",\n            "negotiated_price_type": 1,\n            "negotiated_price_value": 2.5,\n            "shipping_price": null,\n            "quote_name": "Discount request",\n            "expiration_period": null,\n            "email_notification_status": 0,\n            "has_unconfirmed_changes": false,\n            "is_shipping_tax_changed": false,\n            "is_customer_price_changed": false,\n            "notifications": null,\n            "applied_rule_ids": "2,3",\n            "is_address_draft": false,\n            "deleted_sku": null,\n            "creator_id": 1,\n            "creator_type": 2,\n            "original_total_price": 368,\n            "base_original_total_price": 368,\n            "negotiated_total_price": 358.8,\n            "base_negotiated_total_price": 358.8\n        }\n    }\n}\n')),(0,i.mdx)("h3",{id:"set-the-payment-information-and-place-the-order"},"Set the payment information and place the order"),(0,i.mdx)("p",null,"The buyer is now ready to complete the purchase. Since the buyer has already specified the billing address, only the ",(0,i.mdx)("inlineCode",{parentName:"p"},"paymentMethod")," information must be included."),(0,i.mdx)(u,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,i.mdx)("p",null,"The ",(0,i.mdx)("inlineCode",{parentName:"p"},"/V1/negotiable-carts/:cartId/payment-information")," endpoint runs asynchronously if the ",(0,i.mdx)("inlineCode",{parentName:"p"},"AsyncOrder")," module has been enabled. By default, the mutation runs synchronously. ",(0,i.mdx)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/commerce-operations/performance-best-practices/high-throughput-order-processing.html"},"Asynchronous order placement")," describes the benefits of enabling the module."),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Headers:")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-terminal"},"Content-Type application/json\nAuthorization Bearer <admin token>\n")),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Endpoint:")),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"/V1/negotiable-carts/3/payment-information")),(0,i.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,i.mdx)("h4",{id:"payload-10"},"Payload"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{  "paymentMethod": {\n    "po_number": "12345",\n    "method": "companycredit"\n  }\n}\n')),(0,i.mdx)("h4",{id:"response-10"},"Response"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},"// The response is the order `id`: `4`\n")),(0,i.mdx)("h2",{id:"reimburse-company-credit"},"Reimburse company credit"),(0,i.mdx)("p",null,"Now that the negotiable quote has been converted into an order, you can issue an invoice and create a shipment in the same manner as a standard B2C order. However, when the company pays for the order, the company's outstanding balance must be credited."),(0,i.mdx)("p",null,"In this example, the ",(0,i.mdx)("inlineCode",{parentName:"p"},"companyId")," is ",(0,i.mdx)("inlineCode",{parentName:"p"},"1"),"."),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Headers:")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-terminal"},"Content-Type application/json\nAuthorization Bearer <admin token>\n")),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Endpoint:")),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"POST /V1/companyCredits/1/increaseBalance")),(0,i.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,i.mdx)("h4",{id:"payload-11"},"Payload"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "value": 363.80,\n  "currency": "USD",\n  "operationType": 4,\n  "comment": "Order #3 reimbursed"\n}\n')),(0,i.mdx)("h4",{id:"response-11"},"Response"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-json"},"// `true`, indicating the reimbursement was successfully applied. Commerce sends an email to the buyer.\n")),(0,i.mdx)("h2",{id:"related-information"},"Related information"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("a",{parentName:"li",href:"../tutorials/orders/index.md"},"Order processing tutorial"))))}g.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-rest-b-2-b-negotiable-order-workflow-md-0b4cac34aa5f7507d2eb.js.map