"use strict";(self.webpackChunkcommerce_webapi=self.webpackChunkcommerce_webapi||[]).push([[4656],{84398:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return p},default:function(){return N}});var a,r=n(87462),d=n(63366),m=(n(15007),n(64983)),l=n(91515),i=n(96574),o=["components"],p={},u=(a="InlineAlert",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,m.mdx)("div",e)}),s={_frontmatter:p},x=l.Z;function N(e){var t=e.components,n=(0,d.Z)(e,o);return(0,m.mdx)(x,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,m.mdx)("h1",{id:"recommendations-query"},"recommendations query"),(0,m.mdx)("p",null,"The ",(0,m.mdx)("inlineCode",{parentName:"p"},"recommendations")," query returns information about product recommendation blocks for a given SKU."),(0,m.mdx)("p",null,"Merchants must have both Product Recommendations and Catalog Service (v2.2.0+) installed to get complete data through the storefront gateway."),(0,m.mdx)(u,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,m.mdx)("p",null,"The ",(0,m.mdx)("inlineCode",{parentName:"p"},"recommendations")," query does not support the ",(0,m.mdx)("inlineCode",{parentName:"p"},"alternateEnvironmentId")," attribute."),(0,m.mdx)("h2",{id:"required-headers"},"Required headers"),(0,m.mdx)("p",null,"You must specify the following HTTP headers to run this query."),(0,m.mdx)(i.Z,{mdxType:"Docs"}),(0,m.mdx)("h2",{id:"syntax"},"Syntax"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-graphql"},"recommendations(\n    currentSku: String,\n    userPurchaseHistory: [PurchaseHistory],\n    userViewHistory: [ViewHistory],\n    cartSkus: [String],\n    category: String,\n    pageType: PageType\n): Recommendations\n")),(0,m.mdx)("h2",{id:"example-usage"},"Example usage"),(0,m.mdx)("p",null,"The following query returns product recommendations for SKU ",(0,m.mdx)("inlineCode",{parentName:"p"},"MP01"),"."),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},"Request:")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-graphql"},'{\nrecommendations(currentSku: "MP01", pageType: Product) {\n    totalResults\n    results {\n        unitId\n        unitName\n        totalProducts\n        pageType\n        typeId\n        storefrontLabel\n        displayOrder\n        productsView {\n            sku\n            rank\n            score\n            queryType\n            categories\n            visibility\n        }\n    }\n}\n}\n')),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},"Response:")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-json"},'"data": {\n    "recommendations": {\n        "totalResults": 1,\n        "results": [\n            {\n                "unitId": "6401de2a-7499-4648-847c-b1d62f6ee947",\n                "unitName": "PDMLT",\n                "totalProducts": 5,\n                "pageType": "Product",\n                "typeId": "more-like-this",\n                "storefrontLabel": "PDMLT",\n                "displayOrder": 2,\n                "productsView": [\n                    {\n                        "sku": "MP08",\n                        "rank": 1,\n                        "score": 80.98603,\n                        "queryType": "primary",\n                        "categories": [\n                            "collections/yoga-new",\n                            "men/bottoms-men",\n                            "men/bottoms-men/pants-men",\n                            "promotions/pants-all",\n                            "sale"\n                        ],\n                        "visibility": "Catalog, Search"\n                    },\n                    {\n                        "sku": "WP05",\n                        "rank": 2,\n                        "score": 47.418564,\n                        "queryType": "primary",\n                        "categories": [\n                            "women/bottoms-women",\n                            "women/bottoms-women/pants-women",\n                            "promotions/pants-all",\n                            "collections/erin-recommends"\n                        ],\n                        "visibility": "Catalog, Search"\n                    },\n                    {\n                        "sku": "WP04",\n                        "rank": 3,\n                        "score": 46.906868,\n                        "queryType": "primary",\n                        "categories": [\n                            "women/bottoms-women",\n                            "women/bottoms-women/pants-women",\n                            "promotions/pants-all"\n                        ],\n                        "visibility": "Catalog, Search"\n                    },\n                    {\n                        "sku": "WP02",\n                        "rank": 4,\n                        "score": 44.674534,\n                        "queryType": "primary",\n                        "categories": [\n                            "women/bottoms-women",\n                            "women/bottoms-women/pants-women",\n                            "promotions/pants-all",\n                            "collections/performance-fabrics"\n                        ],\n                        "visibility": "Catalog, Search"\n                    },\n                    {\n                        "sku": "WP01",\n                        "rank": 5,\n                        "score": 41.731136,\n                        "queryType": "primary",\n                        "categories": [\n                            "women/bottoms-women",\n                            "women/bottoms-women/pants-women",\n                            "promotions/pants-all",\n                            "collections/performance-fabrics"\n                        ],\n                        "visibility": "Catalog, Search"\n                    }\n                ]\n            }\n        ]\n    }\n}\n')),(0,m.mdx)("h2",{id:"input-fields"},"Input fields"),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr",align:null},"Field"),(0,m.mdx)("th",{parentName:"tr",align:null},"Data type"),(0,m.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"cartSKUs")),(0,m.mdx)("td",{parentName:"tr",align:null},"[String]"),(0,m.mdx)("td",{parentName:"tr",align:null},"SKUs of the products in the cart.")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"category")),(0,m.mdx)("td",{parentName:"tr",align:null},"String"),(0,m.mdx)("td",{parentName:"tr",align:null},"The category currently being viewed.")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"currentSKU")),(0,m.mdx)("td",{parentName:"tr",align:null},"String"),(0,m.mdx)("td",{parentName:"tr",align:null},"SKU of the product currently being viewed on the product detail page.")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"pageType")),(0,m.mdx)("td",{parentName:"tr",align:null},"PageType"),(0,m.mdx)("td",{parentName:"tr",align:null},"An enum indicating the type of page on which recommendations are requested. Possible values are Cart, Category, Checkout, CMS, PageBuilder and Product.")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"userPurchaseHistory")),(0,m.mdx)("td",{parentName:"tr",align:null},"[PurchaseHistory]"),(0,m.mdx)("td",{parentName:"tr",align:null},"User purchase history with timestamp.")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"userViewHistory")),(0,m.mdx)("td",{parentName:"tr",align:null},"[ViewHistory]"),(0,m.mdx)("td",{parentName:"tr",align:null},"User view history with timestamp.")))),(0,m.mdx)("h3",{id:"purchasedhistory"},"PurchasedHistory"),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr",align:null},"Field"),(0,m.mdx)("th",{parentName:"tr",align:null},"Data type"),(0,m.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"date")),(0,m.mdx)("td",{parentName:"tr",align:null},"DateTime"),(0,m.mdx)("td",{parentName:"tr",align:null},"Date of purchase")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"items")),(0,m.mdx)("td",{parentName:"tr",align:null},"[String]","!"),(0,m.mdx)("td",{parentName:"tr",align:null},"A list of items purchased")))),(0,m.mdx)("h3",{id:"viewhistory"},"ViewHistory"),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr",align:null},"Field"),(0,m.mdx)("th",{parentName:"tr",align:null},"Data type"),(0,m.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"date")),(0,m.mdx)("td",{parentName:"tr",align:null},"DateTime"),(0,m.mdx)("td",{parentName:"tr",align:null},"The time the items were viewed")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"sku")),(0,m.mdx)("td",{parentName:"tr",align:null},"[String]","!"),(0,m.mdx)("td",{parentName:"tr",align:null},"A list of SKUs viewed")))),(0,m.mdx)("h2",{id:"output-fields"},"Output fields"),(0,m.mdx)("p",null,"The ",(0,m.mdx)("inlineCode",{parentName:"p"},"Recommendations")," object contains details about recommended products for a given SKU. It contains the following attributes."),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,m.mdx)("th",{parentName:"tr",align:null},"Data Type"),(0,m.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"results")),(0,m.mdx)("td",{parentName:"tr",align:null},"[RecommendationUnit]"),(0,m.mdx)("td",{parentName:"tr",align:null},"Array of recommendation units for recommended products")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"totalResults")),(0,m.mdx)("td",{parentName:"tr",align:null},"Int"),(0,m.mdx)("td",{parentName:"tr",align:null},"Total number of recommendation units for returned recommendation")))),(0,m.mdx)("h3",{id:"recommendationunit-attributes"},"RecommendationUnit attributes"),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,m.mdx)("th",{parentName:"tr",align:null},"Data Type"),(0,m.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"displayOrder")),(0,m.mdx)("td",{parentName:"tr",align:null},"Int"),(0,m.mdx)("td",{parentName:"tr",align:null},"Order in which recommendation units are displayed")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"pageType")),(0,m.mdx)("td",{parentName:"tr",align:null},"String"),(0,m.mdx)("td",{parentName:"tr",align:null},"Page Type")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"productsView")),(0,m.mdx)("td",{parentName:"tr",align:null},"[ProductView]"),(0,m.mdx)("td",{parentName:"tr",align:null},"List of product view")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"storefrontLabel")),(0,m.mdx)("td",{parentName:"tr",align:null},"String"),(0,m.mdx)("td",{parentName:"tr",align:null},"Storefront label to be displayed on the storefront")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"totalProducts")),(0,m.mdx)("td",{parentName:"tr",align:null},"Int"),(0,m.mdx)("td",{parentName:"tr",align:null},"Total number of products returned for a recommendation")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"typeId")),(0,m.mdx)("td",{parentName:"tr",align:null},"String"),(0,m.mdx)("td",{parentName:"tr",align:null},"Type of recommendation")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"unitId")),(0,m.mdx)("td",{parentName:"tr",align:null},"String"),(0,m.mdx)("td",{parentName:"tr",align:null},"Id of the preconfigured unit")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"unitName")),(0,m.mdx)("td",{parentName:"tr",align:null},"String"),(0,m.mdx)("td",{parentName:"tr",align:null},"Name of the preconfigured unit")))),(0,m.mdx)("h3",{id:"productview-interface"},"ProductView interface"),(0,m.mdx)("p",null,"The ",(0,m.mdx)("inlineCode",{parentName:"p"},"ProductView")," return object is an interface that can contain the following fields. It is implemented by the ",(0,m.mdx)("inlineCode",{parentName:"p"},"SimpleProductView")," and ",(0,m.mdx)("inlineCode",{parentName:"p"},"ComplexProductView")," types. Both these types contain the same set of fields as ",(0,m.mdx)("inlineCode",{parentName:"p"},"ProductView"),"."),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,m.mdx)("th",{parentName:"tr",align:null},"Data Type"),(0,m.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"categories")),(0,m.mdx)("td",{parentName:"tr",align:null},"[String]"),(0,m.mdx)("td",{parentName:"tr",align:null},"List of categories to which the product belongs")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"rank")),(0,m.mdx)("td",{parentName:"tr",align:null},"Int"),(0,m.mdx)("td",{parentName:"tr",align:null},"Rank given to a product")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"queryType")),(0,m.mdx)("td",{parentName:"tr",align:null},"String"),(0,m.mdx)("td",{parentName:"tr",align:null},"Indicates if the product was retrieved from the primary or backup query")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"score")),(0,m.mdx)("td",{parentName:"tr",align:null},"Float"),(0,m.mdx)("td",{parentName:"tr",align:null},"Score indicating relevance of the product to the recommendation type")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"sku")),(0,m.mdx)("td",{parentName:"tr",align:null},"String!"),(0,m.mdx)("td",{parentName:"tr",align:null},"The product SKU")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"visibility")),(0,m.mdx)("td",{parentName:"tr",align:null},"String"),(0,m.mdx)("td",{parentName:"tr",align:null},"Visibility setting of the product")))))}N.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-graphql-schema-product-recommendations-queries-recommendations-md-b3f7d411b91088491c3c.js.map