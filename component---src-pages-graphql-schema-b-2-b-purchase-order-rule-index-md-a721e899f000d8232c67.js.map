{"version":3,"file":"component---src-pages-graphql-schema-b-2-b-purchase-order-rule-index-md-a721e899f000d8232c67.js","mappings":"2MAOsBA,E,wEADTC,EAAe,CAAC,EAKvBC,GAJgBF,EAIY,cAJJ,SAA6BG,GAEzD,OADAC,QAAQC,KAAK,aAAeL,EAAO,4EAC5B,eAASG,EAClB,GAEMG,EAAc,CAClBL,aAAAA,GAEIM,EAAYC,EAAAA,EACH,SAASC,EAAW,GAGhC,IAFDC,EAAU,EAAVA,WACGP,GAAK,YAER,OAAO,SAACI,GAAS,UAAKD,EAAiBH,EAAK,CAAEO,WAAYA,EAAYC,QAAQ,eAG5E,eACE,GAAM,qCAAmC,wCAE3C,yTACA,sNACE,cAAGC,WAAW,IACZ,KAAQ,uCACP,uBAAYA,WAAW,KAAG,YAA0B,UAAc,mEACvE,0BAAW,cAAGA,WAAW,IACrB,KAAQ,oHAAkH,iCACpF,kBAAkB,eAAIA,WAAW,KAAG,gCAAsC,sEACpH,yDAA0C,uBAAYA,WAAW,KAAG,YAA0B,2DAC9F,SAACV,EAAW,CAACW,QAAQ,UAAUC,MAAM,OAAOH,QAAQ,iBACpD,mDAAoC,cAAGC,WAAW,IAC9C,KAAQ,iDAA+C,iCACjB,MAC1C,eACE,GAAM,mCAAiC,oCAEzC,0BAAW,uBAAYA,WAAW,KAAG,iCAA+C,mFAAmF,uBAAYA,WAAW,KAAG,aAA2B,0DAC5N,+FACA,mBAAG,mBAAQA,WAAW,KAAG,cACzB,qBAAK,iBAAMA,WAAW,MAClB,UAAa,oBAAkB,2OAkBnC,mBAAG,mBAAQA,WAAW,KAAG,eACzB,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBAAe,ikBA8BhC,eACE,GAAM,6BAA2B,8BAEnC,0BAAW,uBAAYA,WAAW,KAAG,gCAA8C,qMAAqM,cAAGA,WAAW,IAClS,KAAQ,4BACP,uBAAYA,WAAW,KAAG,gDAAiE,MAChG,wGACA,mBAAG,mBAAQA,WAAW,KAAG,cACzB,qBAAK,iBAAMA,WAAW,MAClB,UAAa,oBAAkB,klBAkCnC,mBAAG,mBAAQA,WAAW,KAAG,eACzB,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBAAe,osBAgChC,eACE,GAAM,iBAAe,kBAEvB,2JAA4I,mBAAQA,WAAW,KAAG,sBAAgC,qBAClM,qIACA,mBAAG,mBAAQA,WAAW,KAAG,cACzB,qBAAK,iBAAMA,WAAW,MAClB,UAAa,oBAAkB,uSAmBnC,mBAAG,mBAAQA,WAAW,KAAG,eACzB,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBAAe,g1BAiChC,eACE,GAAM,iCAA+B,kCAEvC,kGAAmF,cAAGA,WAAW,IAC7F,KAAQ,wIAAsI,wCACjG,MACjD,mBAAG,mBAAQA,WAAW,KAAG,cACzB,qBAAK,iBAAMA,WAAW,MAClB,UAAa,oBAAkB,wRAkBnC,mBAAG,mBAAQA,WAAW,KAAG,eACzB,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBAAe,08BAoDpC,CAEAH,EAAWM,gBAAiB,C","sources":["webpack://commerce-webapi/./src/pages/graphql/schema/b2b/purchase-order-rule/index.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/commerce-webapi/commerce-webapi/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"purchase-order-approval-rules-b2b\"\n    }}>{`Purchase order approval rules (B2B)`}</h1>\n    <p>{`In a typical implementation of purchase orders, a company admin or manager with sufficient permissions sets up approval rules that enforce company policies. These approval rules establish who the rule applies to, when the rule is triggered, and who must approve the affected purchase order.`}</p>\n    <p>{`Adobe Commerce provides multiple mutations that define and validate approval rules. However, there are no top-level queries to return lists of rules or purchase orders awaiting approval.\nThe `}<a parentName=\"p\" {...{\n        \"href\": \"../../customer/queries/customer.md\"\n      }}><inlineCode parentName=\"a\">{`customer`}</inlineCode>{` query`}</a>{` now returns details about purchase orders and approval rules.`}</p>\n    <p>{`The `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.adobe.com/docs/commerce-admin/b2b/purchase-orders/account-dashboard-approval-rules.html\"\n      }}>{`Purchase order approval rules`}</a>{` topic in the `}<em parentName=\"p\">{`B2B for Adobe Commerce Guide`}</em>{` provides additional information about setting up approval rules.`}</p>\n    <p>{`The following examples demonstrate `}<inlineCode parentName=\"p\">{`customer`}</inlineCode>{` queries that return information about approval rules.`}</p>\n    <InlineAlert variant=\"warning\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`All examples require a valid `}<a parentName=\"p\" {...{\n        \"href\": \"../../../customer/mutations/generate-token.md\"\n      }}>{`customer authentication token`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"return-a-list-of-approval-rules\"\n    }}>{`Return a list of approval rules`}</h2>\n    <p>{`The `}<inlineCode parentName=\"p\">{`purchase_order_approval_rules`}</inlineCode>{` query returns the list of purchase order approval rules. Use the value of the `}<inlineCode parentName=\"p\">{`items.uid`}</inlineCode>{` field to get details about a specific approval rule.`}</p>\n    <p>{`The following example returns the list of purchase order approval rules.`}</p>\n    <p><strong parentName=\"p\">{`Request:`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-graphql\"\n      }}>{`{\n  customer {\n    purchase_order_approval_rules {\n      items {\n        name\n        uid\n      }\n      page_info {\n        page_size\n        current_page\n        total_pages\n      }\n      total_count\n    }\n  }\n}\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Response:`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"data\": {\n    \"customer\": {\n      \"purchase_order_approval_rules\": {\n        \"items\": [\n          {\n            \"name\": \"Autoapprove order\",\n            \"uid\": \"OQ==\"\n          },\n          {\n            \"name\": \"Over 10 SKUs\",\n            \"uid\": \"Ng==\"\n          },\n          {\n            \"name\": \"Purchase order over $1000\",\n            \"uid\": \"NQ==\"\n          }\n        ],\n        \"page_info\": {\n          \"page_size\": 20,\n          \"current_page\": 1,\n          \"total_pages\": 1\n        },\n        \"total_count\": 3\n      }\n    }\n  }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"get-approval-rule-details\"\n    }}>{`Get approval rule details`}</h2>\n    <p>{`The `}<inlineCode parentName=\"p\">{`purchase_order_approval_rule`}</inlineCode>{` query returns information about the specified approval rule. To retrieve details about the amount or quantity required to trigger an approval rule, you must specify the implementations of the `}<a parentName=\"p\" {...{\n        \"href\": \"interfaces/condition.md\"\n      }}><inlineCode parentName=\"a\">{`PurchaseOrderApprovalRuleConditionInterface`}</inlineCode></a>{`.`}</p>\n    <p>{`The following example returns information about the purchase order approval rule.`}</p>\n    <p><strong parentName=\"p\">{`Request:`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-graphql\"\n      }}>{`{\n  customer {\n    purchase_order_approval_rule(uid: \"Ng==\") {\n      uid\n      name\n      description\n      status\n      created_at\n      updated_at\n      created_by\n      applies_to_roles {\n        name\n      }\n      approver_roles {\n        name\n      }\n      condition {\n        attribute\n        operator\n        ... on PurchaseOrderApprovalRuleConditionAmount {\n          amount {\n            value\n            currency\n          }\n        }\n        ... on PurchaseOrderApprovalRuleConditionQuantity {\n          quantity\n        }\n      }\n    }\n  }\n}\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Response:`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"data\": {\n    \"customer\": {\n      \"purchase_order_approval_rule\": {\n        \"uid\": \"Ng==\",\n        \"name\": \"Over 10 SKUs\",\n        \"description\": null,\n        \"status\": \"ENABLED\",\n        \"created_at\": \"2023-01-25 20:05:25\",\n        \"updated_at\": \"2023-01-25 20:05:25\",\n        \"created_by\": \"Melanie Shaw\",\n        \"applies_to_roles\": [\n          {\n            \"name\": \"Default User\"\n          }\n        ],\n        \"approver_roles\": [\n          {\n            \"name\": \"Manager\"\n          }\n        ],\n        \"condition\": {\n          \"attribute\": \"NUMBER_OF_SKUS\",\n          \"operator\": \"MORE_THAN_OR_EQUAL_TO\",\n          \"quantity\": 10\n        }\n      }\n    }\n  }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"approval-flow\"\n    }}>{`Approval flow`}</h2>\n    <p>{`Company users that are enabled to create or review purchase orders and are designated as an approver can view purchase orders in the `}<strong parentName=\"p\">{`My Purchase Orders`}</strong>{` dashboard page.`}</p>\n    <p>{`The following example returns the approval history of purchase orders made by the company user's subordinates.`}</p>\n    <p><strong parentName=\"p\">{`Request:`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-graphql\"\n      }}>{`{\n  customer {\n    purchase_orders(filter: { company_purchase_orders: true }) {\n      items {\n        approval_flow {\n          rule_name\n          events {\n            name\n            role\n            status\n            message\n          }\n        }\n      }\n    }\n  }\n}\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Response:`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"data\": {\n    \"customer\": {\n      \"purchase_orders\": {\n        \"items\": [\n          {\n            \"approval_flow\": [\n              {\n                \"rule_name\": \"Rule 1\",\n                \"events\": [\n                  {\n                    \"name\": \"Unknown Customer\",\n                    \"role\": \"Company Administrator\",\n                    \"status\": \"PENDING\",\n                    \"message\": \"Pending Approval from Company Administrator\"\n                  },\n                  {\n                    \"name\": \"Unknown Customer\",\n                    \"role\": \"Purchaser's Manager\",\n                    \"status\": \"PENDING\",\n                    \"message\": \"Pending Approval from Purchaser's Manager\"\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    }\n  }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"return-approval-rule-metadata\"\n    }}>{`Return approval rule metadata`}</h2>\n    <p>{`The following example returns the metadata necessary to render the form for `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.adobe.com/docs/commerce-admin/b2b/purchase-orders/account-dashboard-approval-rules.html#approval-rule-setup\"\n      }}>{`creating or editing an approval rule`}</a>{`.`}</p>\n    <p><strong parentName=\"p\">{`Request:`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-graphql\"\n      }}>{`{\n  customer {\n    purchase_order_approval_rule_metadata {\n      available_applies_to {\n        name\n      }\n      available_condition_currencies {\n        code\n        symbol\n      }\n      available_requires_approval_from {\n        name\n      }\n    }\n  }\n}\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Response:`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"data\": {\n    \"customer\": {\n      \"purchase_order_approval_rule_metadata\": {\n        \"available_applies_to\": [\n          {\n            \"name\": \"Default User\"\n          },\n          {\n            \"name\": \"Manager\"\n          },\n          {\n            \"name\": \"Director\"\n          },\n          {\n            \"name\": \"Admin\"\n          }\n        ],\n        \"available_condition_currencies\": [\n          {\n            \"code\": \"USD\",\n            \"symbol\": \"$\"\n          }\n        ],\n        \"available_requires_approval_from\": [\n          {\n            \"name\": \"Company Administrator\"\n          },\n          {\n            \"name\": \"Purchaser's Manager\"\n          },\n          {\n            \"name\": \"Default User\"\n          },\n          {\n            \"name\": \"Manager\"\n          },\n          {\n            \"name\": \"Director\"\n          },\n          {\n            \"name\": \"Admin\"\n          }\n        ]\n      }\n    }\n  }\n}\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["name","_frontmatter","InlineAlert","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","variant","slots","isMDXComponent"],"sourceRoot":""}