{"version":3,"file":"component---src-pages-graphql-develop-create-custom-url-resolver-md-cc0cf78d6163ea3a1bf6.js","mappings":"0RAMaA,EAAe,CAAC,EACvBC,EAAc,CAClBD,gBAEIE,EAAYC,EAAAA,EACH,SAASC,EAAW,GAGhC,IAHgC,WACjCC,GAED,EADIC,GAAK,YAER,OAAO,SAACJ,GAAS,UAAKD,EAAiBK,EAAK,CAAED,WAAYA,EAAYE,QAAQ,eAG5E,eACE,GAAM,+CACH,gDACL,kBAAK,QAAM,uBAAYC,WAAW,KAAM,uBAAoC,sFAAoF,uBAAYA,WAAW,KAAM,eAA4B,+HAA6H,uBAAYA,WAAW,KAAM,eAA4B,YAC/Y,eACE,GAAM,oBACH,qBACL,kBAAK,oBAAkB,uBAAYA,WAAW,KAAM,qEAAkF,gFAA8E,uBAAYA,WAAW,KAAM,mCAAgD,qCACjS,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBACV,klBAqBP,kBAAK,QAAM,cAAGA,WAAW,IACrB,KAAQ,yFACL,wBAA4B,sDACnC,eACE,GAAM,+BACH,gCACL,kBAAK,eAAa,uBAAYA,WAAW,KAAM,eAA4B,SAAO,uBAAYA,WAAW,KAAM,cAA2B,2BAAyB,uBAAYA,WAAW,KAAM,OAAoB,gDAA8C,uBAAYA,WAAW,KAAM,eAA4B,cAC3T,oBACE,eAAIA,WAAW,OACb,cAAGA,WAAW,MAAO,wDAAsD,uBAAYA,WAAW,KAAM,eAA4B,yCAAuC,uBAAYA,WAAW,KAAM,qBAAkC,oBAAkB,uBAAYA,WAAW,KAAM,4BAAyC,MAClU,gBAAKA,WAAW,OAAK,iBAAMA,WAAW,MAClC,UAAa,gBACV,4RAOT,eAAIA,WAAW,OACb,cAAGA,WAAW,MAAO,gEAA8D,uBAAYA,WAAW,KAAM,cAA2B,WAC3I,gBAAKA,WAAW,OAAK,iBAAMA,WAAW,MAClC,UAAa,gBACV,wXASX,eACE,GAAM,kBACH,mBACL,oBACE,eAAIA,WAAW,OAAK,cAAGA,WAAW,KAC9B,KAAQ,yFACL,0BACP,eAAIA,WAAW,OAAK,cAAGA,WAAW,KAC9B,KAAQ,8CACL,0BAIb,CAEAJ,EAAWK,gBAAiB,C","sources":["webpack://commerce-webapi/./src/pages/graphql/develop/create-custom-url-resolver.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/commerce-webapi/commerce-webapi/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"create-a-custom-graphql-urlresolver-service\"\n    }}>{`Create a custom GraphQL urlResolver service`}</h1>\n    <p>{`The `}<inlineCode parentName=\"p\">{`Magento\\\\UrlRewrite`}</inlineCode>{` module converts URL rewrite requests to canonical URLs. As a result, your custom `}<inlineCode parentName=\"p\">{`urlResolver`}</inlineCode>{` module does not require its own class for performing these actions, but it must be able to save and delete entries in the `}<inlineCode parentName=\"p\">{`url_rewrite`}</inlineCode>{` table.`}</p>\n    <h2 {...{\n      \"id\": \"create-observers\"\n    }}>{`Create observers`}</h2>\n    <p>{`You can use the `}<inlineCode parentName=\"p\">{`Magento\\\\CmsUrlRewrite\\\\Observer\\\\ProcessUrlRewriteSavingObserver`}</inlineCode>{` class as the basis for saving URL rewrites. For deleting entries, create a `}<inlineCode parentName=\"p\">{`ProcessUrlRewriteDeleteObserver`}</inlineCode>{` class similar to the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`/**\n * Generate urls for UrlRewrite and save it in storage\n *\n * @param \\\\Magento\\\\Framework\\\\Event\\\\Observer $observer\n * @return void\n */\npublic function execute(EventObserver $observer)\n{\n    /** @var \\\\Magento\\\\MyModule\\\\Model\\\\Page $myEntityPage  */\n    $page = $observer->getEvent()->getObject();\n\n    if ($page->isDeleted()) {\n        $this->urlPersist->deleteByData(\n            [\n                UrlRewrite::ENTITY_ID => $page->getId(),\n                UrlRewrite::ENTITY_TYPE => MyEntityPageUrlRewriteGenerator::ENTITY_TYPE,\n            ]\n        );\n    }\n}\n`}</code></pre>\n    <p>{`See `}<a parentName=\"p\" {...{\n        \"href\": \"https://developer.adobe.com/commerce/php/development/components/events-and-observers/\"\n      }}>{`Events and observers`}</a>{` for more information about creating an observer.`}</p>\n    <h2 {...{\n      \"id\": \"configure-the-custom-module\"\n    }}>{`Configure the custom module`}</h2>\n    <p>{`Update the `}<inlineCode parentName=\"p\">{`graphql.xml`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`events.xml`}</inlineCode>{` file in your module's `}<inlineCode parentName=\"p\">{`etc`}</inlineCode>{` directory to configure your custom GraphQL `}<inlineCode parentName=\"p\">{`urlResolver`}</inlineCode>{` service:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Add lines similar to the following in your module's `}<inlineCode parentName=\"p\">{`graphql.xml`}</inlineCode>{` file to define the enumeration. The `}<inlineCode parentName=\"p\">{`UrlRewriteGraphQl`}</inlineCode>{` module defines `}<inlineCode parentName=\"p\">{`UrlRewriteEntityTypeEnum`}</inlineCode>{`.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-xml\"\n          }}>{` <config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"urn:magento:module:Magento_GraphQl:etc/graphql.xsd\">\n   <type xsi:type=\"Enum\" name=\"UrlRewriteEntityTypeEnum\">\n     <item name=\"my_entity\">MY_ENTITY</item>\n   </type>\n </config>\n`}</code></pre>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Define two events similar to the following in your module's `}<inlineCode parentName=\"p\">{`events.xml`}</inlineCode>{` file.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-xml\"\n          }}>{` <event name=\"mymodule_page_save_after\">\n   <observer name=\"process_url_rewrite_saving\" instance=\"Magento\\\\MyModuleRewrite\\\\Observer\\\\ProcessUrlRewriteSavingObserver\" />\n </event>\n <event name=\"mymodule_page_delete_after\">\n   <observer name=\"process_url_rewrite_delete\" instance=\"Magento\\\\MyModuleRewrite\\\\Observer\\\\ProcessUrlRewriteDeleteObserver\" />\n </event>\n`}</code></pre>\n      </li>\n    </ul>\n    <h2 {...{\n      \"id\": \"related-topics\"\n    }}>{`Related Topics`}</h2>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://developer.adobe.com/commerce/php/development/components/events-and-observers/\"\n        }}>{`Events and observers`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"../schema/products/queries/url-resolver.md\"\n        }}>{`urlResolver endpoint`}</a></li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}