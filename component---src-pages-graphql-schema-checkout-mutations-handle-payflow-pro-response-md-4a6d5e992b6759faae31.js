"use strict";(self.webpackChunkcommerce_webapi=self.webpackChunkcommerce_webapi||[]).push([[756],{80312:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return m},default:function(){return u}});var n=a(87462),o=a(63366),r=(a(15007),a(64983)),d=a(91515),l=a(69115),p=["components"],m={},i={_frontmatter:m},s=d.Z;function u(e){var t=e.components,a=(0,o.Z)(e,p);return(0,r.mdx)(s,(0,n.Z)({},i,a,{components:t,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"handlepayflowproresponse-mutation"},"handlePayflowProResponse mutation"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"handlePayflowProResponse")," mutation sends the silent post data that the client received from the Payflow Pro gateway to the application server. The content of this payload varies based on factors such as the merchant's location, the items purchased, and the billing/shipping addresses. The following is an example payload:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-text"},"'BILLTOCITY=CityM&AMT=0.00&BILLTOSTREET=Green+str,+67&VISACARDLEVEL=12&SHIPTOCITY=CityM'\n'&NAMETOSHIP=John+Smith&ZIP=75477&BILLTOLASTNAME=Smith&BILLTOFIRSTNAME=John'\n'&RESPMSG=Verified&PROCCVV2=M&STATETOSHIP=AL&NAME=John+Smith&BILLTOZIP=75477&CVV2MATCH=Y'\n'&PNREF=B70CCC236815&ZIPTOSHIP=75477&SHIPTOCOUNTRY=US&SHIPTOSTREET=Green+str,+67&CITY=CityM'\n'&HOSTCODE=A&LASTNAME=Smith&STATE=AL&SECURETOKEN=MYSECURETOKEN&CITYTOSHIP=CityM&COUNTRYTOSHIP=US'\n'&AVSDATA=YNY&ACCT=1111&AUTHCODE=111PNI&FIRSTNAME=John&RESULT=0&IAVS=N&POSTFPSMSG=No+Rules+Triggered&'\n'BILLTOSTATE=AL&BILLTOCOUNTRY=US&EXPDATE=0222&CARDTYPE=0&PREFPSMSG=No+Rules+Triggered&SHIPTOZIP=75477&'\n'PROCAVS=A&COUNTRY=US&AVSZIP=N&ADDRESS=Green+str,+67&BILLTONAME=John+Smith&'\n'ADDRESSTOSHIP=Green+str,+67&'\n'AVSADDR=Y&SECURETOKENID=MYSECURETOKENID&SHIPTOSTATE=AL&TRANSTIME=2019-06-24+07%3A53%3A10'\n")),(0,r.mdx)("p",null,"See ",(0,r.mdx)("a",{parentName:"p",href:"../../../payment-methods/payflow-pro.md"},"Paypal Payflow Pro payment method")," for detailed information about the workflow of PayPal Payflow Pro transactions."),(0,r.mdx)("h2",{id:"syntax"},"Syntax"),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"handlePayflowProResponse(input: PayflowProResponseInput!): PayflowProResponseOutput")),(0,r.mdx)("h2",{id:"example-usage"},"Example usage"),(0,r.mdx)("p",null,"The following example sends the Payflow Pro payload to Magento:"),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Request:")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-graphql"},'mutation {\n  handlePayflowProResponse(\n    input: {\n      cart_id: "Po1WkfK7d3vZE0qga610NwJIbxgqllpt"\n      paypal_payload: "$payload"\n    }\n  ){\n    cart {\n      selected_payment_method {\n        code\n      }\n    }\n  }\n}\n')),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Response:")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "handlePayflowProResponse": {\n      "cart": {\n        "selected_payment_method": {\n          "code": "payflowpro",\n        }\n      }\n    }\n  }\n}\n')),(0,r.mdx)("h2",{id:"input-attributes"},"Input attributes"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"PayflowProResponseInput")," object must contain the ",(0,r.mdx)("inlineCode",{parentName:"p"},"cart_id")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"paypal_payload")," attributes."),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,r.mdx)("th",{parentName:"tr",align:null},"Data Type"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"cart_id")),(0,r.mdx)("td",{parentName:"tr",align:null},"String!"),(0,r.mdx)("td",{parentName:"tr",align:null},"The unique ID that identifies the customer's cart")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"paypal_payload")),(0,r.mdx)("td",{parentName:"tr",align:null},"String!"),(0,r.mdx)("td",{parentName:"tr",align:null},"The payload returned from PayPal")))),(0,r.mdx)("h2",{id:"output-attributes"},"Output attributes"),(0,r.mdx)("p",null,"The PayflowProResponseOutput contains a ",(0,r.mdx)("inlineCode",{parentName:"p"},"Cart")," object."),(0,r.mdx)("h3",{id:"cart-object"},"Cart object"),(0,r.mdx)(l.default,{mdxType:"CartObject"}),(0,r.mdx)("p",null,(0,r.mdx)("a",{parentName:"p",href:"../../cart/queries/cart.md#output-attributes"},"Cart query output")," provides more information about the ",(0,r.mdx)("inlineCode",{parentName:"p"},"Cart")," object."))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-graphql-schema-checkout-mutations-handle-payflow-pro-response-md-4a6d5e992b6759faae31.js.map