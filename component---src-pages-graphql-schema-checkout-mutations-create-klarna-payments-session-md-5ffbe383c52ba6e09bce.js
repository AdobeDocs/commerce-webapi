"use strict";(self.webpackChunkcommerce_webapi=self.webpackChunkcommerce_webapi||[]).push([[539],{38345:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return i},default:function(){return x}});var n=a(87462),r=a(45987),m=(a(35776),a(3905)),d=a(91515);const l=["components"],i={},p=(o="InlineAlert",function(e){return console.warn("Component "+o+" was not imported, exported, or provided by MDXProvider as global scope"),(0,m.mdx)("div",e)});var o;const s={_frontmatter:i},u=d.Z;function x(e){let{components:t}=e,a=(0,r.Z)(e,l);return(0,m.mdx)(u,(0,n.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,m.mdx)("h1",{id:"createklarnapaymentssession-mutation"},"createKlarnaPaymentsSession mutation"),(0,m.mdx)(p,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,m.mdx)("p",null,"The Klarna Vendor Bundled Extension was removed from the Adobe Commerce codebase in version 2.4.4.\nThis mutation is no longer supported."),(0,m.mdx)("p",null,"The ",(0,m.mdx)("inlineCode",{parentName:"p"},"createKlarnaPaymentsSession")," mutation initiates a Klarna session. You can create a session at any time before you display the available payment methods, but ideally, the cart would already contain products, the billing address, shipping address, and shipping method. If the cart changes afterward, you must run the mutation again to ensure that the latest payment methods are made available to the shopper. Factors such as the cart contents, the shipping and billing addresses, and the grand total after applying coupons can determine the payment methods Klarna offers."),(0,m.mdx)("p",null,"The mutation response includes an array of payment method categories. When the shopper selects a Klarna payment method, prepend the string ",(0,m.mdx)("inlineCode",{parentName:"p"},"klarna_")," to the selected ",(0,m.mdx)("inlineCode",{parentName:"p"},"identifer"),", and use the resulting string as the ",(0,m.mdx)("inlineCode",{parentName:"p"},"payment_method.code")," value in the subsequent ",(0,m.mdx)("inlineCode",{parentName:"p"},"setPaymentMethodOnCart"),' mutation. For example, if the shopper selects the "Pay later in 30 days" payment method, the ',(0,m.mdx)("inlineCode",{parentName:"p"},"identifier")," value is ",(0,m.mdx)("inlineCode",{parentName:"p"},"pay_later"),", and the ",(0,m.mdx)("inlineCode",{parentName:"p"},"payment_method.code")," value is ",(0,m.mdx)("inlineCode",{parentName:"p"},"klarna_pay_later"),"."),(0,m.mdx)("p",null,"The response also contains a client token. You must also supply this value in the ",(0,m.mdx)("inlineCode",{parentName:"p"},"setPaymentMethodOnCart")," mutation."),(0,m.mdx)("p",null,(0,m.mdx)("a",{parentName:"p",href:"../../../payment-methods/klarna.md"},"Klarna payment method")," provides additional information about the workflow of Klarna transactions."),(0,m.mdx)("h2",{id:"syntax"},"Syntax"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-graphql"},"mutation {\n  createKlarnaPaymentsSession(\n    input: createKlarnaPaymentsSessionInput!\n  ) {\n    createKlarnaPaymentsSessionOutput\n  }\n}\n")),(0,m.mdx)("h2",{id:"example-usage"},"Example usage"),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},"Request:")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-graphql"},'mutation {\n  createKlarnaPaymentsSession(\n    input: {\n      cart_id: "VaP2GtqImwsTEXEf7azrh4vopebXp8gl"}\n  ) {\n    client_token\n    payment_method_categories {\n      identifier\n      name\n    }\n  }\n}\n')),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},"Response:")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "createKlarnaPaymentsSession": {\n      "client_token": "<token_value>",\n      "payment_method_categories": [\n        {\n          "identifier": "pay_later",\n          "name": "Pay later in 30 days"\n        },\n        {\n          "identifier": "pay_over_time",\n          "name": "Buy now, pay later"\n        }\n      ]\n    }\n  }\n}\n')),(0,m.mdx)("h2",{id:"input-attributes"},"Input attributes"),(0,m.mdx)("h3",{id:"createklarnapaymentssessioninput-attributes"},"createKlarnaPaymentsSessionInput attributes"),(0,m.mdx)("p",null,"The ",(0,m.mdx)("inlineCode",{parentName:"p"},"createKlarnaPaymentsSessionInput")," object must contain the following attribute."),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,m.mdx)("th",{parentName:"tr",align:null},"Data type"),(0,m.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"cart_id")),(0,m.mdx)("td",{parentName:"tr",align:null},"String!"),(0,m.mdx)("td",{parentName:"tr",align:null},"The masked ID that identifies the shopper's cart")))),(0,m.mdx)("h2",{id:"output-attributes"},"Output attributes"),(0,m.mdx)("h3",{id:"createklarnapaymentssessionoutput-attributes"},"createKlarnaPaymentsSessionOutput attributes"),(0,m.mdx)("p",null,"The ",(0,m.mdx)("inlineCode",{parentName:"p"},"createKlarnaPaymentsSessionOutput")," object can contain the following attributes."),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,m.mdx)("th",{parentName:"tr",align:null},"Data type"),(0,m.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"client_token")),(0,m.mdx)("td",{parentName:"tr",align:null},"String"),(0,m.mdx)("td",{parentName:"tr",align:null},"The payment method client token")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"payment_method_categories")),(0,m.mdx)("td",{parentName:"tr",align:null},"[Categories]"),(0,m.mdx)("td",{parentName:"tr",align:null},"An array of payment method categories")))),(0,m.mdx)("h3",{id:"categories-attributes"},"Categories attributes"),(0,m.mdx)("p",null,"The ",(0,m.mdx)("inlineCode",{parentName:"p"},"Categories")," object can contain the following attributes."),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,m.mdx)("th",{parentName:"tr",align:null},"Data type"),(0,m.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"asset_urls")),(0,m.mdx)("td",{parentName:"tr",align:null},"[Assets]"),(0,m.mdx)("td",{parentName:"tr",align:null},"The payment method assets")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"identifier")),(0,m.mdx)("td",{parentName:"tr",align:null},"String!"),(0,m.mdx)("td",{parentName:"tr",align:null},"The payment method identifier")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"name")),(0,m.mdx)("td",{parentName:"tr",align:null},"String!"),(0,m.mdx)("td",{parentName:"tr",align:null},"The payment method name")))),(0,m.mdx)("h3",{id:"assets-attributes"},"Assets attributes"),(0,m.mdx)("p",null,"The ",(0,m.mdx)("inlineCode",{parentName:"p"},"Assets")," object can contain the following attributes."),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,m.mdx)("th",{parentName:"tr",align:null},"Data type"),(0,m.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"descriptive")),(0,m.mdx)("td",{parentName:"tr",align:null},"String"),(0,m.mdx)("td",{parentName:"tr",align:null},"The payment method logo url (descriptive)")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"standard")),(0,m.mdx)("td",{parentName:"tr",align:null},"String"),(0,m.mdx)("td",{parentName:"tr",align:null},"The payment method logo url (standard)")))),(0,m.mdx)("h2",{id:"errors"},"Errors"),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr",align:null},"Error"),(0,m.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"The Klarna payment method is not active.")),(0,m.mdx)("td",{parentName:"tr",align:null},"The ",(0,m.mdx)("a",{parentName:"td",href:"https://experienceleague.adobe.com/docs/commerce-admin/config/sales/payment-methods/payment-methods.html"},"Klarna")," payment method is disabled in admin.")))))}x.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-graphql-schema-checkout-mutations-create-klarna-payments-session-md-5ffbe383c52ba6e09bce.js.map