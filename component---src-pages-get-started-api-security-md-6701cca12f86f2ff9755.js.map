{"version":3,"file":"component---src-pages-get-started-api-security-md-6701cca12f86f2ff9755.js","mappings":"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","sources":["webpack://commerce-webapi/./src/pages/get-started/api-security.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/commerce-webapi/commerce-webapi/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nimport BetaNote from '/src/pages/_includes/graphql/notes/beta.md';\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`This topic describes best practices for `}<a parentName=\"p\" {...{\n        \"href\": \"https://owasp.org/www-project-api-security/\"\n      }}>{`API security`}</a>{`.`}</p>\n    <h1 {...{\n      \"id\": \"api-security\"\n    }}>{`API security`}</h1>\n    <h2 {...{\n      \"id\": \"rate-limiting-for-payment-information-endpoint-and-mutation\"\n    }}>{`Rate limiting for payment information endpoint and mutation`}</h2>\n\n    <BetaNote mdxType=\"BetaNote\" />\n    <p>{`In a carding attack, an attacker tries to determine which credit card numbers are valid, usually in batches of thousands. Attackers can use similar techniques to brute force missing details, like the expiration date. Adobe Commerce merchants can be targeted by this attack type through their shops and integrations with 3rd-party payment gateways.`}</p>\n    <p>{`As of Adobe Commerce 2.4.7-beta, you can configure rate limiting for the payment information transmitted using REST and GraphQL. This added layer of protection allows merchants to prevent and decrease the volume of carding attacks that test many credit card numbers at once.`}</p>\n    <p>{`Rate limiting is disabled by default, but you can enable and configure this feature from either the CLI or the Admin. The threshold can be configured by interval and set independently for customers and guests.`}</p>\n    <h3 {...{\n      \"id\": \"how-rate-limiting-works\"\n    }}>{`How rate limiting works`}</h3>\n    <p>{`The rate limiting functionality affects the following entry points:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`REST:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<base_url>/rest/V1/<store_code>/guest-carts/<cart_id>/payment-information`}</inlineCode></li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<base_url>/rest/V1/<store_code>/guest-carts/<cart_id>/order`}</inlineCode></li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<base_url>/rest/V1/<store_code>/carts/mine/payment-information`}</inlineCode></li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<base_url>/rest/V1/<store_code>/carts/mine/order`}</inlineCode></li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`GraphQL: `}<inlineCode parentName=\"p\">{`<base_url>/graphql`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Module InstantPurchase `}<inlineCode parentName=\"p\">{`magento/module-instant-purchase`}</inlineCode></p>\n      </li>\n    </ul>\n    <h3 {...{\n      \"id\": \"enable-rate-limiting\"\n    }}>{`Enable rate limiting`}</h3>\n    <p>{`Prerequisite: You must configure Redis to enable rate limiting.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Parametr`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`sales/backpressure/enabled`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Enable rate limiting for placing orders.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`sales/backpressure/guest_limit`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Requests limit per guest`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`sales/backpressure/limit`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Requests limit per authenticated customer`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`sales/backpressure/period`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Counter resets in a ... `}{`[sec.]`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`Example:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Sales restrictions are enabled `}<inlineCode parentName=\"li\">{`sales/backpressure/enabled`}</inlineCode>{` = `}<inlineCode parentName=\"li\">{`1`}</inlineCode>{`.`}</li>\n      <li parentName=\"ul\">{`Anonymous users are limited to 50 orders (`}<inlineCode parentName=\"li\">{`sales/backpressure/guest_limit`}</inlineCode>{` = `}<inlineCode parentName=\"li\">{`50`}</inlineCode>{`) from a single IP address within one minute (`}<inlineCode parentName=\"li\">{`sales/backpressure/period - 60`}</inlineCode>{`).  If they exceed the order limit, then they will have to wait three times the specified `}<inlineCode parentName=\"li\">{`period`}</inlineCode>{` of time from their last request.`}</li>\n      <li parentName=\"ul\">{`For example, if an authorized user attempts to place more than `}<inlineCode parentName=\"li\">{`10`}</inlineCode>{` orders (`}<inlineCode parentName=\"li\">{`sales/backpressure/limit`}</inlineCode>{` = `}<inlineCode parentName=\"li\">{`10`}</inlineCode>{`) within the `}<inlineCode parentName=\"li\">{`period`}</inlineCode>{` of `}<inlineCode parentName=\"li\">{`60`}</inlineCode>{` seconds, then the user will not be able to place an order for a period of `}<inlineCode parentName=\"li\">{`180`}</inlineCode>{` seconds.`}</li>\n    </ul>\n    <p>{`Since this functionality is disabled by default, you need to add a configuration that connects to the service where the request logs will be stored. By default, the connection is configured for a Redis server.\nThe following options work for new and existing installations:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-terminal\"\n      }}>{`--backpressure-logger=BACKPRESSURE-LOGGER                                                  Backpressure logger handler\n--backpressure-logger-redis-server=BACKPRESSURE-LOGGER-REDIS-SERVER                        Redis server\n--backpressure-logger-redis-port=BACKPRESSURE-LOGGER-REDIS-PORT                            Redis server listen port\n--backpressure-logger-redis-timeout=BACKPRESSURE-LOGGER-REDIS-TIMEOUT                      Redis server timeout\n--backpressure-logger-redis-persistent=BACKPRESSURE-LOGGER-REDIS-PERSISTENT                Redis persistent\n--backpressure-logger-redis-db=BACKPRESSURE-LOGGER-REDIS-DB                                Redis db number\n--backpressure-logger-redis-password=BACKPRESSURE-LOGGER-REDIS-PASSWORD                    Redis server password\n--backpressure-logger-redis-user=BACKPRESSURE-LOGGER-REDIS-USER                            Redis server user\n--backpressure-logger-id-prefix=BACKPRESSURE-LOGGER-ID-PREFIX                              ID prefix for keys\n`}</code></pre>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`The data, including request time and identifier, is temporarily stored in Redis. Registered users are identified by their user ID. Non-registered users are identified by their external IP address.`}</p>\n    <p>{`The following command will add a new connection to the Redis server:`}</p>\n    <p>{`Redis server:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Host: 195.34.23.5`}</li>\n      <li parentName=\"ul\">{`Port: 9345`}</li>\n      <li parentName=\"ul\">{`Password: s0M3StR0NgP@SsW0Rd`}</li>\n      <li parentName=\"ul\">{`User: SomeUser`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`$ bin/magento setup:config:set \\\\\n    --backpressure-logger=redis \\\\\n    --backpressure-logger-redis-server=195.34.23.5 \\\\\n    --backpressure-logger-redis-port=9345 \\\\\n    --backpressure-logger-redis-timeout=1 \\\\\n    --backpressure-logger-redis-persistent=persistent \\\\\n    --backpressure-logger-redis-db=3 \\\\\n    --backpressure-logger-redis-password=s0M3StR0NgP@SsW0Rd\\\\\n    --backpressure-logger-redis-user=SomeUser \\\\\n    --backpressure-logger-id-prefix=some_pref\n`}</code></pre>\n    <p>{`After the command is executed, the following configuration is added to the `}<inlineCode parentName=\"p\">{`app/etc/env.php`}</inlineCode>{` file.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`[\n//...\n    'backpressure' => [\n        'logger' => [\n            'type' => 'redis',\n            'options' => [\n                'server' => '195.34.23.5',\n                'port' => 9345,\n                'timeout' => 1,\n                'persistent' => 'persistent',\n                'db' => '3',\n                'password' => 's0meStr0ngPassw0rd',\n                'user' => 'SomeUser'\n            ],\n            'id-prefix' => 'some_pref'\n        ]\n    ]\n//...\n];\n`}</code></pre>\n    <p>{`Use the following commands to enable rate limiting:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Enable (`}<inlineCode parentName=\"p\">{`1`}</inlineCode>{`) or disable (`}<inlineCode parentName=\"p\">{`0`}</inlineCode>{`) rate limiting for placing orders:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-bash\"\n          }}>{`$ bin/magento config:set sales/backpressure/enabled 1\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Set the request limit per guest (IP address):`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-bash\"\n          }}>{`$ bin/magento config:set sales/backpressure/guest_limit 100\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Set the request limit for authenticated customers:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-bash\"\n          }}>{`$ bin/magento config:set sales/backpressure/limit 10\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Set the period of time (in seconds) for the request limit. Supported values `}<inlineCode parentName=\"p\">{`60`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`3600`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`86400`}</inlineCode>{` seconds. This time period is multiplied by three to calculate the timeout period:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-bash\"\n          }}>{`$ bin/magento config:set sales/backpressure/period 60\n`}</code></pre>\n      </li>\n    </ol>\n    <p>{`If you need to check a configuration, use the following CLI command:`}</p>\n    <p>{`Example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`$ bin/magento config:show | grep backpressure\n`}</code></pre>\n    <p>{`Response:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-terminal\"\n      }}>{`sales/backpressure/limit - 10\nsales/backpressure/guest_limit - 100\nsales/backpressure/period - 3600\nsales/backpressure/enabled - 1\n`}</code></pre>\n    <p>{`You can also enable and configure rate limiting in the user interface: `}<strong parentName=\"p\">{`Stores`}</strong>{` > `}<strong parentName=\"p\">{`Configuration`}</strong>{` > `}<strong parentName=\"p\">{`Sales`}</strong>{` > `}<strong parentName=\"p\">{`Sales`}</strong>{` > `}<strong parentName=\"p\">{`Rate Limiting`}</strong>{`:`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1181px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"81.5625%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/commerce-webapi/static/17d69ee58bc3bd0af5e074882be7df99/5530d/api-security-rate-limiting.webp 320w\", \"/commerce-webapi/static/17d69ee58bc3bd0af5e074882be7df99/0c8fb/api-security-rate-limiting.webp 640w\", \"/commerce-webapi/static/17d69ee58bc3bd0af5e074882be7df99/8866f/api-security-rate-limiting.webp 1181w\"],\n            \"sizes\": \"(max-width: 1181px) 100vw, 1181px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/commerce-webapi/static/17d69ee58bc3bd0af5e074882be7df99/dd4a7/api-security-rate-limiting.png 320w\", \"/commerce-webapi/static/17d69ee58bc3bd0af5e074882be7df99/0f09e/api-security-rate-limiting.png 640w\", \"/commerce-webapi/static/17d69ee58bc3bd0af5e074882be7df99/f6909/api-security-rate-limiting.png 1181w\"],\n            \"sizes\": \"(max-width: 1181px) 100vw, 1181px\",\n            \"type\": \"image/png\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/commerce-webapi/static/17d69ee58bc3bd0af5e074882be7df99/f6909/api-security-rate-limiting.png\",\n            \"alt\": \"Rate limiting section\",\n            \"title\": \"Rate limiting section\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`If rate limiting has been enabled for the payment information endpoint and the GraphQl mutation via the UI/CLI, but the Redis service connection for store log requests has not been configured in the `}<inlineCode parentName=\"p\">{`app/etc/env.php`}</inlineCode>{` file, then the rate-limiting will not apply. The behavior will be the same if this option is disabled, but the application logs (`}<inlineCode parentName=\"p\">{`<magento-root>/var/log/system.log`}</inlineCode>{`) will contain the following message:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-text\"\n      }}>{`...\n[2022-11-11T15:46:32.716679+00:00] main.ERROR: Backpressure sliding window not applied. Invalid request logger type:  [] []\n...\n[2022-11-11T15:46:37.730863+00:00] main.ERROR: Backpressure sliding window not applied. Invalid request logger type:  [] []\n...\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"example-responses\"\n    }}>{`Example Responses`}</h4>\n    <p>{`If rate limiting is applied to a REST request, then a response with HTTP status code `}<inlineCode parentName=\"p\">{`429 - Too Many Requests`}</inlineCode>{` will be generated.`}</p>\n    <p>{`Example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-text\"\n      }}>{`HTTP/1.1 429 Too Many Requests\n...\nPragma: no-cache\nCache-Control: no-store\n...\n{\"message\":\"Too Many Requests\",\"trace\":null}\n`}</code></pre>\n    <p>{`If rate limiting is applied to a GraphQl request, then a response with HTTP status code `}<inlineCode parentName=\"p\">{`200 - Ok`}</inlineCode>{` will be generated and all relevant information will be present in the response body.`}</p>\n    <p>{`Example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-text\"\n      }}>{`HTTP/1.1 200 OK\n...\nPragma: no-cache\nCache-Control: max-age=0, must-revalidate, no-cache, no-store\n ...\n{\n    \"errors\":[\n        {\n            \"message\":\"Too Many Requests\",\n            \"extensions\":{\"category\":\"graphql-too-many-requests\"},\n             \"locations\":[\n                 {\"line\":2,\"column\":3}\n             ],\n             \"path\":[\"placeOrder\"]\n        }\n    ],\n    \"data\":{\"placeOrder\":null}\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"input-limiting\"\n    }}>{`Input limiting`}</h2>\n    <p>{`Imposing restrictions on the size and number of resources that a user can request through an API can help mitigate denial-of-service (DoS) vulnerabilities. By default, the following built-in API rate limiting is available:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`REST requests containing inputs that represent a list of entities. When enabled, the default maximum is 20 for synchronous requests and 5,000 for asynchronous requests.`}</li>\n      <li parentName=\"ul\">{`REST and GraphQL queries that allow paginated results can be limited to a maximum number of items per page. When enabled, the default maximum is 300.`}</li>\n      <li parentName=\"ul\">{`REST queries that allow paginated results can have a default number of items per page imposed. When enabled, the default maximum is 20.`}</li>\n    </ul>\n    <p>{`By default, these input limits are disabled, but you can use the following methods to enable them:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Set the values in the `}<a parentName=\"li\" {...{\n          \"href\": \"https://docs.magento.com/user-guide/configuration/services/magento-web-api.html\"\n        }}>{`Admin`}</a>{`.`}</li>\n      <li parentName=\"ul\">{`Run the `}<a parentName=\"li\" {...{\n          \"href\": \"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cli/configuration-management/set-configuration-values.html\"\n        }}><inlineCode parentName=\"a\">{`bin/magento config:set`}</inlineCode>{` command`}</a>{`.`}</li>\n      <li parentName=\"ul\">{`Add entries to the `}<a parentName=\"li\" {...{\n          \"href\": \"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/files/config-reference-configphp.html#system\"\n        }}><inlineCode parentName=\"a\">{`env.php`}</inlineCode>{` file`}</a>{`.`}</li>\n      <li parentName=\"ul\">{`Set `}<a parentName=\"li\" {...{\n          \"href\": \"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/deployment/examples/example-environment-variables.html\"\n        }}>{`environment variables`}</a>{`.`}</li>\n    </ul>\n    <p>{`When input limiting has been enabled, the system uses the default value for each limitation listed above. You can also configure custom values.`}</p>\n    <p>{`Although some simple examples for configuring these values from the CLI are provided below, all of the values can be `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cli/configuration-management/set-configuration-values.html\"\n      }}>{`configured per website and per store view`}</a>{` in addition to being configurable globally. In addition, these values can also be configured `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/files/config-reference-configphp.html#system\"\n      }}>{`via `}<inlineCode parentName=\"a\">{`env.php`}</inlineCode></a>{`\nas well as via `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/deployment/examples/example-environment-variables.html\"\n      }}>{`environment variables`}</a>{`.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`In addition, the Admin provides a configuration setting for limiting session sizes for Admin users and storefront visitors.`}</p>\n    <h3 {...{\n      \"id\": \"enable-the-input-limiting-system\"\n    }}>{`Enable the input limiting system`}</h3>\n    <p>{`To enable these input limiting features from the Admin, go to `}<strong parentName=\"p\">{`Stores`}</strong>{` > Settings > `}<strong parentName=\"p\">{`Configuration`}</strong>{` > `}<strong parentName=\"p\">{`Services`}</strong>{` > `}<strong parentName=\"p\">{`Web Api Limits`}</strong>{` or `}<strong parentName=\"p\">{`GraphQL Input Limits`}</strong>{` and set `}<strong parentName=\"p\">{`Enable Input Limits`}</strong>{` to `}<strong parentName=\"p\">{`Yes`}</strong>{`.`}</p>\n    <p>{`To enable with the CLI, run one or both of the following commands:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento config:set webapi/validation/input_limit_enabled 1\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento config:set graphql/validation/input_limit_enabled 1\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"maximum-parameter-inputs\"\n    }}>{`Maximum parameter inputs`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`EntityArrayValidator`}</inlineCode>{` class constructor limits the number of objects that can be given to inputs that represent arrays of objects. For example, the `}<inlineCode parentName=\"p\">{`PUT /V1/guest-carts/{cartId}/collect-totals`}</inlineCode>{` endpoint contains the input parameter `}<inlineCode parentName=\"p\">{`additionalData->extension_attributes->gift_messages`}</inlineCode>{`, which represents a list of gift message information objects.`}</p>\n    <p>{`There are four possible input arrays:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`additional_data`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`agreement_ids`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`gift_messages`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`custom_attributes`}</inlineCode></li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"paymentMethod\": {\n    \"po_number\": \"string\",\n    \"method\": \"string\",\n    \"additional_data\": [\n      \"string\"\n    ],\n    \"extension_attributes\": {\n      \"agreement_ids\": [\n        \"string\"\n      ]\n    }\n  },\n  \"shippingCarrierCode\": \"string\",\n  \"shippingMethodCode\": \"string\",\n  \"additionalData\": {\n    \"extension_attributes\": {\n      \"gift_messages\": [\n        {\n          \"gift_message_id\": 0,\n          \"customer_id\": 0,\n          \"sender\": \"string\",\n          \"recipient\": \"string\",\n          \"message\": \"string\",\n          \"extension_attributes\": {\n            \"entity_id\": \"string\",\n            \"entity_type\": \"string\",\n            \"wrapping_id\": 0,\n            \"wrapping_allow_gift_receipt\": true,\n            \"wrapping_add_printed_card\": true\n          }\n        }\n      ]\n    },\n    \"custom_attributes\": [\n      {\n        \"attribute_code\": \"string\",\n        \"value\": \"string\"\n      }\n    ]\n  }\n}\n`}</code></pre>\n    <p>{`By default, any one of these arrays can include up to 20 items, but you can change this value in the configuration UI via `}<strong parentName=\"p\">{`Stores`}</strong>{` > Settings > `}<strong parentName=\"p\">{`Configuration`}</strong>{` > `}<strong parentName=\"p\">{`Services`}</strong>{` > `}<strong parentName=\"p\">{`Web API Input Limits`}</strong>{` > `}<strong parentName=\"p\">{`Input List Limit`}</strong>{` or via CLI using the `}<inlineCode parentName=\"p\">{`webapi/validation/complex_array_limit`}</inlineCode>{` configuration path.`}</p>\n    <h3 {...{\n      \"id\": \"input-limit-for-rest-endpoints\"\n    }}>{`Input limit for REST endpoints`}</h3>\n    <p>{`Some REST endpoints can contain a high number of elements, and developers need a way to set the limit for each endpoint. The limit for a specific REST endpoint can be set in the `}<inlineCode parentName=\"p\">{`webapi.xml`}</inlineCode>{` configuration file for synchronous requests and `}<inlineCode parentName=\"p\">{`webapi_async.xml`}</inlineCode>{` for asynchronous requests.\nTo do this, assign a value for the `}<inlineCode parentName=\"p\">{`<data input-array-size-limit/>`}</inlineCode>{` attribute within a `}<inlineCode parentName=\"p\">{`<route>`}</inlineCode>{` definition. The value for `}<inlineCode parentName=\"p\">{`input-array-size-limit`}</inlineCode>{` must be a non-negative integer.`}</p>\n    <p>{`The following example sets the input limit for the `}<inlineCode parentName=\"p\">{`/V1/some-custom-route`}</inlineCode>{` route.\nIf the route works synchronously, open the `}<inlineCode parentName=\"p\">{`<module_dir>/etc/webapi.xml`}</inlineCode>{` configuration file. Otherwise, open `}<inlineCode parentName=\"p\">{`<module_dir>/etc/webapi_async.xml`}</inlineCode>{`.\nAdd the `}<inlineCode parentName=\"p\">{`data`}</inlineCode>{` tag with the `}<inlineCode parentName=\"p\">{`input-array-size-limit`}</inlineCode>{` attribute to the route configuration.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<?xml version=\"1.0\"?>\n<!--\nSome custom module\n-->    \n<routes xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n        xsi:noNamespaceSchemaLocation=\"urn:magento:module:Magento_Webapi:etc/webapi.xsd\">\n    <route url=\"/V1/some-custom-route\" method=\"POST\">\n        <service class=\"Vendor\\\\Module\\\\Api\\\\EntityRepositoryInterface\" method=\"save\"/>\n        <resources>\n            <resource ref=\"Vendor_Entity::entities\" />\n        </resources>\n        <data input-array-size-limit=\"5\" /> <!--  limit only for route \\`/V1/some-custom-route\\`  -->\n    </route>\n</routes>\n`}</code></pre>\n    <p>{`Clear the configuration cache for the changes to take effect.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento cache:clean config\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"values-by-default-for-rest-endpoints\"\n    }}>{`Values by default for REST endpoints`}</h3>\n    <p>{`If you need to change the default limits for REST endpoints, then edit the `}<inlineCode parentName=\"p\">{`webapi`}</inlineCode>{` section of the `}<inlineCode parentName=\"p\">{`<magento_root>/app/etc/env.php`}</inlineCode>{` file as follows:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`[\n//...\n    'webapi' => [\n        'sync' => [\n            'default_input_array_size_limit' => <non-negative value>, //overrides values for synchronous REST endpoints\n        ],\n        'async' => [\n            'default_input_array_size_limit' => <non-negative value>, //overrides values for asynchronous REST endpoints\n        ],\n    ]\n//...\n];\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"maximum-page-size\"\n    }}>{`Maximum page size`}</h3>\n    <p>{`The maximum page size setting controls the pagination of various web API responses. By default, the maximum value is `}<inlineCode parentName=\"p\">{`300`}</inlineCode>{`. You can change the default in the Admin by selecting `}<strong parentName=\"p\">{`Stores`}</strong>{` > Settings > `}<strong parentName=\"p\">{`Configuration`}</strong>{` > `}<strong parentName=\"p\">{`Services`}</strong>{` > `}<strong parentName=\"p\">{`Web API Input Limits`}</strong>{` or `}<strong parentName=\"p\">{`GraphQl Input Limits`}</strong>{` >  `}<strong parentName=\"p\">{`Maximum Page Size`}</strong>{` field.`}</p>\n    <p>{`[GraphQL security configuration]`}{`(../graphql/usage/security-configuration.md describes how to set the maximum page size in GraphQL.`}</p>\n    <h3 {...{\n      \"id\": \"default-page-size\"\n    }}>{`Default page size`}</h3>\n    <p>{`The Default Page Size setting controls the pagination of various web API responses. You can change the default value of `}<inlineCode parentName=\"p\">{`20`}</inlineCode>{` in the Admin by selecting `}<strong parentName=\"p\">{`Stores`}</strong>{` > Settings > `}<strong parentName=\"p\">{`Configuration`}</strong>{` > `}<strong parentName=\"p\">{`Services`}</strong>{` > `}<strong parentName=\"p\">{`Web API Input Limits`}</strong>{` > `}<strong parentName=\"p\">{`Default Page Size`}</strong>{`. To change the value from the CLI, run the following command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento config:set webapi/validation/default_page_size 30\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["name","_frontmatter","InlineAlert","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","variant","slots","isMDXComponent"],"sourceRoot":""}