---
title: Vaulting a credit card without a purchase
description: Learn how to vault a payment method without a typical checkout authorization.
keywords:
  - GraphQL
  - Payments
---

# Vaulting a credit card without a checkout authorization

These steps describe the flow of requests and responses required to [vault a payment method](https://experienceleague.adobe.com/en/docs/commerce-merchant-services/payment-services/payments-checkout/vaulting#vaulting-without-purchase) without the typical checkout authorization with Payment Services enabled.

## Vault without purchase workflow

![Payment Services sequence diagram](../../../_images/graphql/payment-services-vault-without-purchase.svg)

1. Run the [`getVaultConfig`](../../payment-services-extension/queries/get-vault-config.md) query to fetch the vault configuration details for the available payment methods. Attribute `is_vault_enabled` set to `true`.

1. Commerce returns the vault configuration details.

1. Run the  [`createVaultCardSetupToken`](../../payment-services-extension/mutations/create-vault-card-setup-token.md) mutation to create a temporary `setup_token` associated to the given payment source.

1. Commerce forwards token request to PayPal.

1. PayPal returns the temporary `setup_token` to Commerce.

1. Commerce stores the token.

1. PayPal SDK updates the credit card information in the storefront.

1. Run the [`createVaultCardPaymentToken`](../../payment-services-extension/mutations/create-vault-card-payment-token.md) mutation to create a permanent `vault_token_id` and associate it with an optional card description, visible in the storefront.

1. Commerce forwards `setup_token` to PayPal.

1. PayPal returns a permanent `vault_token_id` to Commerce.

1. Commerce vaults the payment method.

## Additional Payment information

The setup token is generated with an empty card number in the `payment_source` object purposefully. The PayPal SDK, in conjunction with hosted fields or credit cards field components, securely updates the setup token with payment details.

See [PayPal SDK developer documentation](https://developer.paypal.com/docs/multiparty/checkout/save-payment-methods/purchase-later/js-sdk/cards/) for more information.

To run the `createVaultCardPaymentToken` mutation, use the `setup_token` generated by the [`createVaultCardSetupToken`](../mutations/create-vault-card-setup-token.md) mutation.
