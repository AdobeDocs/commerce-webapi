"use strict";(self.webpackChunkcommerce_webapi=self.webpackChunkcommerce_webapi||[]).push([[2914],{77503:function(e,t,l){l.d(t,{MF:function(){return N},MH:function(){return E},SL:function(){return F},UW:function(){return T},cI:function(){return q},dd:function(){return U},ie:function(){return V}});var o=l(4942),n=l(15785),a=l(35776),r=l(92812),i=l(94184),s=l.n(i),d=l(65480),c=l(47720),u=l(59273),p=l(48325),g=l(27860),v=l(68457),m=l(8),f=l(53971),h=l(90166),y=l(26777);function b(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,o)}return l}function w(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?b(Object(l),!0).forEach((function(t){(0,o.Z)(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):b(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}const x=/^(localhost:\d{1,5}|(\*\.|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+(\.[a-zA-Z]{2,})+)|\*|(\*\.[a-zA-Z0-9-]+(\.[a-zA-Z]{2,})+))$/,Z=/^(?=[A-Za-z0-9\s]{6,}$)[A-Za-z0-9\s]*$/;var O={name:"19cme6k",styles:"margin-left:10px;color:var(--spectrum-global-color-gray-800);&:hover{color:var(--spectrum-global-color-gray-900);}"},D={name:"17fjgey",styles:"width:fit-content;margin-top:10px"},C={name:"1e43w35",styles:"color:rgb(0, 84, 182);&:hover{color:rgb(2, 101, 220);}"},S={name:"1kjtuj9",styles:"color:var(--spectrum-global-color-gray-800);margin:0"},k={name:"oq6u0f",styles:"display:flex;gap:10px"},A={name:"ftyx0c",styles:"display:flex;gap:24px;flex-direction:column;width:100%"},z={name:"1pmf9ly",styles:"border:none;padding:0;font-family:'adobe-clean';background:transparent;margin-left:10px;text-decoration:underline;color:var(--spectrum-global-color-gray-800);cursor:pointer"},P={name:"7hgi8",styles:"color:var(--spectrum-global-color-gray-800)"},j={name:"budh8k",styles:"display:flex;flex-direction:column;gap:16px"};const F=e=>{var t;let{formProps:l,credentialType:o,service:i}=e;const{0:m,1:b}=(0,a.useState)(!1),{0:B,1:H}=(0,a.useState)(!1),{0:I,1:M}=(0,a.useState)({}),{0:L,1:_}=(0,a.useState)(""),{0:$,1:R}=(0,a.useState)(!0),{0:G,1:J}=(0,a.useState)(!1),{0:K,1:W}=(0,a.useState)([]),{0:Y,1:X}=(0,a.useState)({}),{0:Q,1:ee}=(0,a.useState)(!1),{0:te,1:le}=(0,a.useState)(!1),{0:oe,1:ne}=(0,a.useState)(!1),{0:ae,1:re}=(0,a.useState)(!1),{0:ie,1:se}=(0,a.useState)(!1),{0:de,1:ce}=(0,a.useState)({}),{0:ue,1:pe}=(0,a.useState)(!0),{0:ge,1:ve}=(0,a.useState)(""),{ims:me}=(0,a.useContext)(y.ZP),fe=null==l?void 0:l[F],he=null==fe||null===(t=fe.children)||void 0===t?void 0:t.filter((e=>Object.keys(e.props).some((e=>e.startsWith("contextHelp"))))),ye=()=>{const e={},t={label:"Language",selectOptions:[]};null==fe||fe.children.forEach((l=>{let{type:o,props:a}=l;var r;o===V&&null!=a&&a.children&&(t.required=a.required||!1,(r=t.selectOptions).push.apply(r,(0,n.Z)([].concat(a.children).map((e=>{let{props:{title:t,href:l}}=e;return{title:t,href:l}})))),X((e=>{var t,l;return w(w({},e),Array.isArray(a.children)?null:{Download:null===(t=a.children)||void 0===t||null===(l=t.props)||void 0===l?void 0:l.title})})));e[o]=w(w({},a),{},{required:o===E||(null==a?void 0:a.required)})})),t.selectOptions.length&&(e[T]=t,1===t.selectOptions.length&&X((e=>{var l,o;return w(w({},e),{},{Download:null===(l=t.selectOptions[0])||void 0===l?void 0:l.title,zipUrl:null===(o=t.selectOptions[0])||void 0===o?void 0:o.href})}))),W(e),(async()=>{var e;const t=null===(e=localStorage)||void 0===e?void 0:e.getItem("OrgInfo"),l=await(0,v.Xu)(ce);if(null===t)1===(null==l?void 0:l.length)&&pe(!1);else if(l){const e=JSON.parse(t);pe(1!==e.orgLen),ce(e)}l||(ce({}),R(!1))})()};(0,a.useEffect)((()=>{setTimeout((()=>{se(!1)}),8e3)}),[ie]),(0,a.useEffect)((()=>{$&&H(!1)}),[$]),(0,a.useEffect)((()=>{if(!G&&$){const e=w({},Y);for(const t in e)e[t]="";X(e),re(!1)}}),[G]),(0,a.useEffect)((()=>{ye()}),[]),(0,a.useEffect)((()=>{var e;if(de)if(de&&0!==(null===(e=Object.keys(de))||void 0===e?void 0:e.length))R(!0);else{var t;0===(null===(t=Object.keys(de))||void 0===t?void 0:t.length)&&(ce(void 0),R(!1))}else ce(void 0),R(!1),H(!0)}),[de]),(0,a.useEffect)((()=>{if(B){const e=w({},Y);for(const t in e)e[t]="";X(e)}}),[B]),(0,a.useEffect)((()=>{var e,t,l,o;const n=null===(e=Array.from((null==fe?void 0:fe.children)||[]).filter((e=>{var t;return(null==e||null===(t=e.props)||void 0===t?void 0:t.required)||e.type===E})))||void 0===e?void 0:e.map((e=>e.type)),a=Z.test(Y.CredentialName)&&(null===(t=Y.CredentialName)||void 0===t?void 0:t.length)>=6,r=n.filter((e=>"AllowedOrigins"===e.name)),i=null===(l=Y.AllowedOrigins)||void 0===l?void 0:l.split(",").map((e=>x.test(e.trim()))),s=!r||(null==i?void 0:i.every((e=>!0===e)))&&void 0!==Y.AllowedOrigins&&0!==(null===(o=Y.AllowedOrigins)||void 0===o?void 0:o.length),d=a&&s&&!0===Y.Agree;ne(d)}),[Y]),(0,a.useEffect)((()=>{(async()=>{if(me&&me.isSignedInUser()){const e=await me.getProfile();ve(null==e?void 0:e.email)}})()}),[me]);const be=(e,t)=>{const l="Downloads"===t||"Agree"===t?e.target.checked:e.target.value;if(X((e=>w(w({},e),{},{[t]:l}))),"Download"===t&&Y.Downloads){var o;const t=null==K||null===(o=K[T])||void 0===o?void 0:o.selectOptions.find((t=>t.title===e.target.value));t&&X((e=>w(w({},e),{},{zipUrl:t.href})))}},we=null==K?void 0:K[N],xe=null==K?void 0:K[E],Ze=null==K?void 0:K[U],Oe=null==K?void 0:K[V],De=null==K?void 0:K[T];return(0,r.tZ)(a.default.Fragment,null,!te&&$&&!m&&de&&(0,r.tZ)("div",{className:s()(null==fe?void 0:fe.className),css:j},(0,r.tZ)("div",{css:(0,r.iv)("display:flex;flex-direction:column;gap:16px;color:var(--spectrum-global-color-gray-800);width:100%;height:100%;text-align:left;@media screen and (min-width:",v.xU,") and (max-width:",v.Ey,"){padding:0;width:100%;}","")},(null==fe?void 0:fe.title)&&(0,r.tZ)("h3",{className:"spectrum-Heading spectrum-Heading--sizeL"},null==fe?void 0:fe.title),(null==fe?void 0:fe.paragraph)&&(0,r.tZ)("p",{className:"spectrum-Body spectrum-Body--sizeL"},null==fe?void 0:fe.paragraph),(0,r.tZ)("p",{className:"spectrum-Body spectrum-Body--sizeS",css:P},"You're creating this credential in  ","developer"===(null==de?void 0:de.type)?"in your personal developer organization":(0,r.tZ)("span",null,"[",(0,r.tZ)("b",null,null==de?void 0:de.name),"] "),".",ue&&(0,r.tZ)("button",{tabIndex:"0",css:z,onClick:()=>ee(!0)},"Change organization?"))),(0,r.tZ)("div",{css:(0,r.iv)("display:flex;gap:35px;@media screen and (min-width:",v.xU,") and (max-width:",v.Ey,"){flex-direction:column;padding-left:0;}","")},(0,r.tZ)("div",{css:(0,r.iv)("display:flex;flex-direction:column;gap:35px;width:50%;@media screen and (min-width:",v.xU,") and (max-width:",v.Ey,"){width:100%;}","")},(0,r.tZ)("div",{css:A},xe&&(0,r.tZ)(E,{nameProps:xe,isFormValue:he,formData:Y,handleChange:be}),Ze&&(0,r.tZ)(U,{originsProps:Ze,isFormValue:he,formData:Y,handleChange:be}),Oe&&De&&(0,r.tZ)(V,{downloadsProp:Oe,type:"Downloads",formData:Y,handleChange:be}),Y.Downloads&&De&&(0,r.tZ)(T,{downloadProp:De,formData:Y,isFormValue:he,handleChange:be}),(0,r.tZ)("div",{css:k},(0,r.tZ)("input",{type:"checkbox",checked:Y.Agree,onChange:e=>be(e,"Agree")}),(0,r.tZ)("p",{css:S},"By checking this box, you agree to ",(0,r.tZ)("a",{href:"https://wwwimages2.adobe.com/content/dam/cc/en/legal/servicetou/Adobe-Developer-Additional-Terms_en-US_20230822.pdf",css:C,target:"_blank",rel:"noreferrer"},"Adobe Developer Terms of Use"),".")),(0,r.tZ)("button",{id:"credentialButton",className:"spectrum-Button spectrum-Button--fill spectrum-Button--accent spectrum-Button--sizeM",css:D,onClick:async()=>{var e,t;const l=null===(e=window.adobeIMS)||void 0===e||null===(t=e.getTokenFromStorage())||void 0===t?void 0:t.token;l||console.log("User not logged in"),b(!0),R(!1);const n={name:Y.CredentialName,platform:o,description:"created for get credential",domain:Y.AllowedOrigins,services:[{sdkCode:i}]};try{var a,r,s;const e=await fetch(`/console/api/organizations/${null==de?void 0:de.id}/integrations/adobeid`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`,"x-api-key":null===(a=window)||void 0===a||null===(r=a.adobeIMS)||void 0===r||null===(s=r.adobeIdData)||void 0===s?void 0:s.client_id},body:JSON.stringify(n)}),t=await e.json();if(200===e.status)M(t),J(!0),re(!0);else if(null!=t&&t.messages){var d;re(!0),ne(!1),_(null==t||null===(d=t.messages[0])||void 0===d?void 0:d.message),R(!0)}}catch(c){H(!0)}finally{b(!1)}},disabled:!oe},(0,r.tZ)("span",{className:"spectrum-Button-label"},"Create credential")))),we?(0,r.tZ)(q,{sideContent:null==we?void 0:we.children}):null),(0,r.tZ)("p",{className:"spectrum-Body spectrum-Body--sizeS",css:(0,r.iv)("color:var(--spectrum-global-color-gray-800);@media screen and (min-width:",v.xU,") and (max-width:",v.Ey,"){padding-left:0;}","")},"Have existing credentials?",(0,r.tZ)("a",{href:"/console/",target:"_blank",rel:"noreferrer",css:O},"Go to Developer Console"))),ae&&(0,r.tZ)(a.default.Fragment,null,ie?(0,r.tZ)(f.F,{message:"Organization Changed",variant:"success",disable:8e3,customDisableFunction:re}):(0,r.tZ)(f.F,{customDisableFunction:re,message:$&&!G?L:!B&&G&&"Your credentials were created successfully.",variant:B||$&&!G?"error":"success",disable:B||$&&!G?null:8e3})),m&&!G&&(0,r.tZ)(c.g,{credentials:fe,downloadStatus:Y.Downloads}),Q&&(0,r.tZ)(p.G,{setModalOpen:ee,redirectToBeta:te,setRedirectBetaProgram:le,setAlertShow:re,alertShow:ae,organizationChange:ie,setOrganization:se,setOrganizationValue:ce}),B&&!$&&!G&&(0,r.tZ)(u.I,{errorMessage:null==l?void 0:l[u.I]}),G&&!$&&(0,r.tZ)(d.Z,{credentialProps:l,response:I,setShowCreateForm:R,setShowCredential:J,organizationName:null==de?void 0:de.name,formData:Y,orgID:null==de?void 0:de.id}),te&&(0,r.tZ)(g.Z,{joinBeta:null==l?void 0:l[g.Z]}),!$&&!de&&!B&&(0,r.tZ)(h.K,{developerAccessError:null==l?void 0:l[h.K],title:null==fe?void 0:fe.title,emailID:ge}))},N=e=>{let{side:t}=e;return t};var B={name:"8sarsy",styles:"position:relative;display:inline-block;width:100%"};const E=e=>{var t,l,o;let{nameProps:n,isFormValue:a,formData:i,handleChange:s}=e;const d=!Z.test(i.CredentialName),c=0!==(null===(t=i.CredentialName)||void 0===t?void 0:t.length)&&d;return(0,r.tZ)(v.Mt,{isFormValue:a,fields:n,formData:i,isRed:c},(0,r.tZ)("div",{css:B},(0,r.tZ)("input",{type:"text",css:(0,r.iv)("padding:7px;border-radius:3px;width:97%;border:1px solid ",c?"rgb(211, 21, 16)":"var(--spectrum-global-color-gray-400)",";&::placeholder{font-style:italic;color:var(--spectrum-global-color-gray-400);}&:focus{outline:none;border-color:",c?"rgb(211, 21, 16)":"var(--spectrum-global-color-gray-400)",";}",""),value:i.CredentialName,onChange:e=>s(e,"CredentialName"),placeholder:null==n?void 0:n.placeholder,maxLength:null==n?void 0:n.range}),(0,r.tZ)("span",{css:(0,r.iv)("display :",(null===(l=i.CredentialName)||void 0===l?void 0:l.length)<3&&0!==(null===(o=i.CredentialName)||void 0===o?void 0:o.length)?"block":"none",";","")},(0,r.tZ)(v.zM,null))))},U=e=>{var t,l;let{originsProps:o,isFormValue:n,type:a,formData:i,handleChange:s}=e;const d=null===(t=i.AllowedOrigins)||void 0===t?void 0:t.split(",").map((e=>x.test(e.trim()))),c=null==d?void 0:d.every((e=>!0===e)),u=void 0!==i.AllowedOrigins&&!c&&0!==(null===(l=i.AllowedOrigins)||void 0===l?void 0:l.length);return(0,r.tZ)(v.Mt,{isFormValue:n,fields:o,type:a,formData:i,isRed:u},(0,r.tZ)("textarea",{css:(0,r.iv)("flex:1;padding:7px;height:50px;border-radius:3px;border:1px solid ",u?"rgb(211, 21, 16)":"var(--spectrum-global-color-gray-400)",";resize:none;width:90%;color:#4b4b4b;font-family:adobe-clean,Helvetica,Arial,sans-serif;&::placeholder{color:var(--spectrum-global-color-gray-600);font-style:italic;}&:focus{outline:none;border-color:",u?"rgb(211, 21, 16)":"var(--spectrum-global-color-gray-400)",";}&:hover{&::placeholder{color:var(--spectrum-global-color-gray-800);}}",""),value:i.AllowedOrigins,placeholder:null==o?void 0:o.placeholder,onChange:e=>s(e,"AllowedOrigins")}))};var H={name:"i92civ",styles:"cursor:pointer;display:flex;justify-content:center;align-items:center"},I={name:"18ny2tv",styles:"color:var(--spectrum-dialog-confirm-description-text-color, var(--spectrum-global-color-gray-800));margin:0"},M={name:"zatqba",styles:"display:flex;gap:10px;align-items:center"};const V=e=>{let{downloadsProp:t,handleChange:l,formData:o}=e;const{label:n,contextHelpLabelForLink:a,contextHelpLink:i,contextHelpText:s,contextHelp:d,contextHelpHeading:c}=t;return(0,r.tZ)("div",{css:M},(0,r.tZ)("input",{type:"checkbox",onChange:e=>l(e,"Downloads"),checked:o.Downloads}),(0,r.tZ)("p",{css:I}," ",n," "),(0,r.tZ)("div",{css:H},d&&(0,r.tZ)(m.r,{heading:c,text:s,link:i,label:a})))};var L={name:"wd7e5h",styles:"font-style:italic;font-weight:500;font-family:'adobe-clean';padding:7px;border-radius:3px;border:1px solid #D0D0D0!important;width:100%"};const T=e=>{var t,l,o;let{downloadProp:n,formData:i,isFormValue:s,handleChange:d}=e;return(0,r.tZ)(a.default.Fragment,null,(null==n||null===(t=n.selectOptions)||void 0===t?void 0:t.length)>1&&(0,r.tZ)(v.Mt,{isFormValue:s,fields:n},(0,r.tZ)("select",{css:L,id:"selectBox",value:i.Download,onChange:e=>d(e,"Download")},(null==n||null===(l=n.selectOptions)||void 0===l?void 0:l.length)>1&&(0,r.tZ)("option",{value:"",hidden:!0},"Select language for your code pickData"),null==n||null===(o=n.selectOptions)||void 0===o?void 0:o.map(((e,t)=>(0,r.tZ)("option",{key:t,"data-link":e.href,value:e.title},e.title))))))},q=e=>{let{sideContent:t}=e;return(0,r.tZ)(a.default.Fragment,null,(0,r.tZ)("div",{css:(0,r.iv)("width:2px;background-color:#D0D0D0;@media screen and (min-width:",v.xU,") and (max-width:",v.Ey,"){display:none;}","")}),(0,r.tZ)("div",{css:(0,r.iv)("width:50%;@media screen and (min-width:",v.xU,") and (max-width:",v.Ey,"){width:100%;}","")},(0,r.tZ)(N,{side:t})))}}}]);
//# sourceMappingURL=987e9e88-fe03278870e8649e047f.js.map