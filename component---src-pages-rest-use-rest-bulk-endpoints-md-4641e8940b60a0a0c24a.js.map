{"version":3,"file":"component---src-pages-rest-use-rest-bulk-endpoints-md-4641e8940b60a0a0c24a.js","mappings":"4OAUsBA,E,wEAFTC,EAAe,GAOtBC,GALgBF,EAKY,cALJ,SAA6BG,GAEzD,OADAC,QAAQC,KAAK,aAAeL,EAAO,4EAC5B,eAASG,KAIZG,EAAc,CAClBL,aAAAA,GAEIM,EAAYC,EAAAA,EACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGP,GACF,YACD,OAAO,SAACI,GAAD,UAAeD,EAAiBH,EAAhC,CAAuCO,WAAYA,EAAYC,QAAQ,eAG5E,eACE,GAAM,kBADR,mBAGA,6SACA,SAACT,EAAD,CAAaU,QAAQ,OAAOC,MAAM,OAAOF,QAAQ,iBACjD,8BAAe,cAAGG,WAAW,IACzB,KAAQ,kHACP,uBAAYA,WAAW,KAAvB,2DAFL,2NAEsU,cAAGA,WAAW,IAChV,KAAQ,oFAD0T,YAFtU,MAKA,eACE,GAAM,UADR,WAGA,8DAA+C,uBAAYA,WAAW,KAAvB,eAA/C,gBAAsH,uBAAYA,WAAW,KAAvB,OAAtH,mDACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBADZ,mEAKL,6GAA8F,uBAAYA,WAAW,KAAvB,wCAA9F,kBAAgM,uBAAYA,WAAW,KAAvB,QAAhM,SAAyP,uBAAYA,WAAW,KAAvB,YAAzP,iLAA8d,uBAAYA,WAAW,KAAvB,KAA9d,WAAshB,uBAAYA,WAAW,KAAvB,MAAthB,gEACA,qEACA,uBACE,kBAAOA,WAAW,UAChB,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,MADX,sBAGA,eAAIA,WAAW,KACb,MAAS,MADX,iBAKJ,kBAAOA,WAAW,UAChB,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAvB,0CACH,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAvB,uDAEL,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAvB,mCACH,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAvB,iDAIT,SAACZ,EAAD,CAAaU,QAAQ,OAAOC,MAAM,OAAOF,QAAQ,iBACjD,sDACA,eACE,GAAM,YADR,aAGA,2JAA4I,uBAAYG,WAAW,KAAvB,iCAA5I,qCACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBADZ,srBAoCL,SAACZ,EAAD,CAAaU,QAAQ,UAAUC,MAAM,OAAOF,QAAQ,iBACpD,oEACA,eACE,GAAM,aADR,cAGA,gQACA,qBAAK,iBAAMG,WAAW,MAClB,UAAa,iBADZ,8yBA6BL,eACE,GAAM,mBADR,oBAGA,oFAAqE,uBAAYA,WAAW,KAAvB,KAArE,SAA2H,uBAAYA,WAAW,KAAvB,KAA3H,MACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBADZ,yDAIL,eACE,GAAM,0BADR,2BAGA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBADZ,uFAWL,eACE,GAAM,gBADR,iBAGA,wMACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBADZ,iGAKL,mIACA,0CAA2B,uBAAYA,WAAW,KAAvB,OAA3B,8DACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBADZ,+EAKL,eACE,GAAM,mEADR,qEAGA,wGACA,oBACE,eAAIA,WAAW,MAAf,8IACA,eAAIA,WAAW,MAAf,qIACA,eAAIA,WAAW,MAAf,uBAA2C,uBAAYA,WAAW,MAAvB,OAA3C,mIACA,eAAIA,WAAW,MAAf,OAA2B,uBAAYA,WAAW,MAAvB,gBAA3B,4EAMNL,EAAWM,gBAAiB","sources":["webpack://dev-site-documentation-template/./src/pages/rest/use-rest/bulk-endpoints.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-webapi/commerce-webapi/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"bulk-endpoints\"\n    }}>{`Bulk endpoints`}</h1>\n    <p>{`Bulk API endpoints differ from other REST endpoints in that they combine multiple calls of the same type into an array and execute them as a single request. The endpoint handler splits the array into individual entities and writes them as separate messages to the message queue.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`Use the `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cli/start-message-queues.html\"\n      }}><inlineCode parentName=\"a\">{`bin/magento queue:consumers:start async.operations.all`}</inlineCode></a>{` command to start the consumer that handles asynchronous and bulk API messages. Also, before using the Bulk API to process messages, you must install and configure RabbitMQ, which is the default message broker. See `}<a parentName=\"p\" {...{\n        \"href\": \"https://devdocs.magento.com/guides/v2.4/install-gde/prereq/install-rabbitmq.html\"\n      }}>{`RabbitMQ`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"routes\"\n    }}>{`Routes`}</h2>\n    <p>{`To call a bulk endpoint, add the prefix `}<inlineCode parentName=\"p\">{`/async/bulk`}</inlineCode>{` before the `}<inlineCode parentName=\"p\">{`/V1`}</inlineCode>{` of a synchronous endpoint route. For example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-http\"\n      }}>{`POST /async/bulk/V1/products\nPOST /async/bulk/V1/customers\n`}</code></pre>\n    <p>{`Endpoint routes that contain input parameters require additional changes. For example, `}<inlineCode parentName=\"p\">{`PUT /V1/products/:sku/media/:entryId`}</inlineCode>{` contains the `}<inlineCode parentName=\"p\">{`:sku`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`:entryId`}</inlineCode>{` input parameters. The route of a bulk request cannot contain input parameters, so you must change the route so that it does not contain any. To do this, replace the colon (`}<inlineCode parentName=\"p\">{`:`}</inlineCode>{`) with `}<inlineCode parentName=\"p\">{`by`}</inlineCode>{` and change the first letter of the parameter to uppercase.`}</p>\n    <p>{`The following table provides several examples:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Synchronous route`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Bulk route`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`PUT /V1/products/:sku/media/:entryId`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`PUT async/bulk/V1/products/bySku/media/byEntryId`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`POST /V1/carts/:quoteId/items`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`POST async/bulk/V1/carts/byQuoteId/items`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`GET requests are not supported.`}</p>\n    <h2 {...{\n      \"id\": \"payloads\"\n    }}>{`Payloads`}</h2>\n    <p>{`The payload of a bulk request contains an array of request bodies. For example, the minimal payload for creating four customers with `}<inlineCode parentName=\"p\">{`POST /async/bulk/V1/customers`}</inlineCode>{` would be structured as follows:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`[{\n    \"customer\": {\n        \"email\": \"mshaw@example.com\",\n        \"firstname\": \"Melanie Shaw\",\n        \"lastname\": \"Doe\"\n    },\n    \"password\": \"Strong-Password\"\n},\n{\n    \"customer\": {\n        \"email\": \"bmartin@example.com\",\n        \"firstname\": \"Bryce\",\n        \"lastname\": \"Martin\"\n    },\n    \"password\": \"Strong-Password\"\n},\n{\n    \"customer\": {\n        \"email\": \"bmartin@example.com\",\n        \"firstname\": \"Bryce\",\n        \"lastname\": \"Martin\"\n    },\n    \"password\": \"Strong-Password\"\n},\n{\n    \"customer\": {\n        \"email\": \"tgomez@example.com\",\n        \"firstname\": \"Teresa\",\n        \"lastname\": \"Gomez\"\n    },\n    \"password\": \"Strong-Password\"\n}\n]\n`}</code></pre>\n    <InlineAlert variant=\"success\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`The second and third requests are duplicates.`}</p>\n    <h2 {...{\n      \"id\": \"responses\"\n    }}>{`Responses`}</h2>\n    <p>{`The response contains an array that indicates whether the call successfully added each request to the message queue. Although the duplicated request to create a customer will fail, Commerce added it to the message queue successfully.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n    \"bulk_uuid\": \"799a59c0-09ca-4d60-b432-2953986c1c38\",\n    \"request_items\": [\n        {\n            \"id\": 0,\n            \"data_hash\": \"3d3d853839dd442d0b99a1badea756a03f19ffb0fb7aab672c05f83d5a914181\",\n            \"status\": \"accepted\"\n        },\n        {\n            \"id\": 1,\n            \"data_hash\": \"bf8859d03545f0fa80084a47348a629cdf571fc064b952e7396c338d5cf3bf6e\",\n            \"status\": \"accepted\"\n        },\n        {\n            \"id\": 2,\n            \"data_hash\": \"876f3f2e4b226d54dcbf3f5ce752a9f748a45310261d2dd5cc7a7c9ef74b4369\",\n            \"status\": \"accepted\"\n        },\n        {\n            \"id\": 3,\n            \"data_hash\": \"9c1bd4bfd8defcc856ddf129cc01d172625d139d5f7dcf53b6cb09a0e9a843a3\",\n            \"status\": \"accepted\"\n        }\n    ],\n    \"errors\": false\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"delete-requests\"\n    }}>{`DELETE requests`}</h2>\n    <p>{`The following call asynchronously deletes CMS blocks with IDs `}<inlineCode parentName=\"p\">{`1`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`2`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-http\"\n      }}>{`DELETE <host>/rest/async/bulk/V1/cmsPage/byPageId\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"delete-request-payload\"\n    }}>{`DELETE request payload`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`[\n    {\n        \"pageId\": \"1\"\n    },\n    {\n        \"pageId\": \"2\"\n    }\n]\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"store-scopes\"\n    }}>{`Store scopes`}</h2>\n    <p>{`You can specify a store code (which is labeled in the Admin as store view code) in the route of an asynchronous endpoint so that it operates on a specific store, as shown below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-http\"\n      }}>{`POST /<store_code>/async/bulk/V1/products\nPUT /<store_code>/async/bulk/V1/products/bySku\n`}</code></pre>\n    <p>{`As a result, the asynchronous calls update the products on the specific store, instead of the default store.`}</p>\n    <p>{`You can specify the `}<inlineCode parentName=\"p\">{`all`}</inlineCode>{` store code to perform operations on all existing stores:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-http\"\n      }}>{`POST /all/async/bulk/V1/products\nPUT /all/async/bulk/V1/products/bySku\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"fallback-and-creatingupdating-objects-when-setting-store-scopes\"\n    }}>{`Fallback and creating/updating objects when setting store scopes`}</h2>\n    <p>{`The following rules apply when you create or update an object, such as a product.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`If you do not set the store code while creating a new product, Commerce creates a new object with all values set globally for each scope.`}</li>\n      <li parentName=\"ul\">{`If you do not set the store code while updating a product, then by fallback, Commerce updates values for the default store only.`}</li>\n      <li parentName=\"ul\">{`If you include the `}<inlineCode parentName=\"li\">{`all`}</inlineCode>{` parameter, then Commerce updates values for all store scopes (in case a particular store doesn't yet have its own value set).`}</li>\n      <li parentName=\"ul\">{`If `}<inlineCode parentName=\"li\">{`<store_code>`}</inlineCode>{` parameter is set, then values for only defined store will be updated.`}</li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["name","_frontmatter","InlineAlert","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","variant","slots","parentName","isMDXComponent"],"sourceRoot":""}