"use strict";(self.webpackChunkcommerce_webapi=self.webpackChunkcommerce_webapi||[]).push([[5843],{93715:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return o},default:function(){return u}});var a=n(87462),m=n(63366),r=(n(15007),n(64983)),d=n(91515),i=n(14552),l=["components"],o={},p={_frontmatter:o},s=d.Z;function u(e){var t=e.components,n=(0,m.Z)(e,l);return(0,r.mdx)(s,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"createcompanyuser-mutation"},"createCompanyUser mutation"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"createCompanyUser")," mutation allows an existing company user who is assigned a role that contains the ",(0,r.mdx)("inlineCode",{parentName:"p"},"Magento_Company::users_edit")," permission to create a new company user. The specified email address determines how the application processes the request."),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("p",{parentName:"li"},"If the email address is unique for the website, the application immediately creates the company user.")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("p",{parentName:"li"},"If the email address belongs to a customer who is not a company user, the application sends an invitation to join the company organization to the customer. When the customer accepts the invitation, the application adds the customer to the company organization.")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("p",{parentName:"li"},'If the email address belongs to a customer who is part of any company organization, the application returns the error "A customer with the same email already assigned to company".'))),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"target_id")," input attribute allows you to specify which node in the company structure will be the parent node of the company user. If you do not specify a value, the user will be assigned to the top-level (root) node of the company structure."),(0,r.mdx)("p",null,"You can get the ",(0,r.mdx)("inlineCode",{parentName:"p"},"target_id")," and the ",(0,r.mdx)("inlineCode",{parentName:"p"},"role_id")," with the ",(0,r.mdx)("a",{parentName:"p",href:"../queries/company.md"},(0,r.mdx)("inlineCode",{parentName:"a"},"company"))," query."),(0,r.mdx)("h2",{id:"syntax"},"Syntax"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-graphql"},"mutation {\n    createCompanyUser(\n        input: CompanyUserCreateInput!\n    ) {\n        CreateCompanyUserOutput\n    }\n}\n")),(0,r.mdx)("h2",{id:"example-usage"},"Example usage"),(0,r.mdx)("h3",{id:"create-a-company-user-minimal-payload"},"Create a company user (minimal payload)"),(0,r.mdx)("p",null,"The following example shows the minimal payload to add a company user. Because a ",(0,r.mdx)("inlineCode",{parentName:"p"},"target_id")," is not specified, the application places the new company user at the top node of the company structure."),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Request:")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-graphql"},'mutation {\n  createCompanyUser(\n    input: {\n      email: "john.doe@example.com"\n      firstname: "John"\n      lastname: "Doe"\n      job_title: "User"\n      role_id: "MQ=="\n      status: ACTIVE\n      telephone: "1234567890"\n    }\n  ) {\n    user {\n      created_at\n      email\n    }\n  }\n}\n')),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Response:")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "createCompanyUser": {\n      "user": {\n        "created_at": "2020-10-15 23:33:49",\n        "email": "john.doe@example.com"\n      }\n    }\n  }\n}\n')),(0,r.mdx)("h3",{id:"create-a-company-user-in-a-specific-location-in-the-company-structure"},"Create a company user in a specific location in the company structure"),(0,r.mdx)("p",null,"This example creates a new company user of the parent company team specified in the ",(0,r.mdx)("inlineCode",{parentName:"p"},"target_id")," field."),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Request:")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-graphql"},'mutation {\n  createCompanyUser(\n    input: {\n      email: "jane.doe3@example.com"\n      firstname: "Jane"\n      lastname: "Doe3"\n      job_title: "User"\n      role_id: "NTc="\n      status: ACTIVE\n      telephone: "1234567890"\n      target_id: "OA=="\n    }\n  ) {\n    user {\n      created_at\n      email\n      firstname\n      lastname\n      job_title\n      role {\n        id\n        name\n      }\n      team {\n        id\n        name\n        structure_id\n      }\n      status\n      telephone\n    }\n  }\n}\n')),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Response:")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "createCompanyUser": {\n      "user": {\n        "created_at": "2020-10-15 23:39:11",\n        "email": "jane.doe@example.com",\n        "firstname": "Jane",\n        "lastname": "Doe",\n        "job_title": "User",\n        "role": {\n          "id": "NTc=",\n          "name": "Default User"\n        },\n        "team": {\n          "id": "MQ==",\n          "name": "Test Team",\n          "structure_id": "Mg=="\n        },\n        "status": "ACTIVE",\n        "telephone": "1234567890"\n      }\n    }\n  }\n}\n')),(0,r.mdx)("h2",{id:"input-attributes"},"Input attributes"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"CompanyUserCreateInput")," input object defines the company user data."),(0,r.mdx)("h3",{id:"companyusercreateinput-attributes"},"CompanyUserCreateInput attributes"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"CompanyUserCreateInput")," object contains the following attributes:"),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,r.mdx)("th",{parentName:"tr",align:null},"Data Type"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"email")),(0,r.mdx)("td",{parentName:"tr",align:null},"String!"),(0,r.mdx)("td",{parentName:"tr",align:null},"The company user's email address")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"firstname")),(0,r.mdx)("td",{parentName:"tr",align:null},"String!"),(0,r.mdx)("td",{parentName:"tr",align:null},"The company user's first name")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"job_title")),(0,r.mdx)("td",{parentName:"tr",align:null},"String!"),(0,r.mdx)("td",{parentName:"tr",align:null},"The company user's job title or function")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"lastname")),(0,r.mdx)("td",{parentName:"tr",align:null},"String!"),(0,r.mdx)("td",{parentName:"tr",align:null},"The company user's last name")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"role_id")),(0,r.mdx)("td",{parentName:"tr",align:null},"ID!"),(0,r.mdx)("td",{parentName:"tr",align:null},"The role ID to assign to the company user")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"status")),(0,r.mdx)("td",{parentName:"tr",align:null},"CompanyUserStatusEnum!"),(0,r.mdx)("td",{parentName:"tr",align:null},"Indicates whether the company user is ACTIVE or INACTIVE")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"target_id")),(0,r.mdx)("td",{parentName:"tr",align:null},"ID"),(0,r.mdx)("td",{parentName:"tr",align:null},"The ID of a node within a company's structure. This ID will be the parent of the created company user")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"telephone")),(0,r.mdx)("td",{parentName:"tr",align:null},"String!"),(0,r.mdx)("td",{parentName:"tr",align:null},"The company user's phone number")))),(0,r.mdx)("h2",{id:"output-attributes"},"Output attributes"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"CreateCompanyUserOutput")," output object contains the following attribute:"),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,r.mdx)("th",{parentName:"tr",align:null},"Data Type"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"user")),(0,r.mdx)("td",{parentName:"tr",align:null},"Customer!"),(0,r.mdx)("td",{parentName:"tr",align:null},"Contains company user data")))),(0,r.mdx)("h3",{id:"customer-attributes"},"Customer attributes"),(0,r.mdx)(i.default,{mdxType:"Customer"}),(0,r.mdx)("h2",{id:"errors"},"Errors"),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Error"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"Invitation was sent to an existing customer, they will be added to your organization once they accept the invitation.")),(0,r.mdx)("td",{parentName:"tr",align:null},"The email provided in the ",(0,r.mdx)("inlineCode",{parentName:"td"},"input"),".",(0,r.mdx)("inlineCode",{parentName:"td"},"email")," argument belongs to an existing customer. The application sends an invitation to this customer. When the customer accepts the invitation, the customer will be assigned to the company.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"A customer with the same email already assigned to company.")),(0,r.mdx)("td",{parentName:"tr",align:null},"The email provided in the ",(0,r.mdx)("inlineCode",{parentName:"td"},"input"),".",(0,r.mdx)("inlineCode",{parentName:"td"},"email")," argument belongs to an existing customer, and the customer has already been assigned to the company.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},'"Email" is not a valid email address.')),(0,r.mdx)("td",{parentName:"tr",align:null},"The value provided in the ",(0,r.mdx)("inlineCode",{parentName:"td"},"input"),".",(0,r.mdx)("inlineCode",{parentName:"td"},"email")," argument has an invalid format.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},'Field "createCompanyUser" argument "input" requires type String!, found xxx.')),(0,r.mdx)("td",{parentName:"tr",align:null},"The value specified in the one of the ",(0,r.mdx)("inlineCode",{parentName:"td"},"input")," arguments has an invalid type.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},'Field "xxx" is not defined by type CompanyUserCreateInput.')),(0,r.mdx)("td",{parentName:"tr",align:null},"The ",(0,r.mdx)("inlineCode",{parentName:"td"},"input"),".",(0,r.mdx)("inlineCode",{parentName:"td"},"xxx")," argument is undefined.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"Required parameters are missing: xxx")),(0,r.mdx)("td",{parentName:"tr",align:null},"The ",(0,r.mdx)("inlineCode",{parentName:"td"},"input"),".",(0,r.mdx)("inlineCode",{parentName:"td"},"xxx")," argument was omitted or contains an empty value.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"No such entity with roleId = xxx")),(0,r.mdx)("td",{parentName:"tr",align:null},"The company role with ID ",(0,r.mdx)("inlineCode",{parentName:"td"},"xxx")," doesn't exist.")))))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-graphql-schema-b-2-b-company-mutations-create-user-md-0aab3bf7bd617aff04ce.js.map