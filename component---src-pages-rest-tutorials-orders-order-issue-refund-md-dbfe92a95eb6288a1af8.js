"use strict";(self.webpackChunkcommerce_webapi=self.webpackChunkcommerce_webapi||[]).push([[2673],{73294:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return o},default:function(){return s}});var a=t(87462),r=t(63366),d=(t(15007),t(64983)),i=t(91515),m=["components"],o={},p={_frontmatter:o},l=i.Z;function s(e){var n=e.components,t=(0,r.Z)(e,m);return(0,d.mdx)(l,(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,d.mdx)("h1",{id:"step-10-issue-a-partial-refund"},"Step 10. Issue a partial refund"),(0,d.mdx)("p",null,"Adobe Commerce introduced two endpoints that streamline the process of issuing a refund by creating a creditmemo and updating the order or invoice in one call."),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Endpoint"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"POST /V1/order/<order_ID>/refund")),(0,d.mdx)("td",{parentName:"tr",align:null},"Issues an offline refund")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"POST /V1/invoice/<invoice_ID>/refund")),(0,d.mdx)("td",{parentName:"tr",align:null},"Issue a refund with an online payment system")))),(0,d.mdx)("p",null,"In this example, the customer did not like the fit of the Radiant T-M-Orange shirt and wants a refund."),(0,d.mdx)("p",null,"Since the customer paid for the order with a bank transfer, we'll call ",(0,d.mdx)("inlineCode",{parentName:"p"},"POST /V1/order/<order ID>/refund"),". The ",(0,d.mdx)("inlineCode",{parentName:"p"},"order_item_id")," for the Radiant Tee-M-Orange is ",(0,d.mdx)("inlineCode",{parentName:"p"},"3"),"."),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"arguments")," object allows you to adjust the amount of the credit to be refunded. Since the customer used the ",(0,d.mdx)("inlineCode",{parentName:"p"},"tablerate")," shipping method, which applied to the whole order, we'll assume that a refund can't be applied to the shipping costs. Therefore, the shipping_amount is set to ",(0,d.mdx)("inlineCode",{parentName:"p"},"0"),"."),(0,d.mdx)("p",null,"If the customer had selected the ",(0,d.mdx)("inlineCode",{parentName:"p"},"flatrate")," shipping method ($5 per item), we would set the value of ",(0,d.mdx)("inlineCode",{parentName:"p"},"shipping_amount")," to ",(0,d.mdx)("inlineCode",{parentName:"p"},"5"),"."),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"return_to_stock_items")," array specifies which ",(0,d.mdx)("inlineCode",{parentName:"p"},"order_item_id"),"s can be returned to stock and be resold."),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Endpoint:")),(0,d.mdx)("p",null,(0,d.mdx)("inlineCode",{parentName:"p"},"POST <host>/rest/<store_code>/V1/order/5/refund")),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Headers:")),(0,d.mdx)("p",null,(0,d.mdx)("inlineCode",{parentName:"p"},"Content-Type: application/json")),(0,d.mdx)("p",null,(0,d.mdx)("inlineCode",{parentName:"p"},"Authorization: Bearer <administrator token>")),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Payload:")),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "items": [\n    {\n      "order_item_id": 3,\n      "qty": 1\n    }\n  ],\n  "notify": true,\n  "arguments": {\n    "shipping_amount": 0,\n    "adjustment_positive": 0,\n    "adjustment_negative": 0,\n    "extension_attributes": {\n      "return_to_stock_items": [\n        3\n      ]\n    }\n  }\n}\n')),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Response:")),(0,d.mdx)("p",null,"A credit memo id, such as ",(0,d.mdx)("inlineCode",{parentName:"p"},"3"),"."),(0,d.mdx)("h3",{id:"verify-this-step"},"Verify this step"),(0,d.mdx)("p",null,"Log in to Admin. Click ",(0,d.mdx)("strong",{parentName:"p"},"Sales")," > ",(0,d.mdx)("strong",{parentName:"p"},"Credit Memos"),". The credit memo is displayed in the grid."),(0,d.mdx)("h2",{id:"congratulations-youve-finished"},"Congratulations! You've finished."),(0,d.mdx)("h3",{id:"related-topics"},"Related topics"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("a",{parentName:"li",href:"/commerce-webapi/get-started/"},"Getting Started with Adobe Commerce Web APIs")),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("a",{parentName:"li",href:"/commerce-webapi/rest/tutorials/configurable-product/"},"Create a configurable product Tutorial")),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("a",{parentName:"li",href:"/commerce-webapi/rest/"},"REST API Reference Overview")),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("a",{parentName:"li",href:"../../quick-reference/index.md"},"REST API documentation"))))}s.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-rest-tutorials-orders-order-issue-refund-md-dbfe92a95eb6288a1af8.js.map