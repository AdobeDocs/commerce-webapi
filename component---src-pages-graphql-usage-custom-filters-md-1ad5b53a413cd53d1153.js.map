{"version":3,"file":"component---src-pages-graphql-usage-custom-filters-md-1ad5b53a413cd53d1153.js","mappings":"0RAMaA,EAAe,CAAC,EACvBC,EAAc,CAClBD,gBAEIE,EAAYC,EAAAA,EACH,SAASC,EAAW,GAGhC,IAHgC,WACjCC,GAED,EADIC,GAAK,YAER,OAAO,SAACJ,GAAS,UAAKD,EAAiBK,EAAK,CAAED,WAAYA,EAAYE,QAAQ,eAG5E,eACE,GAAM,oCACH,qCACL,kBAAK,qBAAmB,uBAAYC,WAAW,KAAM,UAAuB,sBAAoB,cAAGA,WAAW,IAC1G,KAAQ,2CACP,uBAAYA,WAAW,KAAM,aAA6B,uBAAqB,uBAAYA,WAAW,KAAM,+BAA4C,wCAAsC,uBAAYA,WAAW,KAAM,UAAuB,0BAAwB,uBAAYA,WAAW,KAAM,sBAAmC,+KAC/U,eACE,GAAM,iBACH,kBACL,kBAAK,qHAAmH,uBAAYA,WAAW,KAAM,+BAA4C,wDAAsD,mBAAQA,WAAW,KAAM,yBAAkC,WAAS,mBAAQA,WAAW,KAAM,UAAmB,oBAAkB,mBAAQA,WAAW,KAAM,WAAoB,MAAO,IAAK,iBAAkB,IAAK,OAAK,mBAAQA,WAAW,KAAM,yBAAkC,uEACzgB,oBACE,eAAIA,WAAW,OACb,cAAGA,WAAW,MAAO,YAAU,mBAAQA,WAAW,KAAM,6BAAsC,cAAY,mBAAQA,WAAW,KAAM,6BAAsC,QAAM,mBAAQA,WAAW,KAAM,2BAAoC,0IAAwI,mBAAQA,WAAW,KAAM,MAAe,mFAE9Z,eAAIA,WAAW,OACb,cAAGA,WAAW,MAAO,YAAU,mBAAQA,WAAW,KAAM,iBAA0B,SAAO,mBAAQA,WAAW,KAAM,8BAAuC,eAAa,mBAAQA,WAAW,KAAM,OAAgB,mWAAiW,mBAAQA,WAAW,KAAM,OAAgB,mEAAiE,mBAAQA,WAAW,KAAM,6BAAsC,iCAA+B,mBAAQA,WAAW,KAAM,MAAe,SAGpyB,eACE,GAAM,oCACH,qCACL,kBAAK,QAAM,uBAAYA,WAAW,KAAM,UAAuB,0FAC/D,oBACE,eAAIA,WAAW,OAAK,uBAAYA,WAAW,MAAO,wBAAqC,uCAAqC,mBAAQA,WAAW,MAAO,sCAA+C,+GAA6G,uBAAYA,WAAW,MAAO,MAAmB,QAAM,uBAAYA,WAAW,MAAO,MAAmB,wBAAsB,uBAAYA,WAAW,MAAO,MAAmB,8DAA4D,uBAAYA,WAAW,MAAO,MAAmB,8DAC9kB,eAAIA,WAAW,OAAK,uBAAYA,WAAW,MAAO,wBAAqC,uCAAqC,mBAAQA,WAAW,MAAO,sCAA+C,qGAAmG,uBAAYA,WAAW,MAAO,SAAsB,6FAC5V,eAAIA,WAAW,OAAK,uBAAYA,WAAW,MAAO,wBAAqC,uCAAqC,mBAAQA,WAAW,MAAO,sCAA+C,yGAAuG,uBAAYA,WAAW,MAAO,MAAmB,SAAO,uBAAYA,WAAW,MAAO,QAAqB,yEAEzZ,eACE,GAAM,WACH,YACL,kBAAK,0CAAwC,uBAAYA,WAAW,KAAM,UAAuB,yBAAuB,uBAAYA,WAAW,KAAM,QAAqB,kCAAgC,cAAGA,WAAW,IACpN,KAAQ,8DACP,uBAAYA,WAAW,KAAM,2BAAwC,UAAc,+CAA6C,uBAAYA,WAAW,KAAM,SAAsB,SAAO,uBAAYA,WAAW,KAAM,SAAsB,wDAClP,mBAAG,mBAAQA,WAAW,KAAM,cAC5B,qBAAK,iBAAMA,WAAW,MAClB,UAAa,oBACV,8UAsBP,mBAAG,mBAAQA,WAAW,KAAM,eAC5B,qBAAK,iBAAMA,WAAW,MAClB,UAAa,oBACV,4lBA6BP,uBACE,kBAAOA,WAAW,UAChB,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,WACjC,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,aAGrC,kBAAOA,WAAW,UAChB,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,WACjC,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,UAEnC,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,YACjC,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,UAEnC,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,WACjC,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,YAIvC,kBAAK,wBAAsB,cAAGA,WAAW,IACrC,KAAQ,2CACP,uBAAYA,WAAW,KAAM,aAA6B,+CAA6C,uBAAYA,WAAW,KAAM,UAAuB,yBAAuB,uBAAYA,WAAW,KAAM,SAAsB,wCAC1O,mBAAG,mBAAQA,WAAW,KAAM,cAC5B,qBAAK,iBAAMA,WAAW,MAClB,UAAa,oBACV,8HAUP,mBAAG,mBAAQA,WAAW,KAAM,eAC5B,kBAAK,oDACL,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBACV,2MAcP,eACE,GAAM,qBACH,sBACL,kBAAK,gJAA8I,uBAAYA,WAAW,KAAM,UAAuB,WACvM,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBACV,4XASP,kBAAK,sBAAoB,uBAAYA,WAAW,KAAM,iBAA8B,SAAO,uBAAYA,WAAW,KAAM,uBAAoC,uBAAqB,uBAAYA,WAAW,KAAM,wBAAqC,0BAAwB,uBAAYA,WAAW,KAAM,iCAA8C,2CAAyC,uBAAYA,WAAW,KAAM,aAA0B,MAAI,uBAAYA,WAAW,KAAM,aAA0B,UAAQ,uBAAYA,WAAW,KAAM,gBAA6B,gBAGvjB,CAEAJ,EAAWK,gBAAiB,C","sources":["webpack://commerce-webapi/./src/pages/graphql/usage/custom-filters.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/commerce-webapi/commerce-webapi/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"filtering-with-custom-attributes\"\n    }}>{`Filtering with custom attributes`}</h1>\n    <p>{`As of 2.3.4, the `}<inlineCode parentName=\"p\">{`filter`}</inlineCode>{` attribute of the `}<a parentName=\"p\" {...{\n        \"href\": \"../schema/products/queries/products.md\"\n      }}><inlineCode parentName=\"a\">{`products`}</inlineCode></a>{` query accepts the `}<inlineCode parentName=\"p\">{`ProductAttributeFilterInput`}</inlineCode>{` object. (In previous versions, the `}<inlineCode parentName=\"p\">{`filter`}</inlineCode>{` attribute required a `}<inlineCode parentName=\"p\">{`ProductFilterInput`}</inlineCode>{` object. This object contained a hardcoded list of filterable attributes, and you could not filter on a custom attribute or any other attribute that was not on the list.)`}</p>\n    <h2 {...{\n      \"id\": \"prerequisites\"\n    }}>{`Prerequisites`}</h2>\n    <p>{`You have several options when enabling a custom attribute (or any attribute that is not listed by default in the `}<inlineCode parentName=\"p\">{`ProductAttributeFilterInput`}</inlineCode>{` object) for filtering. Navigate to the attribute's `}<strong parentName=\"p\">{`Storefront Properties`}</strong>{` page (`}<strong parentName=\"p\">{`Stores`}</strong>{` > Attributes > `}<strong parentName=\"p\">{`Product`}</strong>{` > `}{`<`}{`attribute name`}{`>`}{` > `}<strong parentName=\"p\">{`Storefront Properties`}</strong>{`) in the Admin, then perform one or both of the following actions:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Set the `}<strong parentName=\"p\">{`Use in Layered Navigation`}</strong>{` field to `}<strong parentName=\"p\">{`Filterable (with results)`}</strong>{` or `}<strong parentName=\"p\">{`Filterable (no results)`}</strong>{`. This field allows the attribute to be used as a filter and returns layered navigation and aggregation data. If this field is set to `}<strong parentName=\"p\">{`No`}</strong>{`, then the attribute will not return layered navigation and aggregation data.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Set the `}<strong parentName=\"p\">{`Use in Search`}</strong>{` and `}<strong parentName=\"p\">{`Visible in Advanced Search`}</strong>{` fields to `}<strong parentName=\"p\">{`Yes`}</strong>{`. These fields primarily allow the application index the attribute's contents, making the data available for quick and advanced searches. Setting both these fields also allows the attribute to be used as a filter. These fields do not configure the presence or absence of layered navigation and aggregation data. If you set only one of these fields to `}<strong parentName=\"p\">{`Yes`}</strong>{`, the attribute cannot be used as a filter (unless you set the `}<strong parentName=\"p\">{`Use in Layered Navigation`}</strong>{` field to a value other than `}<strong parentName=\"p\">{`No`}</strong>{`).`}</p>\n      </li>\n    </ul>\n    <h2 {...{\n      \"id\": \"define-the-filter-for-your-query\"\n    }}>{`Define the filter for your query`}</h2>\n    <p>{`The `}<inlineCode parentName=\"p\">{`filter`}</inlineCode>{` definition for your custom attribute requires one of the following input data types:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`FilterEqualTypeInput`}</inlineCode>{` - Specify this data type when the `}<strong parentName=\"li\">{`Catalog Input Type for Store Owner`}</strong>{` field for your custom attribute is set to Yes/No, Select, or Multiple select. Your filter can contain the `}<inlineCode parentName=\"li\">{`eq`}</inlineCode>{` or `}<inlineCode parentName=\"li\">{`in`}</inlineCode>{` attribute. Use the `}<inlineCode parentName=\"li\">{`eq`}</inlineCode>{` attribute to exactly match the specified string. Use the `}<inlineCode parentName=\"li\">{`in`}</inlineCode>{` attribute to filter on a comma-separated list of values.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`FilterMatchTypeInput`}</inlineCode>{` - Specify this data type when the `}<strong parentName=\"li\">{`Catalog Input Type for Store Owner`}</strong>{` field for your custom attribute is set to Text Field or Text Area. Your filter must contain the `}<inlineCode parentName=\"li\">{`match`}</inlineCode>{` attribute, which will return all items that partially fuzzy match the specified string.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`FilterRangeTypeInput`}</inlineCode>{` - Specify this data type when the `}<strong parentName=\"li\">{`Catalog Input Type for Store Owner`}</strong>{` field for your custom attribute is set to Price or Date. Your filter can contain one or both of the `}<inlineCode parentName=\"li\">{`to`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`from`}</inlineCode>{` attributes, which serve to provide a range of values to filter on.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"example\"\n    }}>{`Example`}</h2>\n    <p>{`In this example, the custom attribute `}<inlineCode parentName=\"p\">{`volume`}</inlineCode>{` was assigned to the `}<inlineCode parentName=\"p\">{`bags`}</inlineCode>{` attribute group. Running the `}<a parentName=\"p\" {...{\n        \"href\": \"../schema/attributes/queries/custom-attribute-metadata.md\"\n      }}><inlineCode parentName=\"a\">{`customAttributeMetadata`}</inlineCode>{` query`}</a>{` on this custom attribute reveals that the `}<inlineCode parentName=\"p\">{`label`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`value`}</inlineCode>{` values for the attribute's options are as follows:`}</p>\n    <p><strong parentName=\"p\">{`Request:`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-graphql\"\n      }}>{`{\n  customAttributeMetadata(\n    attributes: [\n      {\n        attribute_code: \"volume\"\n        entity_type: \"catalog_product\"\n      }\n    ]\n  ) {\n    items {\n      attribute_code\n      attribute_type\n      entity_type\n      input_type\n      attribute_options {\n       value\n       label\n     }\n    }\n  }\n}\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Response:`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-graphql\"\n      }}>{`{\n  \"data\": {\n    \"customAttributeMetadata\": {\n      \"items\": [\n        {\n          \"attribute_code\": \"volume\",\n          \"attribute_type\": \"Int\",\n          \"entity_type\": \"catalog_product\",\n          \"input_type\": \"select\",\n          \"attribute_options\": [\n            {\n              \"value\": \"216\",\n              \"label\": \"Large\"\n            },\n            {\n              \"value\": \"217\",\n              \"label\": \"Medium\"\n            },\n            {\n              \"value\": \"218\",\n              \"label\": \"Small\"\n            }\n          ]\n        }\n      ]\n    }\n  }\n}\n`}</code></pre>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"th\">{`label`}</inlineCode></th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"th\">{`value`}</inlineCode></th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Large`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`216`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Medium`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`217`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Small`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`218`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`In this scenario, a `}<a parentName=\"p\" {...{\n        \"href\": \"../schema/products/queries/products.md\"\n      }}><inlineCode parentName=\"a\">{`products`}</inlineCode></a>{` search filtered to return items where the `}<inlineCode parentName=\"p\">{`volume`}</inlineCode>{` attribute is set to `}<inlineCode parentName=\"p\">{`Large`}</inlineCode>{` would be similar to the following:`}</p>\n    <p><strong parentName=\"p\">{`Request:`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-graphql\"\n      }}>{`{\n  products(filter: { volume: { eq: \"216\" } }) {\n    total_count\n    items {\n      name\n      sku\n    }\n  }\n}\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Response:`}</strong></p>\n    <p>{`The response might be similar to the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"data\": {\n    \"products\": {\n      \"total_count\": 1,\n      \"items\": [\n        {\n          \"name\": \"Wayfarer Messenger Bag\",\n          \"sku\": \"24-MB05\"\n        }\n      ]\n    }\n  }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"output-attributes\"\n    }}>{`Output attributes`}</h2>\n    <p>{`When a product requires a filter attribute that is not a field on its output schema, inject the attribute name into the class in a module's `}<inlineCode parentName=\"p\">{`di.xml`}</inlineCode>{` file.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<type name=\"Magento\\\\CatalogGraphQl\\\\Model\\\\Resolver\\\\Products\\\\FilterArgument\\\\ProductEntityAttributesForAst\" >\n  <arguments>\n    <argument name=\"additionalAttributes\" xsi:type=\"array\">\n      <item name=\"field_to_sort\" xsi:type=\"string\">field</item>\n      <item name=\"other_field_to_sort\" xsi:type=\"string\">other_field</item>\n    </argument>\n  </arguments>\n</type>\n`}</code></pre>\n    <p>{`This example adds `}<inlineCode parentName=\"p\">{`field_to_sort`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`other_field_to_sort`}</inlineCode>{` attributes to the `}<inlineCode parentName=\"p\">{`additionalAttributes`}</inlineCode>{` array defined in the `}<inlineCode parentName=\"p\">{`ProductEntityAttributesForAst`}</inlineCode>{` class. The array already contains the `}<inlineCode parentName=\"p\">{`min_price`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`max_price`}</inlineCode>{`, and `}<inlineCode parentName=\"p\">{`category_ids`}</inlineCode>{` attributes.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}