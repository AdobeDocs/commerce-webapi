"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[9214],{38578:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return m},default:function(){return x}});var a=n(87462),d=n(63366),o=(n(15007),n(64983)),l=n(91515),r=["components"],m={},i=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.mdx)("div",t)}},s=i("InlineAlert"),p=i("CodeBlock"),u={_frontmatter:m},c=l.Z;function x(e){var t=e.components,n=(0,d.Z)(e,r);return(0,o.mdx)(c,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"manage-negotiable-quotes"},"Manage negotiable quotes"),(0,o.mdx)("p",null,"This topic describes the calls required to initiate a negotiable quote and to prepare it to be converted to an order."),(0,o.mdx)(s,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,o.mdx)("p",null,"All negotiable quote calls require an admin authorization token."),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"REST Endpoints:")),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},"POST /V1/negotiableQuote/request\nPOST /V1/negotiableQuote/submitToCustomer\nPOST /V1/negotiableQuote/decline\nPOST /V1/negotiableQuote/pricesUpdated\nGET /V1/negotiableQuote/:quoteId/comments\nGET /V1/negotiableQuote/attachmentContent\nPUT /V1/negotiableQuote/:quoteId/shippingMethod\n")),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"NegotiableQuoteManagementInterface Parameters:")),(0,o.mdx)("p",null,"The following table lists the parameters defined in ",(0,o.mdx)("inlineCode",{parentName:"p"},"CompanyInterface"),"."),(0,o.mdx)("table",null,(0,o.mdx)("thead",{parentName:"table"},(0,o.mdx)("tr",{parentName:"thead"},(0,o.mdx)("th",{parentName:"tr",align:null},"Name"),(0,o.mdx)("th",{parentName:"tr",align:null},"Description"),(0,o.mdx)("th",{parentName:"tr",align:null},"Format"),(0,o.mdx)("th",{parentName:"tr",align:null},"Requirements"))),(0,o.mdx)("tbody",{parentName:"table"},(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},(0,o.mdx)("inlineCode",{parentName:"td"},"quoteId")),(0,o.mdx)("td",{parentName:"tr",align:null},"Identifies the target quote for the operation."),(0,o.mdx)("td",{parentName:"tr",align:null},"integer"),(0,o.mdx)("td",{parentName:"tr",align:null},"Required")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},(0,o.mdx)("inlineCode",{parentName:"td"},"quoteName")),(0,o.mdx)("td",{parentName:"tr",align:null},"The name of the quote to be created."),(0,o.mdx)("td",{parentName:"tr",align:null},"string"),(0,o.mdx)("td",{parentName:"tr",align:null},"Required")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},(0,o.mdx)("inlineCode",{parentName:"td"},"comment")),(0,o.mdx)("td",{parentName:"tr",align:null},"The comment to add to the quote."),(0,o.mdx)("td",{parentName:"tr",align:null},"string"),(0,o.mdx)("td",{parentName:"tr",align:null},"Optional")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},(0,o.mdx)("inlineCode",{parentName:"td"},"files")),(0,o.mdx)("td",{parentName:"tr",align:null},"An array of files to add to the quote"),(0,o.mdx)("td",{parentName:"tr",align:null},"array"),(0,o.mdx)("td",{parentName:"tr",align:null},"Optional")))),(0,o.mdx)("p",null,"The buyer or the seller can optionally attach up to 10 files to provide details about the quote. Each file must be converted into base64."),(0,o.mdx)("p",null,"The ",(0,o.mdx)("inlineCode",{parentName:"p"},"files")," array contains the following parameters"),(0,o.mdx)("table",null,(0,o.mdx)("thead",{parentName:"table"},(0,o.mdx)("tr",{parentName:"thead"},(0,o.mdx)("th",{parentName:"tr",align:null},"Name"),(0,o.mdx)("th",{parentName:"tr",align:null},"Description"),(0,o.mdx)("th",{parentName:"tr",align:null},"Format"),(0,o.mdx)("th",{parentName:"tr",align:null},"Requirements"))),(0,o.mdx)("tbody",{parentName:"table"},(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},(0,o.mdx)("inlineCode",{parentName:"td"},"base64_encoded_data")),(0,o.mdx)("td",{parentName:"tr",align:null},"A string in base 64 that defines the contents of the added file"),(0,o.mdx)("td",{parentName:"tr",align:null},"string"),(0,o.mdx)("td",{parentName:"tr",align:null},"Required")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},(0,o.mdx)("inlineCode",{parentName:"td"},"type")),(0,o.mdx)("td",{parentName:"tr",align:null},"Defines the type of file, such as ",(0,o.mdx)("inlineCode",{parentName:"td"},"text/plain")," or ",(0,o.mdx)("inlineCode",{parentName:"td"},"application/pdf")),(0,o.mdx)("td",{parentName:"tr",align:null},"string"),(0,o.mdx)("td",{parentName:"tr",align:null},"Optional")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},(0,o.mdx)("inlineCode",{parentName:"td"},"name")),(0,o.mdx)("td",{parentName:"tr",align:null},"The name of the file to be uploaded, such as ",(0,o.mdx)("inlineCode",{parentName:"td"},"quote.txt")," or ",(0,o.mdx)("inlineCode",{parentName:"td"},"quote.pdf"),"."),(0,o.mdx)("td",{parentName:"tr",align:null},"string"),(0,o.mdx)("td",{parentName:"tr",align:null},"Required")))),(0,o.mdx)("h3",{id:"request-a-negotiable-quote"},"Request a negotiable quote"),(0,o.mdx)("p",null,"Before negotiable quote can begin, the following conditions must be met:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"A regular Commerce quote has been created (",(0,o.mdx)("inlineCode",{parentName:"li"},"POST /V1/customers/:customerId/carts")," or ",(0,o.mdx)("inlineCode",{parentName:"li"},"POST /V1/customers/carts/mine"),")"),(0,o.mdx)("li",{parentName:"ul"},"The quote contains items (",(0,o.mdx)("inlineCode",{parentName:"li"},"POST /V1/carts/:quoteId/items"),")")),(0,o.mdx)("p",null,"If the negotiable quote requires a shipping address (for negotiation or tax calculations), you can add it to the standard quote before initiating the negotiable quote (",(0,o.mdx)("inlineCode",{parentName:"p"},"POST /V1/carts/:cartId/shipping-information"),")"),(0,o.mdx)(s,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,o.mdx)("p",null,"Requesting a negotiable quote requires an admin authorization token."),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Service Name:")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"negotiableQuoteNegotiableQuoteManagementV1")),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Sample Usage:")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"POST <host>/rest/<store_code>/V1/negotiableQuote/request")),(0,o.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,o.mdx)("h4",{id:"payload"},"Payload"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "quoteId": 3,\n  "quoteName": "First quote",\n  "comment": "Requesting a 5% discount",\n  "files": [\n    {\n      "base64_encoded_data": "VGhhbmsgeW91IGZvciByZWFkaW5nIHRoZSBNYWdlbnRvIEIyQiBkb2N1bWVudGF0aW9uLg==",\n      "name": "quote.txt"\n    }\n  ]\n}\n')),(0,o.mdx)("h4",{id:"response"},"Response"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},"// `true`, indicating the request was successful\n")),(0,o.mdx)("p",null,"Commerce creates a negotiable quote in the ",(0,o.mdx)("inlineCode",{parentName:"p"},"Created")," state."),(0,o.mdx)("h3",{id:"submit-a-negotiable-quote-to-a-buyer"},"Submit a negotiable quote to a buyer"),(0,o.mdx)("p",null,'When you submit a negotiable quote to the buyer, the status for the buyer changes to "Updated". The buyer can subsequently edit or update the quote.'),(0,o.mdx)("p",null,"The seller can send a request to submit the quote to the buyer. The request can be submitted only for quotes in the following system states:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Created"),(0,o.mdx)("li",{parentName:"ul"},"Processing by admin"),(0,o.mdx)("li",{parentName:"ul"},"Submitted by customer")),(0,o.mdx)("p",null,"When the quote is submitted to the buyer:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Commerce checks catalog prices (price per item), cart rules, and discounts then recalculates the prices and taxes. The shipping price and the negotiated price are not affected (if they are entered into the quote)."),(0,o.mdx)("li",{parentName:"ul"},"Items that are no longer active or available for this buyer are removed from quote and prices are recalculated."),(0,o.mdx)("li",{parentName:"ul"},"The quote state is changed to Submitted by admin.")),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Service Name:")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"negotiableQuoteNegotiableQuoteManagementV1")),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Sample Usage:")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"POST <host>/rest/<store_code>/V1/negotiableQuote/submitToCustomer")),(0,o.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,o.mdx)("h4",{id:"payload-1"},"Payload"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "quoteId": 3,\n  "comment": "It\'d be our pleasure. Please proceed with your order."\n}\n')),(0,o.mdx)("h4",{id:"response-1"},"Response"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},"// `true`, indicating the request was successful\n")),(0,o.mdx)("h3",{id:"update-a-quote"},"Update a quote"),(0,o.mdx)("p",null,"Use the ",(0,o.mdx)("inlineCode",{parentName:"p"},"PUT /V1/negotiableQuote/:quoteId")," call to update a quote. See ",(0,o.mdx)("a",{parentName:"p",href:"negotiable-update.md"},"Update a negotiable quote")," for use cases."),(0,o.mdx)("h3",{id:"recalculate-prices"},"Recalculate prices"),(0,o.mdx)("p",null,"The process of completing a negotiable quote can take days, or even longer. During that time, the prices for the items in the quote may have changed directly or indirectly.  For example, someone could have changed prices in the shared catalogs or adjusted price rules, and the prices in the negotiable quote are stale. This call refreshes item prices, taxes, discounts, cart rules in the negotiable quote. Quotes that are locked for the seller will not be updated."),(0,o.mdx)("p",null,"The request can be applied to one or more quotes at the same time."),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Sample Usage:")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"POST <host>/rest/<store_code>/V1/negotiableQuote/pricesUpdated")),(0,o.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,o.mdx)("h4",{id:"payload-2"},"Payload"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "quoteIds": [3]\n}\n')),(0,o.mdx)("h4",{id:"response-2"},"Response"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},"// `true`, indicating the request was successful\n")),(0,o.mdx)("h3",{id:"set-the-shipping-method"},"Set the shipping method"),(0,o.mdx)("p",null,"To set the shipping method, the quote must be in the ",(0,o.mdx)("inlineCode",{parentName:"p"},"created"),", ",(0,o.mdx)("inlineCode",{parentName:"p"},"processing_by_admin")," or ",(0,o.mdx)("inlineCode",{parentName:"p"},"submitted_by_customer"),". In addition, the quote must have a shipping address but no shipping method or shipping price."),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Sample Usage:")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"PUT <host>/rest/<store_code>/V1/negotiableQuote/3/shippingMethod")),(0,o.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,o.mdx)("h4",{id:"payload-3"},"Payload"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "shippingMethod": "fixedrate"\n}\n')),(0,o.mdx)("h4",{id:"response-3"},"Response"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},"// None\n")),(0,o.mdx)("h3",{id:"decline-a-quote"},"Decline a quote"),(0,o.mdx)("p",null,"The seller can send a request to decline the quote. The request can be submitted only for quotes in the following system states:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Created"),(0,o.mdx)("li",{parentName:"ul"},"Processing by admin"),(0,o.mdx)("li",{parentName:"ul"},"Submitted by customer")),(0,o.mdx)("p",null,"When you decline a quote, all custom pricing will be removed from the quote. The buyer will be able to place an order using their standard catalog prices and discounts."),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Service Name:")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"negotiableQuoteNegotiableQuoteManagementV1")),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Sample Usage:")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"POST <host>/rest/<store_code>/V1/negotiableQuote/decline")),(0,o.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,o.mdx)("h4",{id:"payload-4"},"Payload"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "quoteId": 80,\n  "reason": "Your order is too large. "\n}\n')),(0,o.mdx)("h4",{id:"response-4"},"Response"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},"// `true`, indicating the request was successful\n")),(0,o.mdx)("h2",{id:"miscellaneous-operations"},"Miscellaneous operations"),(0,o.mdx)("p",null,"These tasks are not essential for completing a negotiable quote, but might be useful"),(0,o.mdx)("h3",{id:"list-all-comments-for-a-quote"},"List all comments for a quote"),(0,o.mdx)("p",null,"Commerce returns all the comments associated with the specified quote ID. The comments are listed in chronological order, with the oldest comment listed first. A ",(0,o.mdx)("inlineCode",{parentName:"p"},"creator_type")," value of ",(0,o.mdx)("inlineCode",{parentName:"p"},"3")," indicates the buyer made the comment. If the value is ",(0,o.mdx)("inlineCode",{parentName:"p"},"2"),", the seller commented."),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Sample Usage:")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"GET <host>/rest/<store_code>/V1/negotiableQuote/87/comments")),(0,o.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,o.mdx)("h4",{id:"payload-5"},"Payload"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},"// Not applicable\n")),(0,o.mdx)("h4",{id:"response-5"},"Response"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "entity_id": 6,\n    "parent_id": 87,\n    "creator_type": 3,\n    "is_decline": 0,\n    "is_draft": 0,\n    "creator_id": 1,\n    "comment": "Requesting a 5% discount",\n    "created_at": "2017-06-01 21:14:51",\n    "attachments": [\n    {\n      "attachment_id": 1,\n      "comment_id": 12,\n      "file_name": "hello.txt",\n      "file_path": "/h/e/hello.txt",\n      "file_type": null\n    }\n    ]\n  },\n  {\n    "entity_id": 7,\n    "parent_id": 87,\n    "creator_type": 2,\n    "is_decline": 0,\n    "is_draft": 0,\n    "creator_id": 1,\n    "comment": "We cannot discount Configurable Product 1, because the price is already discounted. We can adjust the overall price so the remaining items are discounted 5%. Please let us know whether this is acceptable. ",\n    "created_at": "2017-06-01 21:29:15",\n    "attachments": []\n  },\n  {\n    "entity_id": 8,\n    "parent_id": 87,\n    "creator_type": 3,\n    "is_decline": 0,\n    "is_draft": 0,\n    "creator_id": 1,\n    "comment": "That is fine. Please apply the discounts to our order.",\n    "created_at": "2017-06-01 21:30:30",\n    "attachments": []\n  },\n  {\n    "entity_id": 9,\n    "parent_id": 87,\n    "creator_type": 2,\n    "is_decline": 0,\n    "is_draft": 0,\n    "creator_id": 1,\n    "comment": "We&#039;re taking $27.50 off your quote total. That&#039;s 5% of the cost of the other items in your cart.",\n    "created_at": "2017-06-01 21:40:19",\n    "attachments": []\n  },\n  {\n    "entity_id": 10,\n    "parent_id": 87,\n    "creator_type": 3,\n    "is_decline": 0,\n    "is_draft": 0,\n    "creator_id": 1,\n    "comment": "Added a shipping address",\n    "created_at": "2017-06-01 21:43:03",\n    "attachments": []\n  },\n  {\n    "entity_id": 11,\n    "parent_id": 87,\n    "creator_type": 2,\n    "is_decline": 0,\n    "is_draft": 0,\n    "creator_id": 1,\n    "comment": "OK",\n    "created_at": "2017-06-01 21:44:16",\n    "attachments": []\n  }\n]\n')),(0,o.mdx)("h3",{id:"retrieve-a-negotiable-quote-attachment"},"Retrieve a negotiable quote attachment"),(0,o.mdx)("p",null,"Use the ",(0,o.mdx)("inlineCode",{parentName:"p"},"attachmentContent")," call to retrieve the files (in base64 format) attached to a negotiable quote."),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"negotiableQuoteAttachmentContentManagementV1")),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Sample Usage:")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"GET <host>/rest/<store_code>/V1/negotiableQuote/attachmentContent")),(0,o.mdx)(p,{slots:"heading, code",repeat:"2",languages:"JSON, JSON",mdxType:"CodeBlock"}),(0,o.mdx)("h4",{id:"payload-6"},"Payload"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},"// Not applicable\n")),(0,o.mdx)("h4",{id:"response-6"},"Response"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "quoteId": 2,\n  "quoteName": "First quote",\n  "files": [\n    {\n      "base64_encoded_data": "VGhhbmsgeW91IGZvciByZWFkaW5nIHRoZSBNYWdlbnRvIEIyQiBkb2N1bWVudGF0aW9uLg==",\n      "name": "quote.txt"\n    }\n  ]\n}\n')))}x.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-rest-b-2-b-negotiable-manage-md-6e0e47f577e129a6ba3a.js.map