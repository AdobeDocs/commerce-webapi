"use strict";(self.webpackChunkcommerce_webapi=self.webpackChunkcommerce_webapi||[]).push([[4319],{34183:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return o},default:function(){return s}});var a,d=t(87462),l=t(63366),r=(t(15007),t(64983)),m=t(91515),i=["components"],o={},p=(a="InlineAlert",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.mdx)("div",e)}),u={_frontmatter:o},c=m.Z;function s(e){var n=e.components,t=(0,l.Z)(e,i);return(0,r.mdx)(c,(0,d.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"dynamicblocks-query"},"dynamicBlocks query"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"dynamicBlocks")," query returns a list of dynamic blocks that have been placed in a Dynamic Blocks Rotator inline widget and meet the specified criteria."),(0,r.mdx)(p,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"The Banner functionality was removed from Adobe Commerce and Magento Open Source 2.4.0 and replaced with dynamic blocks."),(0,r.mdx)("p",null,"When a ",(0,r.mdx)("a",{parentName:"p",href:"https://docs.magento.com/user-guide/cms/dynamic-blocks-rotate.html"},"Dynamic Blocks Rotator inline widget is created"),", the administrator can select the following options:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"Specified Dynamic Blocks")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"Cart Price Rule Related")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"Catalog Price Rule Related"))),(0,r.mdx)("p",null,"Widgets defined with the ",(0,r.mdx)("strong",{parentName:"p"},"Specified Dynamic Blocks")," option affect CMS page rendering. The other two options are used for rendering cart, product, and catalog pages and are not applicable for PWA applications. Therefore, in most cases for a CMS page, your query should assign the value of ",(0,r.mdx)("inlineCode",{parentName:"p"},"SPECIFIED")," to the ",(0,r.mdx)("inlineCode",{parentName:"p"},"type")," input attribute."),(0,r.mdx)(p,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"Adobe Commerce and Magento Open Source GraphQL supports the ",(0,r.mdx)("strong",{parentName:"p"},"Display all instead of rotating")," rotation mode only."),(0,r.mdx)("h2",{id:"syntax"},"Syntax"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-graphql"},"dynamic_blocks(\n    input: DynamicBlocksFilterInput\n    pageSize: Int\n    currentPage: Int\n    ): DynamicBlocks!\n")),(0,r.mdx)("h2",{id:"example-usage"},"Example usage"),(0,r.mdx)("p",null,"The following query returns all dynamic blocks of type ",(0,r.mdx)("inlineCode",{parentName:"p"},"SPECIFIED"),". The returned item is a dynamic block containing only text. The second item contains a PNG file."),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Request:")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-graphql"},"{\n  dynamicBlocks(input:\n  {\n    type: SPECIFIED\n  })\n  {\n    items {\n      uid\n      content {\n        html\n      }\n    }\n    page_info {\n      current_page\n      page_size\n      total_pages\n    }\n    total_count\n  }\n}\n")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Response:")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "dynamicBlocks": {\n      "items": [\n        {\n          "uid": "MQ==",\n          "content": {\n            "html": "<h2><strong>SAVE 20%</strong></h2>\\r\\n<p>(some restrictions apply)</p>\\r\\n<p>&nbsp;</p>"\n          }\n        },\n        {\n          "uid": "Mg==",\n          "content": {\n            "html": "<p><img src=\\"{{media url=&quot;wysiwyg/save20.png&quot;}}\\" alt=\\"save 20% red\\"></p>"\n          }\n        }\n      ],\n      "page_info": {\n        "current_page": 1,\n        "page_size": 20,\n        "total_pages": 1\n      },\n      "total_count": 2\n    }\n  }\n}\n')),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"cmsPage query response:")),(0,r.mdx)("p",null,"The following code illustrates the definition of the dynamic block with the ",(0,r.mdx)("inlineCode",{parentName:"p"},"uid")," of ",(0,r.mdx)("inlineCode",{parentName:"p"},"MQ=="),", as returned by the ",(0,r.mdx)("a",{parentName:"p",href:"../../store/queries/cms-page.md"},(0,r.mdx)("inlineCode",{parentName:"a"},"cmsPage")," query"),". The response has been reformatted for readability."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-html"},'<div class=\\"widget block block-banners\\"\n  data-bind=\\"scope: \'banner\'\\"\n  data-banner-id=\\"833e4819d6c46ab41e9910f17dc04f72329cb84f1b0dc3aa76d43bcb11d605a6\\"\n  data-types=\\"\\"\n  data-display-mode=\\"fixed\\"\n  data-ids=\\"1\\"\n  data-rotate=\\"\\"\n  data-store-id=\\"1\\"\n  data-uids=\\"MQ==\\">\\n\n\n  <ul class=\\"banner-items\\"\n    data-bind=\\"afterRender: registerBanner\\">\\n\n\n    \x3c!-- ko foreach: getItems833e4819d6c46ab41e9910f17dc04f72329cb84f1b0dc3aa76d43bcb11d605a6() --\x3e\\n\n\n    <li class=\\"banner-item\\"\n      data-bind=\\"attr: {\'data-banner-id\': $data.bannerId}\\">\\n\n\n      <div class=\\"banner-item-content\\" data-bind=\\"bindHtml: $data.html\\"></div>\\n\n    </li>\\n\n\n    \x3c!-- /ko --\x3e\\n\n  </ul>\\n\n</div>\n')),(0,r.mdx)("h2",{id:"input-attributes"},"Input attributes"),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,r.mdx)("th",{parentName:"tr",align:null},"Data type"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"audience_id")),(0,r.mdx)("td",{parentName:"tr",align:null},"FilterEqualTypeInput"),(0,r.mdx)("td",{parentName:"tr",align:null},"Audience ID for this block. Available in the ",(0,r.mdx)("inlineCode",{parentName:"td"},"magento/audiences")," module only.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"cart_id")),(0,r.mdx)("td",{parentName:"tr",align:null},"String"),(0,r.mdx)("td",{parentName:"tr",align:null},"The unique ID that identifies the customer's cart. Available in the ",(0,r.mdx)("inlineCode",{parentName:"td"},"magento2-pwa-commerce")," module only.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"dynamic_block_uids")),(0,r.mdx)("td",{parentName:"tr",align:null},"[ID]"),(0,r.mdx)("td",{parentName:"tr",align:null},"An array of dynamic block UIDs to filter on")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"locations")),(0,r.mdx)("td",{parentName:"tr",align:null},"[DynamicBlockLocationEnum]"),(0,r.mdx)("td",{parentName:"tr",align:null},"An array indicating the locations the dynamic block can be placed. The possible values are CONTENT, HEADER, FOOTER, LEFT, and RIGHT. If this attribute is not specified, the query returns all locations")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"product_uid")),(0,r.mdx)("td",{parentName:"tr",align:null},"ID"),(0,r.mdx)("td",{parentName:"tr",align:null},"The unique ID of the product currently viewed. Available in the ",(0,r.mdx)("inlineCode",{parentName:"td"},"magento2-pwa-commerce")," module only.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"type")),(0,r.mdx)("td",{parentName:"tr",align:null},"DynamicBlockTypeEnum!"),(0,r.mdx)("td",{parentName:"tr",align:null},"A value indicating the type of dynamic block to filter on. The possible values are CART_PRICE_RULE_RELATED, CATALOG_PRICE_RULE_RELATED, and SPECIFIED")))),(0,r.mdx)("h2",{id:"output-attributes"},"Output attributes"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"DynamicBlocks")," output object contains the following attributes."),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,r.mdx)("th",{parentName:"tr",align:null},"Data type"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"items")),(0,r.mdx)("td",{parentName:"tr",align:null},"[DynamicBlock]","!"),(0,r.mdx)("td",{parentName:"tr",align:null},"An array containing individual dynamic blocks")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"page_info")),(0,r.mdx)("td",{parentName:"tr",align:null},"SearchResultPageInfo"),(0,r.mdx)("td",{parentName:"tr",align:null},"Metadata for pagination rendering")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"total_count")),(0,r.mdx)("td",{parentName:"tr",align:null},"Int!"),(0,r.mdx)("td",{parentName:"tr",align:null},"The number of returned dynamic blocks")))),(0,r.mdx)("h3",{id:"dynamicblock-attributes"},"DynamicBlock attributes"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"DynamicBlock")," object contains the following attributes."),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,r.mdx)("th",{parentName:"tr",align:null},"Data type"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"audience_id")),(0,r.mdx)("td",{parentName:"tr",align:null},"[ID]"),(0,r.mdx)("td",{parentName:"tr",align:null},"An array of of Audience IDs for this block. Available in the ",(0,r.mdx)("inlineCode",{parentName:"td"},"magento/audiences")," module only.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"content")),(0,r.mdx)("td",{parentName:"tr",align:null},"ComplexTextValue!"),(0,r.mdx)("td",{parentName:"tr",align:null},"Contains the renderable HTML code of the dynamic block")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"uid")),(0,r.mdx)("td",{parentName:"tr",align:null},"ID!"),(0,r.mdx)("td",{parentName:"tr",align:null},"The unique ID of a DynamicBlock object")))),(0,r.mdx)("h3",{id:"complextextvalue-attributes"},"ComplexTextValue attributes"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"DynamicBlock")," object contains the following attributes."),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,r.mdx)("th",{parentName:"tr",align:null},"Data type"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"html")),(0,r.mdx)("td",{parentName:"tr",align:null},"String!"),(0,r.mdx)("td",{parentName:"tr",align:null},"The HTML content of the dynamic block")))))}s.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-graphql-schema-store-queries-dynamic-blocks-md-d9433bb0998dcc8c38c7.js.map